import{bt as z,y as p,I as _,aQ as C,bs as j,bv as q,C as f,O as $,an as E,bo as F,f as D,bw as N,bx as G,br as b,a1 as O,aH as Q,aq as T,n as Y,aZ as y,H as m,A as w,G as B,aP as H,L as U,bc as Z}from"./index.70f8884a.js";import{c as J,a as K,b as W,d as X}from"./use.649125ec.js";import{N as ee}from"./Icon.76b8c9c6.js";import{S as te}from"./Scrollbar.aca2cd5d.js";const se={},re={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},oe=C("path",{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208s208-93.31 208-208S370.69 48 256 48zm120 190.77h-89l36.88-36.88l-5.6-6.51a87.38 87.38 0 1 0-62.94 148a87.55 87.55 0 0 0 82.42-58.25l5.37-15.13l30.17 10.67l-5.3 15.13a119.4 119.4 0 1 1-112.62-159.18a118.34 118.34 0 0 1 86.36 36.95l.56.62l4.31 5L376 149.81z",fill:"currentColor"},null,-1),ne=[oe];function ae(r,e){return p(),_("svg",re,ne)}const le=z(se,[["render",ae]]),[ie,fe]=J(()=>{const r=new E.exports;return F(()=>{r.removeAllListeners()}),{on(e,o){return r.on(e,o),()=>this.removeListener(e,o)},emit(e){r.emit(e)},removeListener(e,o){r.removeListener(e,o)}}});function be(r,e){const o=j();q(r);const t=fe();t==null||t.on("load",()=>{!f(e)||l()}),t==null||t.on("refresh",()=>{!f(e)||n()});function l(){var s;(s=r.value)==null||s.feat.load(),o.info($("loading"))}function n(){var s;(s=r.value)==null||s.feat.refresh(),o.info($("refreshing"))}return{load:l,refresh:n}}const ue=D({__name:"Refresh",props:{refreshable:{type:Boolean},loadable:{type:Boolean},triggerDistance:{default:150},maxShifting:{default:200},containerRef:null},emits:["refresh","load"],setup(r,{emit:e}){const o=r,{refreshable:t,loadable:l,containerRef:n,maxShifting:s}=N(o),{emit:u}=ie();function M(){!(t!=null&&t.value)||(e("refresh"),u==null||u("refresh"))}function V(){!(l!=null&&l.value)||(e("load"),u==null||u("load"))}const{shifting:d,moveScale:me,add:R,remake:P}=K(s);let h=null;const{x:ve,y:pe,arrivedState:i}=G(n);b(n,"touchstart",a=>{g(),c.value=!1},{passive:!0});const A=O(()=>{I(),g(),c.value=!0},500);b(n,"mousewheel",a=>{!(i.bottom||i.top)||(A(),R(-a.wheelDeltaY/3),c.value=!0)},{passive:!0}),b(n,"touchmove",a=>{if(!(i.bottom||i.top))return;const x=a.touches[0].clientY;!x||(h&&R(h-x),h=x)},{passive:!0}),b(n,"touchend",a=>{!(i.bottom||i.top)||(I(),g(),c.value=!0)},{passive:!0}),Q(()=>{i.bottom||i.top||(g(),c.value=!0)});function I(){Math.abs(d.value)>o.triggerDistance&&(d.value>0?V():d.value<0&&M())}function g(){P(),h=null}const c=T(!1),S=W(),v=Y(()=>{if(d.value<0&&i.top)return d.value;if(d.value>0){const a=S==null?void 0:S.containerRef.value;if(i.bottom||a&&a.offsetHeight===a.scrollHeight)return d.value}return 0});return(a,x)=>{const L=le,k=ee;return p(),_(U,null,[f(t)?(p(),_("div",{key:0,class:"w-full h-20 flex items-center justify-center absolute",style:y({transform:`translate(0,calc(${-f(v)}px + -100%)) rotate(${-f(v)*10}deg)`,transition:c.value?"transform 0.5s":"",zIndex:1})},[m(k,{size:50},{default:w(()=>[m(L)]),_:1})],4)):B("",!0),C("div",{class:"wraps flex flex-col h-full relative overflow-hidden",style:y({transform:`translate(0,calc(${-f(v)/4}px ))`,transition:c.value?"transform 0.3s":"",zIndex:0})},[H(a.$slots,"default")],4),f(l)?(p(),_("div",{key:1,class:"w-full h-20 flex items-center justify-center absolute bottom-0",style:y({transform:`translate(0px,calc(${-f(v)}px + 100%)) rotate(${-f(v)*10}deg)`,transition:c.value?"transform 0.3s":"",zIndex:1})},[m(k,{size:50},{default:w(()=>[m(L)]),_:1})],4)):B("",!0)],64)}}}),ce={class:"wraps flex flex-col h-full relative overflow-hidden"},de=D({__name:"Scrollbar",props:{refreshable:{type:Boolean},loadable:{type:Boolean},triggerDistance:null,maxShifting:null},emits:["refresh","load"],setup(r,{emit:e}){const o=r,t=Y(()=>{var n;return(n=l.value)==null?void 0:n.scrollbarInstRef.containerRef}),{scrollbarInst:l}=X(t);return N(o),(n,s)=>{const u=te;return p(),_("div",ce,[m(ue,Z({"container-ref":f(t)},o,{onLoad:s[1]||(s[1]=()=>e("load")),onRefresh:s[2]||(s[2]=()=>e("refresh"))}),{default:w(()=>[m(u,{class:"w-full flex-shrink flex-1",onScroll:s[0]||(s[0]=()=>{}),ref_key:"scrollbarInst",ref:l},{default:w(()=>[H(n.$slots,"default",{},void 0,!0)]),_:3},512)]),_:3},16,["container-ref"])])}}});const we=z(de,[["__scopeId","data-v-8d3d4c00"]]);export{we as S,fe as a,be as u};
