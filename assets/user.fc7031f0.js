import{ae as U,ad as h,a2 as c,a3 as v,U as o,Z as S,al as u,a4 as L,a5 as E,a6 as y,am as n,an as f,Y as d,ao as R,ap as B,a8 as g,aq as i}from"./index.d4beb9d4.js";import"./getCacheStaff.91029245.js";function M(){return U({feat:{useMetadata(){const a=this.beltline.feat.getLatestEvent();return a?l(a):{}},onHasMetadata(a){this.beltline.feat.onHasLatestEvent((e,t)=>{a(l(e),t)})}}})}function l(a){let e={};try{const t=h(a.tags);e.relayUrls=[...t],a&&(e=JSON.parse(a.content))}catch{}return e}function m(a){return c(`getUserRelayUrlConfigByPubkey:${a}`,()=>{const e=o(d.createChild()).addFilter({kinds:[10002],authors:[a]}).addStaff(S()).addStaff(u(10002,a)).addStaff(R()).addStaff(B()).addStaff(y()).addExtends(d);return e.feat.withEvent()||e.createChild().addStaff(g(a)),e},{useLocalStorage:!1})}function b(a,e){const{urls:t}=e!=null?e:{};return c(`getUserMetadataLineByPubkey:${a}`,()=>{const s=v().createChild({slef:o({})}).addFilter({authors:[a],kinds:[0]}).addStaff(S()).addStaff(u(0,a)).addStaff(M()).addStaff(L()).addStaff(E()).addStaff(y()),r=async()=>{s.addRelayUrls(t),await i(1e3),s.addStaff(g(a)),await i(1e3),s.addReadUrl()};return s.feat.isHas()?n(`getUserMetadataLineByPubkey0${a}`,r,f.syncInterval4):n(`getUserMetadataLineByPubkey1${a}`,r,f.syncInterval),s},{useLocalStorage:!1})}export{m as a,M as c,b as g,l as p};
