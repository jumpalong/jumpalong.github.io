import{R as P}from"./ReloadCircleSharp.54c07e85.js";import{c as A,a as G,b as O,d as j}from"./use.1968d97f.js";import{bs as E,bv as F,C as i,O as B,bn as T,bo as U,f as z,bw as C,bx as q,a1 as J,br as R,aG as K,ap as Q,n as Y,y as _,I as b,aY as y,H as m,A as g,G as $,aP as W,aO as D,L as X,bb as Z,bt as ee}from"./index.d72ecaa3.js";import{N as te}from"./Icon.27b1bf3f.js";import{S as re}from"./Scrollbar.a58d4a3c.js";const[oe,se]=A(()=>{const s=new T.exports;return U(()=>{s.removeAllListeners()}),{on(e,o){return s.on(e,o),()=>this.removeListener(e,o)},emit(e){s.emit(e)},removeListener(e,o){s.removeListener(e,o)}}});function he(s,e){const o=E();F(s);const t=se();t==null||t.on("load",()=>{!i(e)||n()}),t==null||t.on("refresh",()=>{!i(e)||a()});function n(){var r;(r=s.value)==null||r.feat.load(),o.info(B("loading"))}function a(){var r;(r=s.value)==null||r.feat.refresh(),o.info(B("refreshing"))}return{load:n,refresh:a}}const ae=z({__name:"Refresh",props:{refreshable:{type:Boolean},loadable:{type:Boolean},triggerDistance:{default:150},maxShifting:{default:200},containerRef:null},emits:["refresh","load"],setup(s,{emit:e}){const o=s,{refreshable:t,loadable:n,containerRef:a,maxShifting:r}=C(o),{emit:u}=oe();function N(){!(t!=null&&t.value)||(e("refresh"),u==null||u("refresh"))}function V(){!(n!=null&&n.value)||(e("load"),u==null||u("load"))}const{shifting:d,moveScale:fe,add:w,remake:H}=G(r);let p=null;const{x:ie,y:ue,arrivedState:l}=q(a),M=J(()=>{I(),x(),c.value=!0},500);R(a,"mousewheel",f=>{!(l.bottom||l.top)||(M(),w(-f.wheelDeltaY/3),c.value=!0)},{passive:!0}),R(a,"touchmove",f=>{if(!(l.bottom||l.top))return;const h=f.touches[0].clientY;!h||(p&&w(p-h),p=h,c.value=!1)},{passive:!0}),R(a,"touchend",f=>{!(l.bottom||l.top)||(I(),x(),c.value=!0)},{passive:!0}),K(()=>{l.bottom||l.top||(x(),c.value=!0)});function I(){Math.abs(d.value)>o.triggerDistance&&(d.value>0?V():d.value<0&&N())}function x(){H(),p=null}const c=Q(!1),S=O(),v=Y(()=>{if(d.value<0&&l.top)return d.value;if(d.value>0){const f=S==null?void 0:S.containerRef.value;if(l.bottom||f&&f.offsetHeight===f.scrollHeight)return d.value}return 0});return(f,h)=>{const L=P,k=te;return _(),b(X,null,[i(t)?(_(),b("div",{key:0,class:"w-full h-20 flex items-center justify-center absolute",style:y({transform:`translate(0,calc(${-i(v)}px + -100%)) rotate(${-i(v)*10}deg)`,transition:c.value?"transform 0.5s":"",zIndex:1})},[m(k,{size:50},{default:g(()=>[m(L)]),_:1})],4)):$("",!0),W("div",{class:"wraps flex flex-col h-full relative overflow-hidden",style:y({transform:`translate(0,calc(${-i(v)/4}px ))`,transition:c.value?"transform 0.3s":"",zIndex:0})},[D(f.$slots,"default")],4),i(n)?(_(),b("div",{key:1,class:"w-full h-20 flex items-center justify-center absolute bottom-0",style:y({transform:`translate(0px,calc(${-i(v)}px + 100%)) rotate(${-i(v)*10}deg)`,transition:c.value?"transform 0.3s":"",zIndex:1})},[m(k,{size:50},{default:g(()=>[m(L)]),_:1})],4)):$("",!0)],64)}}}),ne={class:"wraps flex flex-col h-full relative overflow-hidden"},le=z({__name:"Scrollbar",props:{refreshable:{type:Boolean},loadable:{type:Boolean},triggerDistance:null,maxShifting:null},emits:["refresh","load"],setup(s,{emit:e}){const o=s,t=Y(()=>{var a;return(a=n.value)==null?void 0:a.scrollbarInstRef.containerRef}),{scrollbarInst:n}=j(t);return C(o),(a,r)=>{const u=re;return _(),b("div",ne,[m(ae,Z({"container-ref":i(t)},o,{onLoad:r[1]||(r[1]=()=>e("load")),onRefresh:r[2]||(r[2]=()=>e("refresh"))}),{default:g(()=>[m(u,{class:"w-full flex-shrink flex-1",onScroll:r[0]||(r[0]=()=>{}),ref_key:"scrollbarInst",ref:n},{default:g(()=>[D(a.$slots,"default",{},void 0,!0)]),_:3},512)]),_:3},16,["container-ref"])])}}});const _e=ee(le,[["__scopeId","data-v-8d3d4c00"]]);export{_e as S,se as a,he as u};
