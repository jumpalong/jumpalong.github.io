import{g}from"./channel.f7cdd32d.js";import{_ as h}from"./ChannelMetadataEdit.vue_vue_type_script_setup_true_lang.10e1be5d.js";import{f as C,bs as w,n,ap as y,aw as O,y as M,z as b,A as i,H as l,D as B,F as L,C as N,Q as k,ab as o,_ as x,O as F}from"./index.0e420a7a.js";import{g as S}from"./FollowChannel.c19e4d3c.js";import{t as D}from"./nostr.2e66b318.js";import{e as V}from"./use.7b5663cd.js";import{_ as W}from"./Space.45ef5f62.js";import"./getCacheStaff.ce5a8b54.js";import"./createGarbageFilter.9d7b3860.js";import"./autoAddRelayurlByEventIdStaff.8ca2f449.js";import"./user.c6ea6a80.js";import"./ContentBlacklistView.9493daed.js";import"./Input.4bb7b199.js";import"./UploadInput.vue_vue_type_script_setup_true_lang.23178d81.js";import"./UploadButton.vue_vue_type_script_setup_true_lang.f8a131e7.js";import"./CloudUpload.d0cb87ab.js";import"./Icon.80a71b9a.js";import"./event.e7c9f230.js";import"./get-slot.4ceacf82.js";const ae=C({__name:"EditChannelView",setup(I){const u=w(),m=k(),c=n(()=>D(m.params.value)),a=n(()=>{var e;return(e=c.value)==null?void 0:e.id}),p=S(),t=y({}),r=n(()=>{if(!!a.value)return g(a.value)}),s=n(()=>{var e;return(e=r.value)==null?void 0:e.feat.useMetadata()});O(()=>s.value,()=>{Object.assign(t.value,s.value)},{deep:!0,immediate:!0});const _=V();function f(){if(!a.value)return;if(!t.value.name){u.warning("\u8BF7\u8F93\u5165channelName");return}if(!r.value)return;const e=[...o.getWriteList()][0];t.value.relayUrls=[...new Set([...o.getReadList(),...o.getWriteList()])],r.value.publish({kind:41,content:JSON.stringify(t.value),tags:[["e",a.value,e]]},o.getWriteList(),{onOK:_}),p.setChannelmetadata(a.value,t.value)}return(e,K)=>{const d=x,v=W;return M(),b(v,{vertical:""},{default:i(()=>[l(h,{channelMetadata:t.value},null,8,["channelMetadata"]),l(d,{onClick:f},{default:i(()=>[B(L(N(F)("save")),1)]),_:1})]),_:1})}}});export{ae as default};
