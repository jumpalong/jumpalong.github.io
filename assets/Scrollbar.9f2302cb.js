import{R as A}from"./ReloadCircleSharp.aaba4a76.js";import{c as F,a as O,b as P,d as j}from"./use.cd98c830.js";import{bo as E,bu as G,C as u,O as B,bm as T,bp as U,f as z,bv as C,bw as X,bn as b,a1 as q,aF as J,ao as K,n as N,y as g,I as x,aX as y,H as m,A as S,G as $,aO as Q,aN as D,L as W,ba as Z,bs as ee}from"./index.6304a51f.js";import{N as te}from"./Icon.358fada6.js";import{S as re}from"./Scrollbar.695c977e.js";const[oe,se]=F(()=>{const a=new T.exports;return U(()=>{a.removeAllListeners()}),{on(e,o){return a.on(e,o),()=>this.removeListener(e,o)},emit(e){a.emit(e)},removeListener(e,o){a.removeListener(e,o)}}});function he(a,e){const o=E();G(a);const t=se();t==null||t.on("load",()=>{!u(e)||l()}),t==null||t.on("refresh",()=>{!u(e)||s()});function l(){var r;(r=a.value)==null||r.feat.load(),o.info(B("loading"))}function s(){var r;(r=a.value)==null||r.feat.refresh(),o.info(B("refreshing"))}return{load:l,refresh:s}}const ae=z({__name:"Refresh",props:{refreshable:{type:Boolean},loadable:{type:Boolean},triggerDistance:{default:150},maxShifting:{default:200},containerRef:null},emits:["refresh","load"],setup(a,{emit:e}){const o=a,{refreshable:t,loadable:l,containerRef:s,maxShifting:r}=C(o),{emit:i}=oe();function Y(){!(t!=null&&t.value)||(e("refresh"),i==null||i("refresh"))}function V(){!(l!=null&&l.value)||(e("load"),i==null||i("load"))}const{shifting:d,moveScale:fe,add:w,remake:H}=O(r);let p=null;const{x:ue,y:ie,arrivedState:f}=X(s);b(s,"touchstart",n=>{h(),c.value=!1},{passive:!0});const M=q(()=>{I(),h(),c.value=!0},500);b(s,"mousewheel",n=>{!(f.bottom||f.top)||(M(),w(-n.wheelDeltaY/3),c.value=!0)},{passive:!0}),b(s,"touchmove",n=>{if(!(f.bottom||f.top))return;const _=n.touches[0].clientY;!_||(p&&w(p-_),p=_)},{passive:!0}),b(s,"touchend",n=>{!(f.bottom||f.top)||(I(),h(),c.value=!0)},{passive:!0}),J(()=>{f.bottom||f.top||(h(),c.value=!0)});function I(){Math.abs(d.value)>o.triggerDistance&&(d.value>0?V():d.value<0&&Y())}function h(){H(),p=null}const c=K(!1),R=P(),v=N(()=>{if(d.value<0&&f.top)return d.value;if(d.value>0){const n=R==null?void 0:R.containerRef.value;if(f.bottom||n&&n.offsetHeight===n.scrollHeight)return d.value}return 0});return(n,_)=>{const L=A,k=te;return g(),x(W,null,[u(t)?(g(),x("div",{key:0,class:"w-full h-20 flex items-center justify-center absolute",style:y({transform:`translate(0,calc(${-u(v)}px + -100%)) rotate(${-u(v)*10}deg)`,transition:c.value?"transform 0.5s":"",zIndex:1})},[m(k,{size:50},{default:S(()=>[m(L)]),_:1})],4)):$("",!0),Q("div",{class:"wraps flex flex-col h-full relative overflow-hidden",style:y({transform:`translate(0,calc(${-u(v)/4}px ))`,transition:c.value?"transform 0.3s":"",zIndex:0})},[D(n.$slots,"default")],4),u(l)?(g(),x("div",{key:1,class:"w-full h-20 flex items-center justify-center absolute bottom-0",style:y({transform:`translate(0px,calc(${-u(v)}px + 100%)) rotate(${-u(v)*10}deg)`,transition:c.value?"transform 0.3s":"",zIndex:1})},[m(k,{size:50},{default:S(()=>[m(L)]),_:1})],4)):$("",!0)],64)}}}),ne={class:"wraps flex flex-col h-full relative overflow-hidden"},le=z({__name:"Scrollbar",props:{refreshable:{type:Boolean},loadable:{type:Boolean},triggerDistance:null,maxShifting:null},emits:["refresh","load"],setup(a,{emit:e}){const o=a,t=N(()=>{var s;return(s=l.value)==null?void 0:s.scrollbarInstRef.containerRef}),{scrollbarInst:l}=j(t);return C(o),(s,r)=>{const i=re;return g(),x("div",ne,[m(ae,Z({"container-ref":u(t)},o,{onLoad:r[1]||(r[1]=()=>e("load")),onRefresh:r[2]||(r[2]=()=>e("refresh"))}),{default:S(()=>[m(i,{class:"w-full flex-shrink flex-1",onScroll:r[0]||(r[0]=()=>{}),ref_key:"scrollbarInst",ref:l},{default:S(()=>[D(s.$slots,"default",{},void 0,!0)]),_:3},512)]),_:3},16,["container-ref"])])}}});const _e=ee(le,[["__scopeId","data-v-8d3d4c00"]]);export{_e as S,se as a,he as u};
