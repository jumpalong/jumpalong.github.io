import{ac as R,aq as i,p as A,m as O,ax as y,C as h,n as w,aH as D,aF as g,bo as K,bp as M,bq as B,as as F,a0 as H,Y as k,a7 as P,ab as j,av as x,br as b,bs as U,O as I,a1 as q,af as _,al as G,ag as N,aG as Y,a6 as E}from"./index.ad5a3ab6.js";import{a as $}from"./autoAddRelayurlByEventIdStaff.5eab6df5.js";import{d as J}from"./getCacheStaff.6b7a4ad5.js";const p=Symbol("scrollbarInstKey"),T=new R.exports,re=n=>{const e={scrollbarInst:i(null),onScroll(t){T.on("scroll",t)},removeScrollListener(t){T.removeListener("scroll",t)},containerRef:n};return A(p,e),e},z=()=>O(p,()=>{},!0);function ue(n=500,e){var l;const t=i((l=e==null?void 0:e.active)!=null?l:!1),a=i(!1);let s=null;y(t,()=>{a.value=!0,clearTimeout(s),s=setTimeout(()=>{a.value=!1},h(n))});const r=w(()=>t.value||a.value),u=i(!1);D(()=>{if(!t.value){u.value=!1;return}setTimeout(()=>{u.value=!0},0)});function c(){t.value=!0}function o(){t.value=!1}return{show:c,hidden:o,active:t,transitionActive:u,safeActive:r,transitioning:a,duration:i(n)}}function ie(n,e){const[t,a]=Q(void 0,e);return[w(()=>a.value?n():null),t,a]}function Q(n,e){const t=i(e==null?void 0:e.target),a=i(!0),s=W(t,{delay:n,...e,isListener:a});let r=i(s.value);const u=y(s,()=>{s.value&&(r.value=!0,u(),a.value=!1)},{immediate:!0});return[t,r]}const[V,X]=te(n=>({isIntoScreen:i(!1),...n}));function Z(n){const e=i(n!=null?n:!1);g(t),K(a);try{M(t),B(a)}catch{}function t(){e.value=!0}function a(){e.value=!1}return e}function W(n,e){var C;const t=F(e,{isListener:!0,componentTreeOptimization:!0,preloadDistance:30}),a=X(),{isIntoScreen:s,active:r}=a!=null?a:{},u=Z(),{isIntoScreen:c,active:o,isAddListener:l}=V({opt:e,isAddListener:i(!1),parent:a,active:w(()=>{var m,L;return(e==null?void 0:e.active)===void 0?r===void 0?u.value:r.value:r===void 0?((m=e.active.value)!=null?m:!0)&&u.value:((L=e.active.value)!=null?L:!0)&&r.value})}),f=function(){var L;if(!o.value||!n.value)return;if(!h(t.isListener)){c.value=!0;return}const m=(L=n.value)==null?void 0:L.getBoundingClientRect();m.y<=window.innerHeight+t.preloadDistance&&m.bottom>=0-t.preloadDistance?c.value=!0:c.value=!1},v=H(f,(C=e==null?void 0:e.delay)!=null?C:500);g(f),v(),z(),D(()=>{var m;if(!o.value){d();return}if(!n.value){d();return}if(!((e==null?void 0:e.componentTreeOptimization)&&((m=s==null?void 0:s.value)!=null?m:!0))){d();return}if(!h(t.isListener)){c.value=!0,d();return}v(),S()});function S(){l.value=!0,window.addEventListener("mousewheel",v,{passive:!0}),window.addEventListener("resize",v,{passive:!0}),window.addEventListener("touchend",v,{passive:!0})}function d(){l.value=!1,window.removeEventListener("mousewheel",v),window.removeEventListener("resize",v),window.removeEventListener("touchend",v)}return c}function oe(n,e=k,t,a){const{urls:s=new Set}=a!=null?a:{},r=ee();return async function(c){var v,S;c.kind=n;const o=(v=h(e))!=null?v:k,l=o.createChild(),f=await l.publish(c,P(h(s),j.getWriteList()),{addUrl:!0,onOK:r});o.addExtends(l),f==null||f.tags.forEach(d=>{d[0]==="p"&&d[1]?l.addStaff(J(d[1])):d[0]==="e"&&d[1]&&l.addStaff($(d[1]))}),f&&((S=t==null?void 0:t.value)==null||S.call(t,f))}}function ce(n,e){const t=Y();if(!t)throw new Error("\u53EA\u80FD\u5728setup\u91CC\u4F7F\u7528");const a=x(n,e),s=i(a.value);return y(a,()=>{s.value=a.value}),w({get(){return s.value},set(r){s.value=r,t.emit(`update:${e}`,r)}})}function le(n=.5625){const e=i(null);g(()=>{t()}),b(window,"resize",()=>{t()});function t(){!e.value||(e.value.style.height=e.value.scrollWidth*n+"px")}return[e]}function ve(n){const e=i(!1);return setTimeout(()=>{e.value=!0},0),e}function ee(){const n=U();return function({ok:t,url:a}){t?n.success(I("published_to",{url:a})):n.error(I("not_published_to",{url:a}))}}function de(n=1060,e=2650){const t=i(window.innerWidth);return b("resize",()=>{t.value=window.innerWidth}),function(s,r,u={}){return w(()=>{const{floor:c=!0}=u;if(t.value>e)return r;if(t.value<n)return s;{const o=(t.value-n)/(e-n),l=(r-s)*o+s;return c?Math.floor(l):l}})}}function fe(n){const e=i(0),t=w(()=>{const a=Math.abs(e.value);return a>=h(n)?0:(h(n)-a)/h(n)});return{shifting:e,moveScale:t,add(a){e.value+=a*t.value},remake(){e.value=0}}}function me(){return q("useNowSecondTimestamp",()=>{const n=i(E());let e;function t(){clearInterval(e),setTimeout(()=>{e=setInterval(()=>{n.value=E()},1e3)},Date.now()%1e3)}return t(),setInterval(t,1e3*60*5),n},{useLocalStorage:!1,duration:999999999999999})}function te(n){const e=Symbol();return[(...t)=>{const a=n(...t);return A(e,a),a},()=>O(e,()=>null,!0)]}function he(n){const e=z();function t(){n.value=!1}y(n,()=>{var a;n.value&&((a=e==null?void 0:e.containerRef.value)==null||a.addEventListener("scroll",t,{once:!0,passive:!0}),document.addEventListener("click",()=>{setTimeout(t,0)},{once:!0}))})}function we(n,e,t){var r;const a={..._,...t!=null?t:{}},s=i((r=G("checkedKinds",a))!=null?r:e);return w({get(){return s.value},set(u){s.value=u,N("checkedKinds",u,a)}})}function Le(n,e){b(n,"mousedown",a,{passive:!0}),b(n,"touchstart",a,{passive:!0});const t=i(!1);function a(){r(),t.value=!0}let s;async function r(){const o=n.value;!o||(o.addEventListener("click",c,{once:!0}),o.addEventListener("mousemove",u,{once:!0,passive:!0}),o.addEventListener("touchmove",u,{once:!0,passive:!0}),o.addEventListener("touchcancel",u,{once:!0,passive:!0}),clearTimeout(s),s=setTimeout(()=>{u()},500))}function u(){t.value=!1}function c(o){!t.value||(o.stopPropagation(),t.value=!1,e())}return{isPress:t}}export{fe as a,z as b,te as c,re as d,ee as e,me as f,W as g,ve as h,oe as i,Q as j,ue as k,ie as l,ce as m,he as n,Le as o,le as p,Z as q,we as r,de as u};
