import{e as P}from"./event.83262074.js";import{_ as C}from"./PapawList.vue_vue_type_script_setup_true_lang.a11388f8.js";import{f as S,bv as z,br as D,n as l,bn as I,ao as v,y as m,I as _,C as s,H as b,G as B,z as j,aE as w,O as F}from"./index.4d15edfb.js";import{g as N}from"./use.fb6ca56f.js";import{e as U}from"./Content.688afa9a.js";import{u as V}from"./Scrollbar.c5c48dba.js";import{_ as q}from"./RelayInfoView.e31dcd10.js";import{_ as A}from"./Empty.1891ae31.js";const G={key:0,class:"py-20 flex items-center justify-center"},H={key:1,class:"h-40 flex justify-center items-center"},Y=S({__name:"PostList",props:{urls:null,pubkeys:null,filter:null,filters:null,pushEvent:null,active:{type:Boolean,default:!0},disabledLoad:{type:Boolean},disabledEmpty:{type:Boolean},limit:null,reverseSort:{type:Boolean},disabledReply:{type:Boolean}},emits:["update:pushEvent"],setup(i,{expose:E,emit:L}){const c=i;logger.for("home.vue").for("PostList.vue").info("\u8FDB\u5165PostList.vue");const{pubkeys:o,filter:r,filters:u,urls:f,active:p}=z(c);D(),logger.for("home.vue").for("PostList.vue").debug("defineProps > pubkey:",o);const y=l(()=>{const e=u!=null&&u.value?[...u.value]:[];return r!=null&&r.value&&e.push(r.value),o!=null&&o.value&&e.push(...o.value.map(t=>({kinds:[1],authors:[t]}))),e}),k=l(()=>{var e;return[...(e=o==null?void 0:o.value)!=null?e:[],...y.value.map(t=>{var d;return(d=t.authors)!=null?d:[]}).flat(1)]}),a=l(()=>{const e={},t=U({filters:y.value,...e,addUrls:f==null?void 0:f.value,pubkeys:k.value,limit:c.limit});return c.reverseSort&&t.addStaffOfSortByCreateAt(),t}),R=V(a,p);I(()=>{var e;(e=a.value)==null||e.closeReq()});const n=l(()=>{var e;return(e=a.value)==null?void 0:e.getList()});L("update:pushEvent",e=>{var t;(t=a.value)==null||t.pushEvent(e)});const g=l(()=>{var e,t;return((e=a.value)==null?void 0:e.feat.loadBufferOpt.isLoading)||((t=a.value)==null?void 0:t.feat.refreshBufferOpt.isLoading)});E({postEvents:n,...R});const h=v(void 0);return N(h,{active:p!=null?p:v(!0)}),v(w()),(e,t)=>{const d=q,x=A;return m(),_("div",{ref_key:"divRef",ref:h},[!i.disabledLoad&&s(g)&&s(n)&&s(n).length===0?(m(),_("div",G,[b(d,{size:"medium"})])):!i.disabledEmpty&&!s(g)&&s(n)&&s(n).length===0?(m(),_("div",H,[b(x,{description:s(F)("empty_text"),size:"huge"},null,8,["description"])])):B("",!0),s(n)?(m(),j(C,{key:2,eventList:s(n),withPapawOptionsButtons:"",disabledReply:i.disabledReply,onEventDeletion:t[0]||(t[0]=O=>s(P)(O))},null,8,["eventList","disabledReply"])):B("",!0)],512)}}});export{Y as _};
