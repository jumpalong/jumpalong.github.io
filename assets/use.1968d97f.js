import{bn as R,ap as i,p as A,m as p,aw as y,C as w,n as h,aG as O,aE as C,bo as K,bp as M,bq as B,ar as F,a1 as P,Y as k,a6 as j,ab as H,au as U,br as b,bs as x,O as E,a2 as _,ae as q,al as G,af as N,aF as Y,ak as I}from"./index.d72ecaa3.js";import{a as $}from"./autoAddRelayurlByEventIdStaff.81d588be.js";import{b as J}from"./getCacheStaff.c38799cf.js";const D=Symbol("scrollbarInstKey"),T=new R.exports,re=n=>{const e={scrollbarInst:i(null),onScroll(t){T.on("scroll",t)},removeScrollListener(t){T.removeListener("scroll",t)},containerRef:n};return A(D,e),e},z=()=>p(D,()=>{},!0);function ue(n=500,e){var l;const t=i((l=e==null?void 0:e.active)!=null?l:!1),a=i(!1);let s=null;y(t,()=>{a.value=!0,clearTimeout(s),s=setTimeout(()=>{a.value=!1},w(n))});const r=h(()=>t.value||a.value),u=i(!1);O(()=>{if(!t.value){u.value=!1;return}setTimeout(()=>{u.value=!0},0)});function c(){t.value=!0}function o(){t.value=!1}return{show:c,hidden:o,active:t,transitionActive:u,safeActive:r,transitioning:a,duration:i(n)}}function ie(n,e){const[t,a]=Q(void 0,e);return[h(()=>a.value?n():null),t,a]}function Q(n,e){const t=i(e==null?void 0:e.target),a=i(!0),s=W(t,{delay:n,...e,isListener:a});let r=i(s.value);const u=y(s,()=>{s.value&&(r.value=!0,u(),a.value=!1)},{immediate:!0});return[t,r]}const[V,X]=te(n=>({isIntoScreen:i(!1),...n}));function Z(n){const e=i(n!=null?n:!1);C(t),K(a);try{M(t),B(a)}catch{}function t(){e.value=!0}function a(){e.value=!1}return e}function W(n,e){var g;const t=F(e,{isListener:!0,componentTreeOptimization:!0,preloadDistance:30}),a=X(),{isIntoScreen:s,active:r}=a!=null?a:{},u=Z(),{isIntoScreen:c,active:o,isAddListener:l}=V({opt:e,isAddListener:i(!1),parent:a,active:h(()=>{var m,L;return(e==null?void 0:e.active)===void 0?r===void 0?u.value:r.value:r===void 0?((m=e.active.value)!=null?m:!0)&&u.value:((L=e.active.value)!=null?L:!0)&&r.value})}),f=function(){var L;if(!o.value||!n.value)return;if(!w(t.isListener)){c.value=!0;return}const m=(L=n.value)==null?void 0:L.getBoundingClientRect();m.y<=window.innerHeight+t.preloadDistance&&m.bottom>=0-t.preloadDistance?c.value=!0:c.value=!1},v=P(f,(g=e==null?void 0:e.delay)!=null?g:500);C(f),v(),z(),O(()=>{var m;if(!o.value){d();return}if(!n.value){d();return}if(!((e==null?void 0:e.componentTreeOptimization)&&((m=s==null?void 0:s.value)!=null?m:!0))){d();return}if(!w(t.isListener)){c.value=!0,d();return}v(),S()});function S(){l.value=!0,window.addEventListener("mousewheel",v,{passive:!0}),window.addEventListener("resize",v,{passive:!0}),window.addEventListener("touchend",v,{passive:!0})}function d(){l.value=!1,window.removeEventListener("mousewheel",v),window.removeEventListener("resize",v),window.removeEventListener("touchend",v)}return c}function oe(n,e=k,t,a){const{urls:s=new Set}=a!=null?a:{},r=ee();return function(c){var v,S;c.kind=n;const o=(v=w(e))!=null?v:k,l=o.createChild(),f=l.publish(c,j(w(s),H.getWriteList()),{addUrl:!0,onOK:r});o.addExtends(l),f==null||f.tags.forEach(d=>{d[0]==="p"&&d[1]?l.addStaff(J(d[1])):d[0]==="e"&&d[1]&&l.addStaff($(d[1]))}),f&&((S=t==null?void 0:t.value)==null||S.call(t,f))}}function ce(n,e){const t=Y();if(!t)throw new Error("\u53EA\u80FD\u5728setup\u91CC\u4F7F\u7528");const a=U(n,e),s=i(a.value);return y(a,()=>{s.value=a.value}),h({get(){return s.value},set(r){s.value=r,t.emit(`update:${e}`,r)}})}function le(n=.5625){const e=i(null);C(()=>{t()}),b(window,"resize",()=>{t()});function t(){!e.value||(e.value.style.height=e.value.scrollWidth*n+"px")}return[e]}function ve(n){const e=i(!1);return setTimeout(()=>{e.value=!0},0),e}function ee(){const n=x();return function({ok:t,url:a}){t?n.success(E("published_to",{url:a})):n.error(E("not_published_to",{url:a}))}}function de(n=1060,e=2650){const t=i(window.innerWidth);return b("resize",()=>{t.value=window.innerWidth}),function(s,r,u={}){return h(()=>{const{floor:c=!0}=u;if(t.value>e)return r;if(t.value<n)return s;{const o=(t.value-n)/(e-n),l=(r-s)*o+s;return c?Math.floor(l):l}})}}function fe(n){const e=i(0),t=h(()=>{const a=Math.abs(e.value);return a>=w(n)?0:(w(n)-a)/w(n)});return{shifting:e,moveScale:t,add(a){e.value+=a*t.value},remake(){e.value=0}}}function me(){return _("useNowSecondTimestamp",()=>{const n=i(I());let e;function t(){clearInterval(e),setTimeout(()=>{e=setInterval(()=>{n.value=I()},1e3)},Date.now()%1e3)}return t(),setInterval(t,1e3*60*5),n},{useLocalStorage:!1,duration:999999999999999})}function te(n){const e=Symbol();return[(...t)=>{const a=n(...t);return A(e,a),a},()=>p(e,()=>null,!0)]}function we(n){const e=z();function t(){n.value=!1}y(n,()=>{var a;n.value&&((a=e==null?void 0:e.containerRef.value)==null||a.addEventListener("scroll",t,{once:!0,passive:!0}),document.addEventListener("mousedown",t,{once:!0,passive:!0}))})}function he(n,e,t){var r;const a={...q,...t!=null?t:{}},s=i((r=G("checkedKinds",a))!=null?r:e);return h({get(){return s.value},set(u){s.value=u,N("checkedKinds",u,a)}})}function Le(n,e){b(n,"mousedown",a,{passive:!0}),b(n,"touchstart",a,{passive:!0});const t=i(!1);function a(){r(),t.value=!0}let s;async function r(){const o=n.value;!o||(o.addEventListener("click",c,{once:!0}),o.addEventListener("mousemove",u,{once:!0,passive:!0}),o.addEventListener("touchmove",u,{once:!0,passive:!0}),o.addEventListener("touchcancel",u,{once:!0,passive:!0}),clearTimeout(s),s=setTimeout(()=>{u()},500))}function u(){t.value=!1}function c(o){!t.value||(o.stopPropagation(),t.value=!1,e())}return{isPress:t}}export{fe as a,z as b,te as c,re as d,ee as e,me as f,W as g,ve as h,oe as i,Q as j,ue as k,ie as l,ce as m,we as n,Le as o,le as p,Z as q,he as r,de as u};
