import{a8 as U,a7 as h,a2 as c,U as o,Y as f,Z as S,a3 as v,a4 as L,a5 as R,ai as n,aj as d,ad as i}from"./index.d72ecaa3.js";import{R as u,e as E,f as B,c as y,b as g}from"./getCacheStaff.c38799cf.js";function M(){return U({feat:{useMetadata(){const a=this.beltline.feat.getLatestEvent();return a?l(a):{}},onHasMetadata(a){this.beltline.feat.onHasLatestEvent((e,t)=>{a(l(e),t)})}}})}function l(a){let e={};try{const t=h(a.tags);e.relayUrls=[...t],a&&(e=JSON.parse(a.content))}catch{}return e}function m(a){return c(`getUserRelayUrlConfigByPubkey:${a}`,()=>{const e=o(f.createChild()).addFilter({kinds:[10002],authors:[a]}).addStaff(S()).addStaff(u(10002,a)).addStaff(E()).addStaff(B()).addStaff(y()).addExtends(f);return e.feat.withEvent()||e.createChild().addStaff(g(a)),e},{useLocalStorage:!1})}function b(a,e){const{urls:t}=e!=null?e:{};return c(`getUserMetadataLineByPubkey:${a}`,()=>{const s=v().createChild({slef:o({})}).addFilter({authors:[a],kinds:[0]}).addStaff(S()).addStaff(u(0,a)).addStaff(M()).addStaff(L()).addStaff(R()).addStaff(y()),r=async()=>{s.addRelayUrls(t),await i(1e3),s.addStaff(g(a)),await i(1e3),s.addReadUrl()};return s.feat.isHas()?n(`getUserMetadataLineByPubkey0${a}`,r,d.syncInterval4):n(`getUserMetadataLineByPubkey1${a}`,r,d.syncInterval),s},{useLocalStorage:!1})}export{m as a,M as c,b as g,l as p};
