import{e as P}from"./event.cb23c92c.js";import{_ as C}from"./PapawList.vue_vue_type_script_setup_true_lang.1f061d25.js";import{f as S,bx as z,bt as D,n as l,bo as I,aq as v,y as m,I as _,C as s,H as b,G as B,z as j,aG as q,O as w}from"./index.77ea77b9.js";import{g as F}from"./use.86d0677f.js";import{e as G}from"./Content.444ec0ed.js";import{u as N}from"./Scrollbar.70ddaf14.js";import{_ as U}from"./RelayInfoView.15227627.js";import{_ as V}from"./Empty.1be5048e.js";const $={key:0,class:"py-20 flex items-center justify-center"},A={key:1,class:"h-40 flex justify-center items-center"},Y=S({__name:"PostList",props:{urls:null,pubkeys:null,filter:null,filters:null,pushEvent:null,active:{type:Boolean,default:!0},disabledLoad:{type:Boolean},disabledEmpty:{type:Boolean},limit:null,reverseSort:{type:Boolean},disabledReply:{type:Boolean}},emits:["update:pushEvent"],setup(i,{expose:L,emit:E}){const c=i;logger.for("home.vue").for("PostList.vue").info("\u8FDB\u5165PostList.vue");const{pubkeys:o,filter:r,filters:u,urls:f,active:p}=z(c);D(),logger.for("home.vue").for("PostList.vue").debug("defineProps > pubkey:",o);const y=l(()=>{const e=u!=null&&u.value?[...u.value]:[];return r!=null&&r.value&&e.push(r.value),o!=null&&o.value&&e.push(...o.value.map(t=>({kinds:[30023,1],authors:[t]}))),e}),k=l(()=>{var e;return[...(e=o==null?void 0:o.value)!=null?e:[],...y.value.map(t=>{var d;return(d=t.authors)!=null?d:[]}).flat(1)]}),a=l(()=>{const e={},t=G({filters:y.value,...e,addUrls:f==null?void 0:f.value,pubkeys:k.value,limit:c.limit});return c.reverseSort&&t.addStaffOfSortByCreateAt(),t}),x=N(a,p);I(()=>{var e;(e=a.value)==null||e.closeReq()});const n=l(()=>{var e;return(e=a.value)==null?void 0:e.getList()});E("update:pushEvent",e=>{var t;(t=a.value)==null||t.pushEvent(e)});const g=l(()=>{var e,t;return((e=a.value)==null?void 0:e.feat.loadBufferOpt.isLoading)||((t=a.value)==null?void 0:t.feat.refreshBufferOpt.isLoading)});L({postEvents:n,...x});const h=v(void 0);return F(h,{active:p!=null?p:v(!0)}),v(q()),(e,t)=>{const d=U,R=V;return m(),_("div",{ref_key:"divRef",ref:h},[!i.disabledLoad&&s(g)&&s(n)&&s(n).length===0?(m(),_("div",$,[b(d,{size:"medium"})])):!i.disabledEmpty&&!s(g)&&s(n)&&s(n).length===0?(m(),_("div",A,[b(R,{description:s(w)("empty_text"),size:"huge"},null,8,["description"])])):B("",!0),s(n)?(m(),j(C,{key:2,eventList:s(n),withPapawOptionsButtons:"",disabledReply:i.disabledReply,onEventDeletion:t[0]||(t[0]=O=>s(P)(O))},null,8,["eventList","disabledReply"])):B("",!0)],512)}}});export{Y as _};
