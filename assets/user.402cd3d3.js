import{a9 as U,a8 as h,a1 as c,a2 as v,U as o,a3 as L,a4 as E,aj as f,ak as n,Y as d,ae as i}from"./index.77ea77b9.js";import{c as S,e as u,a as g,f as R,g as B,d as y}from"./getCacheStaff.5c77dca0.js";function M(){return U({feat:{useMetadata(){const a=this.beltline.feat.getLatestEvent();return a?l(a):{}},onHasMetadata(a){this.beltline.feat.onHasLatestEvent((e,t)=>{a(l(e),t)})}}})}function l(a){let e={};try{const t=h(a.tags);e.relayUrls=[...t],a&&(e=JSON.parse(a.content))}catch{}return e}function m(a){return c(`getUserRelayUrlConfigByPubkey:${a}`,()=>{const e=o(d.createChild()).addFilter({kinds:[10002],authors:[a]}).addStaff(S()).addStaff(u(10002,a)).addStaff(R()).addStaff(B()).addStaff(g()).addExtends(d);return e.feat.withEvent()||e.createChild().addStaff(y(a)),e},{useLocalStorage:!1})}function b(a,e){const{urls:t}=e!=null?e:{};return c(`getUserMetadataLineByPubkey:${a}`,()=>{const s=v().createChild({slef:o({})}).addFilter({authors:[a],kinds:[0]}).addStaff(S()).addStaff(u(0,a)).addStaff(M()).addStaff(L()).addStaff(E()).addStaff(g()),r=async()=>{s.addRelayUrls(t),await i(1e3),s.addStaff(y(a)),await i(1e3),s.addReadUrl()};return s.feat.isHas()?f(`getUserMetadataLineByPubkey0${a}`,r,n.syncInterval4):f(`getUserMetadataLineByPubkey1${a}`,r,n.syncInterval),s},{useLocalStorage:!1})}export{m as a,M as c,b as g,l as p};
