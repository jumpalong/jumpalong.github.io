import{c as mt,ca as Zt,f as M,u as yt,h as fe,d7 as Xt,g as Qt,n as z,q as gt,j as ee,bh as ze,cc as en,e as me,d as Q,a as G,d8 as tn,L as K,m as nn,bt as sn,U as re,p as on,d9 as ln,bz as ne,by as ae,aA as pe,av as O,y as u,I as g,aV as S,C as c,z as C,G as I,D as J,F as D,H as k,cv as ce,A as $,J as se,da as wt,O as T,db as bt,bA as H,b2 as te,Q as an,S as Ee,dc as le,dd as rn,de as cn,aL as un,aK as dn,aQ as kt,aC as L,bD as U,df as fn,aU as W,ct as pn,ae as vn,aq as ge,a8 as xt,a9 as hn,af as _n,a2 as $t,a3 as mn,ax as St,a7 as yn,aw as gn,ag as zt,ah as Pe,at as Ce,aa as ve,dg as wn,ac as Oe,Y as Et,aj as Pt,dh as bn,_ as ie,di as kn,ad as xn,R as $n,dj as Sn,a0 as zn,ck as Fe,dk as En,dl as We,ar as ue,aM as Ct,c6 as Pn,b1 as Re,dm as Cn,an as qe,cs as On,M as Ot,cF as Rn,cG as Bn,b3 as Be,cr as Mn,dn as Ke,dp as Tn,dq as Dn,dr as An}from"./index.271bc2a1.js";import{g as Ln,p as In}from"./user.bbb45ba4.js";import{j as Me,k as Rt,c as Te,e as De,l as Ae,m as Hn,n as Vn,o as Nn,b as Un,p as Bt}from"./use.07d5e992.js";import{g as Le,e as Ye}from"./event.c21dbdbc.js";import{a as Mt,n as Tt,g as Je}from"./nostr.326d6965.js";import{u as jn,a as Fn,b as Wn}from"./Markdown.2d218bfd.js";import{_ as Dt,a as qn}from"./RelayAddButton.vue_vue_type_script_setup_true_lang.85e83019.js";import{M as Kn}from"./MavonEditor.417bd132.js";import{_ as At}from"./Tag.315ef46a.js";import{_ as Ie}from"./Space.d7782473.js";import{N as Z}from"./Icon.a8c61380.js";import{_ as Lt,a as Yn}from"./Drawer.vue_vue_type_script_setup_true_lang.0c30d004.js";import{_ as Jn}from"./RelayInfoView.95bfdda2.js";import{d as Gn,b as Zn,c as Xn,a as Qn}from"./createGarbageFilter.4a662728.js";import{a as e1}from"./autoAddRelayurlByEventIdStaff.5161a639.js";import{g as It,p as t1}from"./profile-2-400x400.8cda289c.js";import{c as n1,u as s1}from"./ContentBlacklistView.804b2a26.js";import{u as o1}from"./use-theme-vars.34541e45.js";import{a as l1}from"./AddButton.vue_vue_type_script_setup_true_lang.64cd1c40.js";import{S as a1}from"./Scrollbar.b9717515.js";import{u as r1}from"./naiveUi.67f4ceee.js";import{_ as i1}from"./Dropdown.95462754.js";import{E as c1}from"./Ellipsis.e06febeb.js";import{_ as u1}from"./Empty.f48bf955.js";import{_ as d1}from"./NaddrLink.vue_vue_type_script_setup_true_lang.708ac06c.js";import{_ as f1}from"./UserLink.vue_vue_type_script_setup_true_lang.afd8e0b2.js";const p1=mt("collapse-transition",{width:"100%"},[Zt()]),v1=Object.assign(Object.assign({},fe.props),{show:{type:Boolean,default:!0},appear:Boolean,collapsed:{type:Boolean,default:void 0}}),h1=M({name:"CollapseTransition",props:v1,inheritAttrs:!1,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n,mergedRtlRef:s}=yt(e),o=fe("CollapseTransition","-collapse-transition",p1,Xt,e,t),l=Qt("CollapseTransition",s,t),a=z(()=>e.collapsed!==void 0?e.collapsed:e.show),r=z(()=>{const{self:{bezier:p}}=o.value;return{"--n-bezier":p}}),i=n?gt("collapse-transition",void 0,r,e):void 0;return{rtlEnabled:l,mergedShow:a,mergedClsPrefix:t,cssVars:n?void 0:r,themeClass:i==null?void 0:i.themeClass,onRender:i==null?void 0:i.onRender}},render(){return ee(en,{appear:this.appear},{default:()=>{var e;if(!!this.mergedShow)return(e=this.onRender)===null||e===void 0||e.call(this),ee("div",ze({class:[`${this.mergedClsPrefix}-collapse-transition`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse-transition--rtl`,this.themeClass],style:this.cssVars},this.$attrs),this.$slots)}})}}),_1=mt("divider",`
 position: relative;
 display: flex;
 width: 100%;
 box-sizing: border-box;
 font-size: 16px;
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
`,[me("vertical",`
 margin-top: 24px;
 margin-bottom: 24px;
 `,[me("no-title",`
 display: flex;
 align-items: center;
 `)]),Q("title",`
 display: flex;
 align-items: center;
 margin-left: 12px;
 margin-right: 12px;
 white-space: nowrap;
 font-weight: var(--n-font-weight);
 `),G("title-position-left",[Q("line",[G("left",{width:"28px"})])]),G("title-position-right",[Q("line",[G("right",{width:"28px"})])]),G("dashed",[Q("line",`
 background-color: #0000;
 height: 0px;
 width: 100%;
 border-style: dashed;
 border-width: 1px 0 0;
 `)]),G("vertical",`
 display: inline-block;
 height: 1em;
 margin: 0 8px;
 vertical-align: middle;
 width: 1px;
 `),Q("line",`
 border: none;
 transition: background-color .3s var(--n-bezier), border-color .3s var(--n-bezier);
 height: 1px;
 width: 100%;
 margin: 0;
 `),me("dashed",[Q("line",{backgroundColor:"var(--n-color)"})]),G("dashed",[Q("line",{borderColor:"var(--n-color)"})]),G("vertical",{backgroundColor:"var(--n-color)"})]),m1=Object.assign(Object.assign({},fe.props),{titlePlacement:{type:String,default:"center"},dashed:Boolean,vertical:Boolean}),y1=M({name:"Divider",props:m1,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=yt(e),s=fe("Divider","-divider",_1,tn,e,t),o=z(()=>{const{common:{cubicBezierEaseInOut:a},self:{color:r,textColor:i,fontWeight:p}}=s.value;return{"--n-bezier":a,"--n-color":r,"--n-text-color":i,"--n-font-weight":p}}),l=n?gt("divider",void 0,o,e):void 0;return{mergedClsPrefix:t,cssVars:n?void 0:o,themeClass:l==null?void 0:l.themeClass,onRender:l==null?void 0:l.onRender}},render(){var e;const{$slots:t,titlePlacement:n,vertical:s,dashed:o,cssVars:l,mergedClsPrefix:a}=this;return(e=this.onRender)===null||e===void 0||e.call(this),ee("div",{role:"separator",class:[`${a}-divider`,this.themeClass,{[`${a}-divider--vertical`]:s,[`${a}-divider--no-title`]:!t.default,[`${a}-divider--dashed`]:o,[`${a}-divider--title-position-${n}`]:t.default&&n}],style:l},s?null:ee("div",{class:`${a}-divider__line ${a}-divider__line--left`}),!s&&t.default?ee(K,null,ee("div",{class:`${a}-divider__title`},this.$slots),ee("div",{class:`${a}-divider__line ${a}-divider__line--right`})):null)}}),Ge=Symbol();function g1(e=ln()){return nn(Ge,()=>{const t=new sn.exports.EventEmitter,o=re({emitRichTextEditBox:function(l,...a){t.emit(l,...a)},onRichTextEditBox:function(a,r){t.on(a,r)},id:e});return on(Ge,o),o},!0)}function ka(e,t,n){const s=ne();ae(e,"dragenter",l=>{l.stopPropagation(),l.preventDefault()}),ae(e,"dragover",l=>{l.stopPropagation(),l.preventDefault()}),ae(e,"dragleave",l=>{l.stopPropagation(),l.preventDefault()}),ae(e,"drop",l=>{var a;l.stopPropagation(),l.preventDefault(),l.dataTransfer&&o((a=l.dataTransfer)==null?void 0:a.files)});function o(l){if(l.length>1)return s.info("\u4E00\u6B21\u53EA\u5141\u8BB8\u4E0A\u4F20\u4E00\u4E2A\u6587\u4EF6");var a=l[0];t(a)}}function xa(e,t){function n(s){var o=s.clipboardData&&s.clipboardData.items,l=null;if(o&&o.length){for(var a=0;a<o.length;a++)if(o[a].type.indexOf("image")!==-1){l=o[a].getAsFile();break}}!l||t(l)}ae(e,"paste",n)}const w1={class:"flex flex-col"},b1={key:0},k1={key:1,style:{"word-break":"break-all","text-overflow":"ellipsis","word-wrap":"break-word"}},x1=M({__name:"Markdown",props:{identifier:null,pubkey:null,event:null},setup(e){var d;const t=e,n=pe(t,"event"),s=z(()=>{if(!!t.pubkey&&!!t.identifier)return{identifier:t.identifier,pubkey:t.pubkey,kind:30023}}),{longFormContentOptions:o}=jn(s),l=Fn(n),{showArticleDetails:a}=(d=Wn())!=null?d:{},r=O({bold:!1,italic:!1,header:!1,underline:!1,strikethrough:!1,mark:!1,superscript:!1,subscript:!1,quote:!1,ol:!1,ul:!1,link:!1,imagelink:!1,code:!1,table:!1,fullscreen:!0,readmodel:!0,htmlcode:!1,help:!1,undo:!1,redo:!1,trash:!1,save:!1,navigation:!1,alignleft:!1,aligncenter:!1,alignright:!1,subfield:!1,preview:!1}),i=z(()=>{var _;return(_=o.value)!=null?_:l.value});function p(_){bt.push({name:"tag",params:{value:_}})}return(_,h)=>{var x,b,w,E,y,R,B,P,A,V;const f=wt,v=At,m=Ie;return u(),g("div",w1,[S("div",null,[(x=c(i))!=null&&x.image?(u(),C(f,{key:0,class:"w-full rounded-md",imgProps:{style:{width:"100%"}},src:(b=c(i))==null?void 0:b.image},null,8,["src"])):I("",!0)]),S("div",null,[(w=c(i))!=null&&w.publishedAt?(u(),g("div",b1,[J(D(c(T)("published_at"))+": ",1),k(Dt,{secondTimestamp:(E=c(i))==null?void 0:E.publishedAt},null,8,["secondTimestamp"])])):I("",!0),(y=c(i))!=null&&y.title?(u(),g("h3",k1,D((R=c(i))==null?void 0:R.title),1)):I("",!0),S("p",null,D((V=(B=c(i))==null?void 0:B.summary)!=null?V:(A=(P=c(i))==null?void 0:P.content)==null?void 0:A.slice(0,100)),1)]),c(i)&&c(a)?(u(),g("div",{key:0,onClick:h[0]||(h[0]=ce(()=>{},["stop"]))},[k(m,null,{default:$(()=>[(u(!0),g(K,null,se(c(i).hashtags,X=>(u(),C(v,{type:"info",onClick:je=>p(X)},{default:$(()=>[J(D(X),1)]),_:2},1032,["onClick"]))),256))]),_:1}),k(Kn,{ref:"md",class:"h-full mt-4 md",style:{},autofocus:!1,editable:!1,subfield:!1,defaultOpen:"preview",toolbars:r.value,"model-value":c(i).content},null,8,["toolbars","model-value"])])):I("",!0)])}}}),$1={},S1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},z1=S("path",{d:"M885.9 490.3c3.6-12 5.4-24.4 5.4-37c0-28.3-9.3-55.5-26.1-77.7c3.6-12 5.4-24.4 5.4-37c0-28.3-9.3-55.5-26.1-77.7c3.6-12 5.4-24.4 5.4-37c0-51.6-30.7-98.1-78.3-118.4a66.1 66.1 0 0 0-26.5-5.4H273v428h.3l85.8 310.8C372.9 889 418.9 924 470.9 924c29.7 0 57.4-11.8 77.9-33.4c20.5-21.5 31-49.7 29.5-79.4l-6-122.9h239.9c12.1 0 23.9-3.2 34.3-9.3c40.4-23.5 65.5-66.1 65.5-111c0-28.3-9.3-55.5-26.1-77.7zM112 132v364c0 17.7 14.3 32 32 32h65V100h-65c-17.7 0-32 14.3-32 32z",fill:"currentColor"},null,-1),E1=[z1];function P1(e,t){return u(),g("svg",S1,E1)}const C1=H($1,[["render",P1]]),O1={},R1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},B1=S("path",{d:"M885.9 490.3c3.6-12 5.4-24.4 5.4-37c0-28.3-9.3-55.5-26.1-77.7c3.6-12 5.4-24.4 5.4-37c0-28.3-9.3-55.5-26.1-77.7c3.6-12 5.4-24.4 5.4-37c0-51.6-30.7-98.1-78.3-118.4a66.1 66.1 0 0 0-26.5-5.4H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h129.3l85.8 310.8C372.9 889 418.9 924 470.9 924c29.7 0 57.4-11.8 77.9-33.4c20.5-21.5 31-49.7 29.5-79.4l-6-122.9h239.9c12.1 0 23.9-3.2 34.3-9.3c40.4-23.5 65.5-66.1 65.5-111c0-28.3-9.3-55.5-26.1-77.7zM184 456V172h81v284h-81zm627.2 160.4H496.8l9.6 198.4c.6 11.9-4.7 23.1-14.6 30.5c-6.1 4.5-13.6 6.8-21.1 6.7a44.28 44.28 0 0 1-42.2-32.3L329 459.2V172h415.4a56.85 56.85 0 0 1 33.6 51.8c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4l21.9 19a56.76 56.76 0 0 1 19.6 43c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4l21.9 19a56.76 56.76 0 0 1 19.6 43c0 9.7-2.3 18.9-6.9 27.3l-14 25.5l21.9 19a56.76 56.76 0 0 1 19.6 43c0 19.1-11 37.5-28.8 48.4z",fill:"currentColor"},null,-1),M1=[B1];function T1(e,t){return u(),g("svg",R1,M1)}const D1=H(O1,[["render",T1]]),A1={},L1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},I1=S("path",{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7c0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 0 0-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 0 0 471 99.9c-52 0-98 35-111.8 85.1l-85.9 311h-.3v428h472.3c9.2 0 18.2-1.8 26.5-5.4c47.6-20.3 78.3-66.8 78.3-118.4c0-12.6-1.8-25-5.4-37c16.8-22.2 26.1-49.4 26.1-77.7c0-12.6-1.8-25-5.4-37c16.8-22.2 26.1-49.4 26.1-77.7c-.2-12.6-2-25.1-5.6-37.1zM112 528v364c0 17.7 14.3 32 32 32h65V496h-65c-17.7 0-32 14.3-32 32z",fill:"currentColor"},null,-1),H1=[I1];function V1(e,t){return u(),g("svg",L1,H1)}const N1=H(A1,[["render",V1]]),U1={},j1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},F1=S("path",{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7c0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 0 0-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 0 0 471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4c47.6-20.3 78.3-66.8 78.3-118.4c0-12.6-1.8-25-5.4-37c16.8-22.2 26.1-49.4 26.1-77.7c0-12.6-1.8-25-5.4-37c16.8-22.2 26.1-49.4 26.1-77.7c-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19l13.9 25.4a56.2 56.2 0 0 1 6.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19l13.9 25.4a56.2 56.2 0 0 1 6.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19l13.9 25.4a56.2 56.2 0 0 1 6.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0 1 42.2-32.3c7.6 0 15.1 2.2 21.1 6.7c9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z",fill:"currentColor"},null,-1),W1=[F1];function q1(e,t){return u(),g("svg",j1,W1)}const K1=H(U1,[["render",q1]]),Y1={key:0},J1={key:1},we=M({__name:"PapawReactionItem",props:{reaction:null,events:null,active:{type:Boolean},size:null},emits:["handelSwitchActive"],setup(e){return(t,n)=>{const s=Z,o=At;return u(),C(o,{round:"",checked:e.active,onUpdateChecked:n[0]||(n[0]=()=>t.$emit("handelSwitchActive",e.reaction)),checkable:""},{icon:$(()=>[e.reaction==="+"||e.reaction==="-"?(u(),C(s,{key:0,size:e.size,color:e.active?"#fffff":void 0},{default:$(()=>[e.reaction==="+"?(u(),g("div",Y1,[e.active?(u(),C(N1,{key:0})):(u(),C(K1,{key:1}))])):e.reaction==="-"?(u(),g("div",J1,[e.active?(u(),C(C1,{key:0})):(u(),C(D1,{key:1}))])):I("",!0)]),_:1},8,["size","color"])):(u(),g("span",{key:1,style:te({fontSize:`${e.size*.9}px`})},D(e.reaction),5))]),default:$(()=>[S("span",null,D(e.active?e.events.length+1:e.events.length),1)]),_:1},8,["checked"])}}}),be=O(null);function $a(){const e=an(),t=z(()=>e.params.value),n=z(()=>Mt(t.value)),s=z(()=>{var o;return(o=n.value)==null?void 0:o.id});return z(()=>{var l,a;if(!s.value)return null;if(((l=be.value)==null?void 0:l.id)===s.value)return be.value;const o=Le(s.value,{urls:new Set((a=n.value)==null?void 0:a.relays)});return o==null?void 0:o.feat.useEvent()})}function he(){const e=Ee();return t=>{if(typeof t=="string"){e.push({name:"short-text-note",params:{value:t}});return}const n=le(t.id);be.value=t,e.push({name:"short-text-note",params:{value:Tt(t,n)}})}}var Ze;const Ht=typeof window<"u",G1=e=>typeof e=="string",q=()=>{},ke=Ht&&((Ze=window==null?void 0:window.navigator)==null?void 0:Ze.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function F(e){return typeof e=="function"?e():c(e)}function Vt(e,t){function n(...s){return new Promise((o,l)=>{Promise.resolve(e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})).then(o).catch(l)})}return n}function Z1(e,t={}){let n,s,o=q;const l=r=>{clearTimeout(r),o(),o=q};return r=>{const i=F(e),p=F(t.maxWait);return n&&l(n),i<=0||p!==void 0&&p<=0?(s&&(l(s),s=null),Promise.resolve(r())):new Promise((d,_)=>{o=t.rejectOnCancel?_:d,p&&!s&&(s=setTimeout(()=>{n&&l(n),s=null,d(r())},p)),n=setTimeout(()=>{s&&l(s),s=null,d(r())},i)})}}function X1(e,t=!0,n=!0,s=!1){let o=0,l,a=!0,r=q,i;const p=()=>{l&&(clearTimeout(l),l=void 0,r(),r=q)};return _=>{const h=F(e),f=Date.now()-o,v=()=>i=_();return p(),h<=0?(o=Date.now(),v()):(f>h&&(n||!a)?(o=Date.now(),v()):t&&(i=new Promise((m,x)=>{r=s?x:m,l=setTimeout(()=>{o=Date.now(),a=!0,m(v()),p()},Math.max(0,h-f))})),!n&&!l&&(l=setTimeout(()=>a=!0,h)),a=!1,i)}}const Y={mounted:"mounted",updated:"updated",unmounted:"unmounted"};function _e(e){return rn()?(cn(e),!0):!1}function Q1(e,t=200,n={}){return Vt(Z1(t,n),e)}function es(e,t=200,n=!1,s=!0,o=!1){return Vt(X1(t,n,s,o),e)}function ts(e){return typeof e=="function"?z(e):O(e)}function ns(e,t=!0){un()?dn(e):t?e():kt(e)}function N(e){var t;const n=F(e);return(t=n==null?void 0:n.$el)!=null?t:n}const oe=Ht?window:void 0;function j(...e){let t,n,s,o;if(G1(e[0])||Array.isArray(e[0])?([n,s,o]=e,t=oe):[t,n,s,o]=e,!t)return q;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const l=[],a=()=>{l.forEach(d=>d()),l.length=0},r=(d,_,h,f)=>(d.addEventListener(_,h,f),()=>d.removeEventListener(_,h,f)),i=L(()=>[N(t),F(o)],([d,_])=>{a(),d&&l.push(...n.flatMap(h=>s.map(f=>r(d,h,f,_))))},{immediate:!0,flush:"post"}),p=()=>{i(),a()};return _e(p),p}let Xe=!1;function Qe(e,t,n={}){const{window:s=oe,ignore:o=[],capture:l=!0,detectIframe:a=!1}=n;if(!s)return;ke&&!Xe&&(Xe=!0,Array.from(s.document.body.children).forEach(h=>h.addEventListener("click",q)));let r=!0;const i=h=>o.some(f=>{if(typeof f=="string")return Array.from(s.document.querySelectorAll(f)).some(v=>v===h.target||h.composedPath().includes(v));{const v=N(f);return v&&(h.target===v||h.composedPath().includes(v))}}),d=[j(s,"click",h=>{const f=N(e);if(!(!f||f===h.target||h.composedPath().includes(f))){if(h.detail===0&&(r=!i(h)),!r){r=!0;return}t(h)}},{passive:!0,capture:l}),j(s,"pointerdown",h=>{const f=N(e);f&&(r=!h.composedPath().includes(f)&&!i(h))},{passive:!0}),a&&j(s,"blur",h=>{var f;const v=N(e);((f=s.document.activeElement)==null?void 0:f.tagName)==="IFRAME"&&!(v!=null&&v.contains(s.document.activeElement))&&t(h)})].filter(Boolean);return()=>d.forEach(h=>h())}Y.mounted+"",Y.unmounted+"";const ss=e=>typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0;function et(...e){let t,n,s={};e.length===3?(t=e[0],n=e[1],s=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],s=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:o=oe,eventName:l="keydown",passive:a=!1}=s,r=ss(t);return j(o,l,p=>{r(p)&&n(p)},a)}var os=Object.defineProperty,tt=Object.getOwnPropertySymbols,ls=Object.prototype.hasOwnProperty,as=Object.prototype.propertyIsEnumerable,nt=(e,t,n)=>t in e?os(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rs=(e,t)=>{for(var n in t||(t={}))ls.call(t,n)&&nt(e,n,t[n]);if(tt)for(var n of tt(t))as.call(t,n)&&nt(e,n,t[n]);return e};Y.mounted+"";const is=500;function st(e,t,n){var s,o;const l=z(()=>N(e));let a;function r(){a&&(clearTimeout(a),a=void 0)}function i(d){var _,h,f,v;((_=n==null?void 0:n.modifiers)==null?void 0:_.self)&&d.target!==l.value||(r(),(h=n==null?void 0:n.modifiers)!=null&&h.prevent&&d.preventDefault(),(f=n==null?void 0:n.modifiers)!=null&&f.stop&&d.stopPropagation(),a=setTimeout(()=>t(d),(v=n==null?void 0:n.delay)!=null?v:is))}const p={capture:(s=n==null?void 0:n.modifiers)==null?void 0:s.capture,once:(o=n==null?void 0:n.modifiers)==null?void 0:o.once};j(l,"pointerdown",i,p),j(l,"pointerup",r,p),j(l,"pointerleave",r,p)}const cs={[Y.mounted](e,t){typeof t.value=="function"?st(e,t.value,{modifiers:t.modifiers}):st(e,...t.value)}},xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$e="__vueuse_ssr_handlers__";xe[$e]=xe[$e]||{};xe[$e];function Nt(e,t=!1){const n=O(),s=()=>n.value=Boolean(e());return s(),ns(s,t),n}function us(e,t={}){const n=t?t.delayEnter:0,s=t?t.delayLeave:0,o=O(!1);let l;const a=r=>{const i=r?n:s;l&&(clearTimeout(l),l=void 0),i?l=setTimeout(()=>o.value=r,i):o.value=r};return window&&(j(e,"mouseenter",()=>a(!0),{passive:!0}),j(e,"mouseleave",()=>a(!1),{passive:!0})),o}Y.mounted+"";var ot=Object.getOwnPropertySymbols,ds=Object.prototype.hasOwnProperty,fs=Object.prototype.propertyIsEnumerable,ps=(e,t)=>{var n={};for(var s in e)ds.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&ot)for(var s of ot(e))t.indexOf(s)<0&&fs.call(e,s)&&(n[s]=e[s]);return n};function vs(e,t,n={}){const s=n,{window:o=oe}=s,l=ps(s,["window"]);let a;const r=Nt(()=>o&&"ResizeObserver"in o),i=()=>{a&&(a.disconnect(),a=void 0)},p=L(()=>N(e),_=>{i(),r.value&&o&&_&&(a=new ResizeObserver(t),a.observe(_,l))},{immediate:!0,flush:"post"}),d=()=>{i(),p()};return _e(d),{isSupported:r,stop:d}}function hs(e,t={width:0,height:0},n={}){const{window:s=oe,box:o="content-box"}=n,l=z(()=>{var i,p;return(p=(i=N(e))==null?void 0:i.namespaceURI)==null?void 0:p.includes("svg")}),a=O(t.width),r=O(t.height);return vs(e,([i])=>{const p=o==="border-box"?i.borderBoxSize:o==="content-box"?i.contentBoxSize:i.devicePixelContentBoxSize;if(s&&l.value){const d=N(e);if(d){const _=s.getComputedStyle(d);a.value=parseFloat(_.width),r.value=parseFloat(_.height)}}else if(p){const d=Array.isArray(p)?p:[p];a.value=d.reduce((_,{inlineSize:h})=>_+h,0),r.value=d.reduce((_,{blockSize:h})=>_+h,0)}else a.value=i.contentRect.width,r.value=i.contentRect.height},n),L(()=>N(e),i=>{a.value=i?t.width:0,r.value=i?t.height:0}),{width:a,height:r}}Y.mounted+"";function lt(e,{window:t=oe,scrollTarget:n}={}){const s=O(!1),o=()=>{if(!t)return;const l=t.document,a=N(e);if(!a)s.value=!1;else{const r=a.getBoundingClientRect();s.value=r.top<=(t.innerHeight||l.documentElement.clientHeight)&&r.left<=(t.innerWidth||l.documentElement.clientWidth)&&r.bottom>=0&&r.right>=0}};return L(()=>N(e),()=>o(),{immediate:!0,flush:"post"}),t&&j(n||t,"scroll",o,{capture:!1,passive:!0}),s}Y.mounted+"";const at=1;function Se(e,t={}){const{throttle:n=0,idle:s=200,onStop:o=q,onScroll:l=q,offset:a={left:0,right:0,top:0,bottom:0},eventListenerOptions:r={capture:!1,passive:!0},behavior:i="auto"}=t,p=O(0),d=O(0),_=z({get(){return p.value},set(y){f(y,void 0)}}),h=z({get(){return d.value},set(y){f(void 0,y)}});function f(y,R){var B,P,A;const V=F(e);!V||(A=V instanceof Document?document.body:V)==null||A.scrollTo({top:(B=F(R))!=null?B:h.value,left:(P=F(y))!=null?P:_.value,behavior:F(i)})}const v=O(!1),m=re({left:!0,right:!1,top:!0,bottom:!1}),x=re({left:!1,right:!1,top:!1,bottom:!1}),b=y=>{!v.value||(v.value=!1,x.left=!1,x.right=!1,x.top=!1,x.bottom=!1,o(y))},w=Q1(b,n+s),E=y=>{const R=y.target===document?y.target.documentElement:y.target,B=R.scrollLeft;x.left=B<p.value,x.right=B>d.value,m.left=B<=0+(a.left||0),m.right=B+R.clientWidth>=R.scrollWidth-(a.right||0)-at,p.value=B;let P=R.scrollTop;y.target===document&&!P&&(P=document.body.scrollTop),x.top=P<d.value,x.bottom=P>d.value,m.top=P<=0+(a.top||0),m.bottom=P+R.clientHeight>=R.scrollHeight-(a.bottom||0)-at,d.value=P,v.value=!0,w(y),l(y)};return j(e,"scroll",n?es(E,n,!0,!1):E,r),j(e,"scrollend",b,r),{x:_,y:h,isScrolling:v,arrivedState:m,directions:x}}var _s=Object.defineProperty,ms=Object.defineProperties,ys=Object.getOwnPropertyDescriptors,rt=Object.getOwnPropertySymbols,gs=Object.prototype.hasOwnProperty,ws=Object.prototype.propertyIsEnumerable,it=(e,t,n)=>t in e?_s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ct=(e,t)=>{for(var n in t||(t={}))gs.call(t,n)&&it(e,n,t[n]);if(rt)for(var n of rt(t))ws.call(t,n)&&it(e,n,t[n]);return e},bs=(e,t)=>ms(e,ys(t));function ut(e,t,n={}){var s,o;const l=(s=n.direction)!=null?s:"bottom",a=re(Se(e,bs(ct({},n),{offset:ct({[l]:(o=n.distance)!=null?o:0},n.offset)})));L(()=>a.arrivedState[l],async r=>{var i,p;if(r){const d=F(e),_={height:(i=d==null?void 0:d.scrollHeight)!=null?i:0,width:(p=d==null?void 0:d.scrollWidth)!=null?p:0};await t(a),n.preserveScrollPosition&&d&&kt(()=>{d.scrollTo({top:d.scrollHeight-_.height,left:d.scrollWidth-_.width})})}})}Y.mounted+"";function dt(e,t,n={}){const{root:s,rootMargin:o="0px",threshold:l=.1,window:a=oe}=n,r=Nt(()=>a&&"IntersectionObserver"in a);let i=q;const p=r.value?L(()=>({el:N(e),root:N(s)}),({el:_,root:h})=>{if(i(),!_)return;const f=new IntersectionObserver(t,{root:h,rootMargin:o,threshold:l});f.observe(_),i=()=>{f.disconnect(),i=q}},{immediate:!0,flush:"post"}):q,d=()=>{i(),p()};return _e(d),{isSupported:r,stop:d}}Y.mounted+"";var ks=Object.defineProperty,xs=Object.defineProperties,$s=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,Ss=Object.prototype.hasOwnProperty,zs=Object.prototype.propertyIsEnumerable,pt=(e,t,n)=>t in e?ks(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Es=(e,t)=>{for(var n in t||(t={}))Ss.call(t,n)&&pt(e,n,t[n]);if(ft)for(var n of ft(t))zs.call(t,n)&&pt(e,n,t[n]);return e},Ps=(e,t)=>xs(e,$s(t));Y.mounted+"";function Ut(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientHeight<e.scrollHeight||t.overflowY==="auto"&&e.clientWidth<e.scrollWidth)return!0;{const n=e.parentNode;return!n||n.tagName==="BODY"?!1:Ut(n)}}function Cs(e){const t=e||window.event,n=t.target;return Ut(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}function Os(e,t=!1){const n=O(t);let s=null,o;L(ts(e),r=>{if(r){const i=r;o=i.style.overflow,n.value&&(i.style.overflow="hidden")}},{immediate:!0});const l=()=>{const r=F(e);!r||n.value||(ke&&(s=j(r,"touchmove",i=>{Cs(i)},{passive:!1})),r.style.overflow="hidden",n.value=!0)},a=()=>{const r=F(e);!r||!n.value||(ke&&(s==null||s()),r.style.overflow=o,n.value=!1)};return _e(a),z({get(){return n.value},set(r){r?l():a()}})}const Rs=()=>{let e=!1;const t=O(!1);return(n,s)=>{if(t.value=s.value,e)return;e=!0;const o=Os(n,s.value);L(t,l=>o.value=l)}};Rs();const Bs=M({__name:"LazyItem",props:{show:{type:[null,Boolean],default:null},minHeight:{default:0},transitionDuration:{default:500},disabled:{type:Boolean},delay:{default:500}},emits:["update:show"],setup(e,{emit:t}){const n=e,{transitionDuration:s,delay:o,disabled:l}=U(n),a=O(),r=O(),i=n.show===void 0||n.show===null?Me(o.value,{target:a})[1]:pe(n,"show"),{transitionActive:p,safeActive:d,duration:_,show:h,hidden:f,transitioning:v}=Rt(s);L(i,b=>{b?h():f(),t("update:show",b)});const{height:m}=fn(r),x=O(0);return L(m,b=>{if(b){x.value=b;return}else return}),(b,w)=>{const E=Jn;return u(),g("div",{ref_key:"wrap",ref:a,class:"overflow-hidden relative",style:te({minHeight:c(d)?"0px":typeof e.minHeight=="number"?`${e.minHeight}px`:e.minHeight,height:c(p)?`${x.value}px`:"0px",transition:`height ${c(_)}ms ease-out`})},[e.minHeight>100&&(!c(d)||c(v))?(u(),g("div",{key:0,class:"absolute left-0 right-0 top-0 bottom-0 flex items-center justify-center",style:te({opacity:c(p)?0:1,transition:`opacity ${c(_)}ms ease-out`})},[k(E,{size:"medium"})],4)):I("",!0),c(d)?(u(),g("div",{key:1,ref_key:"target",ref:r,style:te({opacity:c(p)?1:0,transition:`opacity ${c(_)}ms ease-in`})},[W(b.$slots,"default")],4)):I("",!0)],4)}}}),Ms=M({__name:"LazyItemDisabled",props:{show:{type:[null,Boolean],default:null},minHeight:{default:0},transitionDuration:{default:500},disabled:{type:Boolean},delay:{default:500}},setup(e){const t=e;return(n,s)=>e.disabled?W(n.$slots,"default",{key:0}):(u(),C(Bs,pn(ze({key:1},t)),{default:$(()=>[W(n.$slots,"default")]),_:3},16))}}),[Sa,Ts]=Te(e=>e),[za,Ds]=Te(e=>{const t=z(()=>{var n,s;return new Set(((s=(n=e.value)==null?void 0:n.tags.filter(o=>o[0]==="e"&&o[1]&&(!o[3]||o[3]==="reply")))!=null?s:[]).map(o=>o[1]))});return{focusEvent:e,parents:t}}),As={},Ls={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Is=S("path",{d:"M11.61 29.92a1 1 0 0 1-.6-1.07L12.83 17H8a1 1 0 0 1-1-1.23l3-13A1 1 0 0 1 11 2h10a1 1 0 0 1 .78.37a1 1 0 0 1 .2.85L20.25 11H25a1 1 0 0 1 .9.56a1 1 0 0 1-.11 1l-13 17A1 1 0 0 1 12 30a1.09 1.09 0 0 1-.39-.08zM17.75 13l2-9H11.8L9.26 15h5.91l-1.59 10.28L23 13z",fill:"currentColor"},null,-1),Hs=[Is];function Vs(e,t){return u(),g("svg",Ls,Hs)}const Ns=H(As,[["render",Vs]]);function vt(e){const{filters:t=[],include:n=new Set(["ids","#e","authors","#p"])}=e!=null?e:{};let s=!1;return vn({async initialization(){const o=[...this.beltline.getFilters(),...t],l=Je(["authors","#p"].filter(r=>n.has(r)),o);for(const r of l){if(await ge(1e3),s)return;this.beltline.addStaff(xt(r))}const a=Je(["ids","#e"].filter(r=>n.has(r)),o);for(const r of a){if(await ge(1e3),s)return;this.beltline.addStaff(e1(r))}},feat:{stopAutoAddRelayUrlByFilter(){s=!0}}})}const Us=It(),js=hn()(()=>({push(e){if(Us.getData().publicList.has(e.pubkey))return _n.BREAK}}));function jt(e){return $t(`createShortTextEventBeltline:${JSON.stringify(e.filters)}`,()=>{var o;const t=(o=e.limit)!=null?o:10,n=e.filters,s=mn(St(e,{describe:"\u83B7\u53D6\u77ED\u6D88\u606F\u5217\u8868"})).addStaff(yn()).addStaff(js()).addStaff(n1()).addStaff(Gn()).addStaff(Zn()).addStaff(Xn(n,t)).addStaff(Qn()).addStaffOfReverseSortByCreateAt();if(s.addReadUrl().addRelayUrls(e.urls).addRelayUrls(e.addUrls),e.urls||s.addStaff(vt({filters:n})),e.pubkeys)for(const l of e.pubkeys)s.addStaff(xt(l,{urls:e.urls}));else s.addStaff(vt({filters:n}));return s.feat.firstLoad(),s},{useLocalStorage:!1})}const de=re(gn("reactions",["+","-"]).value),ht=new Set(de),He={...zt,duration:1e3*60*60*24};async function Fs(e,t,n){ht.has(e)||(ht.add(e),de.push(e));let s=t.tags.filter(r=>r.length>=2&&(r[0]=="e"||r[0]=="p"||r[0]=="r"));s.push(["e",t.id]),s.push(["p",t.pubkey]);const o=new Set(Ce.getWriteList()),l=ve.kind10002.get(t.pubkey);if(l){const{writeUrl:r}=wn(l.tags);Oe(o,r)}const a=await Et.publish({content:e,kind:7,tags:s},o,n);!a||Pt(Ve(e,t.id),a.id,He)}function Ws(e,t){if(t.eventId){const n=Ve(e,t.eventId),s=Pe(n,He);s&&Ye(s,t),bn(n)}else t.likeId&&Ye(t.likeId,t)}function qs(e,t){const n=Ve(e,t);return Pe(n,He)!==null}function Ve(e,t){return`${e}:${t}`}function Ks(e){const t=e.event,n=le(t.id);return jt(St(e,{filters:[{"#e":[e.event.id],kinds:[7]}],addUrls:new Set(n),limit:30})).addStaff({initialization(){this.beltline.feat.reactionMap={}},push(o){var a;const l=this.beltline.feat.reactionMap;((a=l[o.content])!=null?a:l[o.content]=[]).push(o)},feat:{getReactionMap(){return this.beltline.feat.reactionMap}}})}const Ys={},Js={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 496 512"},Gs=S("path",{d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200s-89.7 200-200 200zm84-143.4c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.6-11.5-33.8-3.1c-10.2 8.5-11.5 23.6-3.1 33.8c30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8c-10.2-8.4-25.3-7.1-33.8 3.1zM136.5 211c7.7-13.7 19.2-21.6 31.5-21.6s23.8 7.9 31.5 21.6l9.5 17c2.1 3.7 6.2 4.7 9.3 3.7c3.6-1.1 6-4.5 5.7-8.3c-3.3-42.1-32.2-71.4-56-71.4s-52.7 29.3-56 71.4c-.3 3.7 2.1 7.2 5.7 8.3c3.4 1.1 7.4-.5 9.3-3.7l9.5-17zM328 152c-23.8 0-52.7 29.3-56 71.4c-.3 3.7 2.1 7.2 5.7 8.3c3.5 1.1 7.4-.5 9.3-3.7l9.5-17c7.7-13.7 19.2-21.6 31.5-21.6s23.8 7.9 31.5 21.6l9.5 17c2.1 3.7 6.2 4.7 9.3 3.7c3.6-1.1 6-4.5 5.7-8.3c-3.3-42.1-32.2-71.4-56-71.4z",fill:"currentColor"},null,-1),Zs=[Gs];function Xs(e,t){return u(),g("svg",Js,Zs)}const Qs=H(Ys,[["render",Xs]]),eo=M({__name:"PapawReaction",props:{event:null,size:null},setup(e){const n=pe(e,"event"),s=De(),o=20,[l,a]=Ae(()=>Ks({event:n.value,limit:o})),r=z(()=>{var v,m;return(m=(v=l.value)==null?void 0:v.feat.getReactionMap())!=null?m:{}}),i=O({});de.forEach(v=>{i.value[v]=qs(v,n.value.id)});function p(v){i.value[v]?Ws(v,{eventId:n.value.id,onOK:s}):Fs(v,n.value,{onOK:s}),i.value[v]=!i.value[v]}const d=O(!1),_=z(()=>Object.entries(r.value)),h=z(()=>Object.entries(i.value).filter(([v,m])=>m&&!r.value[v]).map(([v,m])=>[v,[]])),f=z(()=>[..._.value,...h.value].sort((v,m)=>v[1].length-m[1].length).slice(0,3));return(v,m)=>{const x=Z,b=ie,w=Ie;return u(),g("div",{ref_key:"target",ref:a},[k(w,{class:"flex items-center justify-center"},{default:$(()=>[(u(!0),g(K,null,se(c(f),([E,y])=>(u(),C(we,{onHandelSwitchActive:p,size:e.size,events:y,reaction:E,active:i.value[E]},null,8,["size","events","reaction","active"]))),256)),k(b,{circle:"",quaternary:"",onClick:m[0]||(m[0]=()=>d.value=!d.value)},{default:$(()=>[k(x,{size:e.size},{default:$(()=>[k(Qs)]),_:1},8,["size"])]),_:1}),k(Lt,{show:d.value,"onUpdate:show":m[1]||(m[1]=E=>d.value=E)},{default:$(()=>[k(w,{class:"h-full w-full flex items-center flex-wrap"},{default:$(()=>[(u(!0),g(K,null,se(c(de),E=>{var y;return u(),C(we,{onHandelSwitchActive:p,size:e.size,events:(y=c(r)[E])!=null?y:[],reaction:E,active:i.value[E]},null,8,["size","events","reaction","active"])}),256))]),_:1})]),_:1},8,["show"])]),_:1})],512)}}}),to={},no={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},so=S("path",{d:"M464 512a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm200 0a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm-400 0a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 0 0-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 0 0-142 96.5c-40.9 41.3-73 89.3-95.2 142.8c-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 0 0 112 714v152a46 46 0 0 0 46 46h152.1A449.4 449.4 0 0 0 510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 0 0 142.8-95.2c41.3-40.9 73.8-88.7 96.5-142c23.6-55.2 35.6-113.9 35.9-174.5c.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8c69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9c44.6 18.7 84.6 45.6 119 80c34.3 34.3 61.3 74.4 80 119c19.4 46.2 29.1 95.2 28.9 145.8c-.6 99.6-39.7 192.9-110.1 262.7z",fill:"currentColor"},null,-1),oo=[so];function lo(e,t){return u(),g("svg",no,oo)}const ao=H(to,[["render",lo]]),ro={class:"ml-2"},io={key:0},co=M({__name:"PapawReplyButton",props:{event:null,size:null},setup(e){const t=e,{event:n}=U(t),s=he();function o(){s(n.value)}const l=20,a=z(()=>le(n.value.id)),[r,i]=Ae(()=>jt({filters:[{"#e":[n.value.id],kinds:[1,30023]}],addUrls:new Set(a.value),limit:l})),p=z(()=>{var d,_;return(_=(d=r.value)==null?void 0:d.getList().length)!=null?_:0});return(d,_)=>{const h=Z,f=ie;return u(),g("div",{ref_key:"target",ref:i},[k(f,{text:"",onClick:o},{default:$(()=>[k(h,{size:e.size},{default:$(()=>[k(ao)]),_:1},8,["size"]),S("span",ro,[J(D(c(p))+" ",1),c(p)>=l?(u(),g("span",io,"+")):I("",!0)])]),_:1})],512)}}}),uo={class:"flex items-center justify-between"},fo=M({__name:"PapawOptionsButtons",props:{event:null,deleteEvent:null},setup(e){const t=e,{event:n,deleteEvent:s}=U(t),o=ne();De(),o1();const l=O(18);return(a,r)=>{const i=Z,p=ie,d=Ie;return u(),g("div",uo,[k(d,{class:"flex justify-around py-4 box-border"},{default:$(()=>[k(co,{size:l.value,event:c(n)},null,8,["size","event"]),k(p,{text:"",onClick:r[0]||(r[0]=()=>c(o).error(c(T)("message.not_implemented")))},{default:$(()=>[k(i,{size:l.value},{default:$(()=>[k(Ns)]),_:1},8,["size"])]),_:1})]),_:1}),k(eo,{size:l.value,event:c(n)},null,8,["size","event"])])}}}),Ft="__color_map",Wt={...zt};var _t;const ye=(_t=Pe(Ft,Wt))!=null?_t:{};function po(e){const t=ye[e];if(t)return t;const n=kn();return ye[e]=n,Pt(Ft,ye,Wt),n}function qt(e){var n;const t=e.tags.filter(s=>(s[0]==="e"||s[0]==="p")&&s[2]).map(s=>s[2]);return Oe(xn(e.tags),(n=le(e.id))!=null?n:[],t)}const vo=M({__name:"PapawSourceUrl",props:{event:null},setup(e){const n=pe(e,"event"),s=z(()=>le(n.value.id)),o=O(!1),l=Ee();function a(){l.push({name:"relays"})}return(r,i)=>{const p=ie,d=h1;return u(),g(K,null,[S("div",{class:"flex",onClick:i[0]||(i[0]=()=>o.value=!o.value)},[(u(!0),g(K,null,se(c(s),_=>(u(),g("div",{class:"h-2 w-2 rounded-full mr-1",style:te({backgroundColor:c(po)(_)})},null,4))),256))]),k(Lt,{show:o.value,"onUpdate:show":i[1]||(i[1]=_=>o.value=_),height:"100%",closable:""},{header:$(()=>[k(d,{show:c(Ce).hasChange()},{default:$(()=>[k(p,{onClick:a,type:"primary"},{default:$(()=>[J(D(c(T)("save")),1)]),_:1})]),_:1},8,["show"])]),default:$(()=>[k(a1,null,{default:$(()=>{var _;return[k(l1,{urls:(_=c(s))!=null?_:[],title:""},{right:$(({url:h})=>[k(qn,{url:h},null,8,["url"])]),_:1},8,["urls"])]}),_:1})]),_:1},8,["show"])],64)}}}),ho={},_o={class:"pl-1 box-border",style:{borderLeft:"2px solid red"}};function mo(e,t){return u(),g("div",_o,[W(e.$slots,"default")])}const Kt=H(ho,[["render",mo]]);class yo extends $n{constructor(){super("PinListSync",{tagMap:new Map})}async getFilters(){const t=await Sn();return t?[{authors:[t],kinds:[10001]}]:[]}async serializeToData(t){const n=new Map;for(const s of t.tags)n.set(JSON.stringify(s),s);return{tagMap:n}}async deserializeToEvent(t,n){return await zn({tags:[...t.tagMap.values()],created_at:n,kind:10001})}createPinTag(t){const n=t.kind;if(n===0)return["p",t.pubkey];if(n===1)return["e",t.id];if(n>=3e4&&n<=39999){const s=Fe("a",t.tags);if(s)return s;const o=Fe("d",t.tags);return o&&o[1]?["a",`${t.kind}:${t.pubkey}:${o[1]}`]:null}else return["e",t.id]}has(t){return this.getData().tagMap.has(JSON.stringify(t))}hasByEvent(t){const n=this.createPinTag(t);return n?this.getData().tagMap.has(JSON.stringify(n)):!1}addPin(t){this.getData().tagMap.set(JSON.stringify(t),t)}removePin(t){this.getData().tagMap.delete(JSON.stringify(t))}async pin(t,n){const s=this.createPinTag(t);!s||this.has(s)||(this.addPin(s),this.toChanged(),await this.save(n))}async unpin(t,n){const s=this.createPinTag(t);!s||!this.has(s)||(this.removePin(s),this.toChanged(),await this.save(n))}}function go(){return $t("getPinListSync",()=>{const e=new yo;return setTimeout(()=>{e.sync()},0),e},{useLocalStorage:!1})}function Ne(){const{error:e,success:t,info:n}=ne();return function(o){Et.publish(o,Ce.getWriteList(),{onOK({url:l,ok:a}){a?t(`\u5DF2\u6210\u529F\u63A8\u9001\u5230${l}`):e(`\u63A8\u9001\u5230'${l}'\u5931\u8D25`)}}),n("\u5DF2\u7ECF\u53D1\u9001\u63A8\u8350\u7528\u6237\u8BF7\u6C42")}}function wo(){const{error:e,success:t,info:n}=ne(),s=Ne();return function(l){const a=ve.kind10002.get(l);a?s(a):e("\u76EE\u524D\u8FD8\u6CA1\u6709\u6B64\u7528\u6237\u7684\u4FE1\u606F")}}function bo(){const{error:e,success:t,info:n}=ne(),s=Ne();return function(l){const a=ve.kind0.get(l);a?s(a):e("\u76EE\u524D\u8FD8\u6CA1\u6709\u6B64\u7528\u6237\u7684\u5143\u6570\u636E")}}const ko=S("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},[S("g",{fill:"none"},[S("path",{d:"M6.75 10a1.75 1.75 0 1 1-3.5 0a1.75 1.75 0 0 1 3.5 0zm5 0a1.75 1.75 0 1 1-3.5 0a1.75 1.75 0 0 1 3.5 0zM15 11.75a1.75 1.75 0 1 0 0-3.5a1.75 1.75 0 0 0 0 3.5z",fill:"currentColor"})])],-1),xo=M({__name:"MoreIcon",setup(e){return(t,n)=>(u(),C(c(Z),null,{default:$(()=>[ko]),_:1}))}}),[Ea,$o]=Te(()=>{const e=O([]);return{insertDropdownOptionOptList:e,insertDropdownOption(t){e.value.push(t)},runInsertDropdown(t,n){for(const s of e.value){n[s.key]=s.handle;const o=t.findIndex(a=>a.key===s.insertKey),l={label:s.label,key:s.key};o>=0?t.splice(o,0,l):t.push(l)}}}}),So=M({__name:"SMSButton",props:{event:null,deleteEvent:null,show:{type:Boolean}},setup(e){const t=e,n=ne(),s=g1(),{event:o,deleteEvent:l}=U(t),a=O(""),{info:r}=ne(),i=r1(),p=Hn(t,"show"),d=Ne(),_=wo(),h=bo(),f=he(),v=It(),m=De(),x=go(),b=$o(),w=O({pin:()=>{if(x.hasByEvent(o.value)){n.info(T("already_pinned_tip"));return}x.pin(o.value,{onOK:m}),n.info(T("request_initiated"))},close:()=>{p.value=!1},editArticle:()=>{const P=We(o.value);if(!P){n.info("Identifier not found");return}bt.push({name:"markdown-editor",params:{value:P}})},deleteEvent:()=>{l.value(o.value.id),r(T("message.you_have_sent_a_delete_request"))},joinTheBlacklist(){y({title:T("hide_list"),ignoreContent:o.value.content})},copyNevent(){const P=Tt(o.value);i(P)},copyNote(){const P=ue.noteEncode(o.value.id);i(P)},copyNaddr(){const P=We(o.value);if(!P){n.info("Identifier not found");return}i(P)},copyHexPubkey(){i(o.value.pubkey)},recommendUser(){_(o.value.pubkey)},recommendEvent(){d(o.value)},recommendUserMetadata(){h(o.value.pubkey)},muteUser(){v.addPubkey(o.value.pubkey,{onOK:m})},pushShortTextNote(){f(o.value)},reply(){s.emitRichTextEditBox("reply",o.value)},mention(){s.emitRichTextEditBox("mention",o.value)}}),E=P=>{const A=w.value[P];A||n.error("Not found"),A(o.value)},{addRule:y}=s1(),R=En(),B=z(()=>{const P=[{label:T("close"),value:"close",key:"close"},...o.value.pubkey===R.value?[...o.value.kind===30023?[{label:T("edit"),value:"editArticle",key:"editArticle"}]:[],{label:T("delete_event"),value:"deleteEvent",key:"deleteEvent"}]:[{label:T("hide"),value:"joinTheBlacklist",key:"joinTheBlacklist"},{label:T("mute_user"),value:"muteUser",key:"muteUser"}],{label:T("open"),value:"pushShortTextNote",key:"pushShortTextNote"},{label:T("reply"),value:"reply",key:"reply"},{label:T("mention"),value:"mention",key:"mention"},{label:T("tip"),value:"pin",key:"pin"},{label:`${T("copy")} Nevent`,value:"copyNevent",key:"copyNevent"},{label:`${T("copy")} Note`,value:"copyNote",key:"copyNote"},...o.value.kind>=3e4&&o.value.kind<4e4?[{label:`${T("copy")} Naddr`,value:"copyNaddr",key:"copyNaddr"}]:[],{label:`${T("copy")} Hex pubkey`,value:"copyHexPubkey",key:"copyHexPubkey"},{label:T("recommend_user"),value:"recommendUser",key:"recommendUser"},{label:T("recommend_event"),value:"recommendEvent",key:"recommendEvent"},{label:T("recommend_metadata"),value:"recommendUserMetadata",key:"recommendUserMetadata"}];return b==null||b.runInsertDropdown(P,w.value),P});return O(null),Vn(p),(P,A)=>{const V=Z,X=ie,je=i1;return u(),g("div",null,[k(je,{onSelect:E,value:a.value,"onUpdate:value":A[1]||(A[1]=Gt=>a.value=Gt),options:c(B),trigger:"manual",show:c(p)},{default:$(()=>[k(X,{quaternary:"",circle:"",onClick:A[0]||(A[0]=()=>p.value=!c(p))},{default:$(()=>[k(V,null,{default:$(()=>[k(xo)]),_:1})]),_:1})]),_:1},8,["value","options","show"])])}}}),zo=["src"],Eo={class:"flex-grow flex-shrink"},Po={class:"ml-4"},Co={class:"flex-grow-0 flex-shrink-0"},Oo=M({__name:"UserInfo",props:{pubkey:null,created_at:null,event:null},setup(e){const t=e,{pubkey:n,created_at:s}=U(t),o=z(()=>t.event&&qt(t.event)),[l,a,r]=Ae(()=>Ln(n.value,{urls:o.value}).feat.useMetadata()),i=z(()=>l.value),p=Ee();function d(h){var f;p.push(`/profile/${ue.nprofileEncode({pubkey:h,relays:[...(f=o.value)!=null?f:[]]})}`)}const _=z(()=>{var h;if(!i.value)return n.value.slice(0,10);for(const f of["name","display_name","displayName","username"]){const v=i.value[f];if((h=v==null?void 0:v.length)!=null?h:0>0)return v}return n.value.slice(0,10)});return(h,f)=>{var v,m;return u(),g("div",{class:"flex items-center cursor-pointer w-full",ref_key:"target",ref:a},[S("img",{class:"h-12 w-12 bg-white rounded-full flex-grow-0 flex-shrink-0",src:(m=(v=c(i))==null?void 0:v.picture)!=null?m:c(t1),onClick:f[0]||(f[0]=()=>d(c(n)))},null,8,zo),S("div",Eo,[S("div",{class:"font-bold ml-4",onClick:f[1]||(f[1]=()=>d(c(n)))},[k(c1,null,{default:$(()=>[J(D(c(_)),1)]),_:1})]),S("div",Po,[W(h.$slots,"bottom",{userInfo:c(i)})])]),S("div",Co,[W(h.$slots,"right",{userInfo:c(i)})])],512)}}}),Ro=["id"],Bo={class:"mx-3 my-3"},Mo={class:"my-2"},To=M({__name:"PapawWarp",props:{event:null,deleteEvent:null,withPapawOptionsButtons:{type:Boolean,default:!0},disabledReply:{type:Boolean}},emits:["update:showSMS"],setup(e,{emit:t}){var R;const n=e,[s,o]=Me(void 0,{preloadDistance:0}),{event:l,deleteEvent:a}=U(n),r=O(!1),i=O(!1);function p(){i.value=!i.value,r.value=!0}const d=O(),_=he(),{isPress:h}=Nn(d,()=>{_(l.value)}),f=Un(),v=async()=>{var A,V,X;const B=s.value;if(!B||!f)return;const P=B.getBoundingClientRect();o.value=!0,await ge(0),(X=f.scrollbarInst.value)==null||X.scrollBy({top:P.top-((V=(A=f.containerRef.value)==null?void 0:A.getBoundingClientRect().top)!=null?V:0),behavior:"smooth"}),E()},m=(R=Ts())==null?void 0:R.jumpList;m==null||m.value.push(v);const x=Ds(),b=z(()=>{const B=x==null?void 0:x.focusEvent.value;return B?B.id===l.value.id:!1});Ct(()=>{b.value&&v()}),L(o,()=>{if(o.value){if(!(m!=null&&m.value))return;Cn(m.value,v)}});const w=O(!1);function E(){w.value=!0,setTimeout(()=>{w.value=!1},1e3)}function y(B){var P;(P=a==null?void 0:a.value)==null||P.call(a,B)}return(B,P)=>(u(),g("div",{class:"mt-4",ref_key:"target",ref:s},[k(Ms,{delay:c(qe).lazyDelayForPapaw,disabled:!c(qe).lazyDelayForPapaw,minHeight:200},{default:$(()=>[k(Yn,null,{default:$(({id:A})=>{var V;return[Pn((u(),g("div",{class:Re(["w-max-full rounded-2xl bg-[#dfe4ea55] overflow-hidden relative transition",{twinkle:w.value,["bg-[#dfe4eabb]"]:c(h)}]),onMousedownPassive:P[0]||(P[0]=ce(()=>{},["stop"])),onTouchstartPassive:P[1]||(P[1]=ce(()=>{},["stop"])),onClickPassive:P[2]||(P[2]=ce(()=>{},["stop"]))},[S("div",{id:A,class:"relative overflow-hidden rounded-xl"},[W(B.$slots,"header"),S("div",Bo,[k(Oo,{pubkey:c(l).pubkey,created_at:c(l).created_at,event:c(l)},{bottom:$(()=>[k(Dt,{secondTimestamp:c(l).created_at},null,8,["secondTimestamp"])]),right:$(()=>[k(So,{show:i.value,event:c(l),deleteEvent:y},null,8,["show","event"])]),_:1},8,["pubkey","created_at","event"]),S("div",{class:"my-4 font",ref_key:"contentRef",ref:d},[W(B.$slots,"default")],512),S("div",Mo,[(V=e.withPapawOptionsButtons)==null||V?(u(),C(fo,{key:0,event:c(l)},null,8,["event"])):I("",!0),k(vo,{event:c(l)},null,8,["event"])])])],8,Ro),k(Kt,null,{default:$(()=>[W(B.$slots,"reply")]),_:3})],34)),[[c(cs),[p,{modifiers:{stop:!0}}],void 0,{stop:!0}]])]}),_:3})]),_:3},8,["delay","disabled"])],512))}}),Do={key:1},Ao=M({__name:"PapawById",props:{id:null,relays:null,pubkey:null,disabledReply:{type:Boolean}},setup(e){const t=e,n=z(()=>Le(t.id,{urls:t.relays,pubkey:t.pubkey})),s=z(()=>n.value.feat.useEvent()),o=he();return(l,a)=>{const r=u1;return c(s)?(u(),C(Jt,{key:0,event:c(s),disabledReply:""},On({_:2},[l.$slots.reply?{name:"reply",fn:$(()=>[W(l.$slots,"reply",{event:c(s)})]),key:"0"}:void 0]),1032,["event"])):(u(),g("div",Do,[k(r,{description:c(T)("not_found"),size:"huge",click:()=>c(o)(e.id)},null,8,["description","click"]),k(Kt,null,{default:$(()=>[W(l.$slots,"reply",{event:c(s)})]),_:3})]))}}}),Yt=M({__name:"RelayContent",props:{event:null},setup(e){const t=e,{event:n}=U(t),s=z(()=>n.value.tags.filter(l=>l[0]==="e"&&l[1]&&(l[3]==="reply"||!l[3])).map(l=>l[1])),o=z(()=>qt(n.value));return(l,a)=>{const r=y1;return u(),g(K,null,[c(s).length>0?(u(),C(r,{key:0,dashed:""})):I("",!0),(u(!0),g(K,null,se(c(s),i=>(u(),C(Ao,{id:i,relays:c(o),disabledReply:""},null,8,["id","relays"]))),256))],64)}}}),Lo={key:1},Io={key:2},Ho={key:3},Vo={key:4},No=M({__name:"Papaw",props:{event:null,deleteEvent:null,withPapawOptionsButtons:{type:Boolean,default:!0},disabledReply:{type:Boolean}},setup(e){const t=e,{event:n,deleteEvent:s}=U(t);function o(i){var p;(p=s==null?void 0:s.value)==null||p.call(s,i)}const l=O(),a=z(()=>n.value.kind),r=z(()=>n.value.content);return(i,p)=>(u(),C(To,ze({contentRef:l.value,onHandelDeleteEvent:o},i.$props,{withPapawOptionsButtons:e.withPapawOptionsButtons&&(c(a)===1||c(a)===42)}),{default:$(()=>[c(a)===1||c(a)===42?(u(),C(Jl,{key:0,event:c(n),disabledReply:e.disabledReply},null,8,["event","disabledReply"])):c(a)===3?(u(),g("span",Lo,D(c(T)("the_user_has_followed_you")),1)):c(a)===7?(u(),g("span",Io,[k(we,{events:[],size:20,reaction:c(r),active:!0},null,8,["reaction"]),e.disabledReply?I("",!0):(u(),C(Yt,{key:0,event:c(n)},null,8,["event"]))])):c(a)===30023?(u(),g("span",Ho,[k(x1,{event:c(n)},null,8,["event"])])):(u(),g("span",Vo,D(c(n).content),1))]),reply:$(()=>[W(i.$slots,"reply",{},void 0,!0)]),_:3},16,["contentRef","withPapawOptionsButtons"]))}});const Jt=H(No,[["__scopeId","data-v-4e4b6d44"]]),Uo=M({__name:"ContentReplyItem",props:{value:null,tag:null,event:null},setup(e){const t=e,{value:n,tag:s,event:o}=U(t),l=z(()=>{const d=new Set;if(s!=null&&s.value){const h=s.value[2];h&&d.add(h)}const _=le(o.value.id);return Oe(d,_),d}),a=z(()=>{var d;return s!=null&&s.value?(d=s.value[3])!=null?d:"reply":"mention"}),r=z(()=>Mt(n.value)),i=z(()=>{if(!!r.value&&!(a.value!=="reply"&&a.value!=="mention"))return Le(r.value.id,{urls:l.value})}),p=z(()=>{var d;return(d=i.value)==null?void 0:d.feat.useEvent()});return(d,_)=>{const h=Ot("router-link");return c(p)?(u(),C(Jt,{key:0,class:"w-full",disabledReply:"",event:c(p),deleteEvent:()=>{}},null,8,["event","deleteEvent"])):c(a)==="mention"||c(a)==="reply"?(u(),C(h,{key:1,to:{name:"short-text-note",params:{value:c(n)}}},{default:$(()=>[J(" &"+D(c(n)),1)]),_:1},8,["to"])):I("",!0)}}}),jo={},Fo={t:"1626764977164",viewBox:"0 0 2240 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4404","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"140",height:"64",class:"mini-header__logo"},Wo=S("path",{d:"M2079.810048 913.566175c-10.01309 0-18.554608 0.799768-26.936172-0.159954-16.987063-1.951433-33.974126-1.567544-50.99318-2.079395-10.972811-0.287916-10.652904-0.287916-11.580634-10.90883-2.71921-32.406582-5.694345-64.781173-8.605499-97.155764-2.527266-28.439735-4.926568-56.91146-7.70976-85.319204-2.527266-26.040432-5.566382-52.016883-8.317583-78.025324-2.623238-24.440897-5.054531-48.913784-7.77374-73.322691a12681.114551 12681.114551 0 0 0-10.684895-92.133223c-3.295042-27.128116-6.558094-54.320213-10.205034-81.416339a20559.272961 20559.272961 0 0 0-17.530905-125.979387c-6.398141-44.723002-14.075909-89.22207-22.105576-133.657156-1.439582-7.965685-1.247637-8.253601 6.36615-9.533229 31.670796-5.406429 63.501545-10.01309 95.716183-9.309295 3.486987 0.095972 7.005964 0.159954 10.460959 0.607823 5.662354 0.703795 8.605499 3.454996 8.925406 10.045081 1.119675 22.969325 2.71921 45.938649 4.414717 68.875983 2.71921 37.589076 5.662354 75.178151 8.477537 112.735236 1.791479 24.184971 3.327033 48.305961 5.150503 72.426951 2.911154 38.772732 5.982261 77.513473 8.925406 116.286205 1.791479 23.705111 3.359024 47.474203 5.182494 71.179313 2.783191 34.805885 5.822308 69.579778 8.637489 104.353672 1.791479 22.137566 3.391014 44.307123 5.278466 66.44469 2.783191 32.79047 5.790317 65.580941 8.63749 98.371411 2.143377 25.592562 4.09481 51.249106 6.270178 77.673426zM853.670395 114.918282c4.638652 0 11.644616-0.511851 18.554607 0.127963 8.797443 0.799768 10.49295 3.071107 11.036793 11.900541 2.527266 40.372267 4.894578 80.776524 7.581796 121.180782 2.943145 43.571337 6.174206 87.078693 9.405267 130.586048 2.975135 39.956388 5.950271 79.912775 9.149341 119.869163 3.486987 43.891244 7.357862 87.718507 10.876839 131.609751 2.655228 33.622229 4.926568 67.244457 7.677768 100.898677 2.623238 31.222926 5.694345 62.38187 8.509527 93.572805 2.399303 26.8402 4.830596 53.71239 7.165918 80.58458 0.735786 8.509527 0.127963 9.053369-9.053369 8.829434-24.025018-0.575833-47.922073-3.391014-71.947091-2.71921-5.502401 0.159954-7.101936-2.367312-8.029666-7.581796-1.983424-11.356699-1.663517-22.905343-2.879163-34.390006-3.295042-30.359177-5.182494-60.846317-7.965685-91.269474-2.495275-27.639967-5.502401-55.215953-8.349574-82.82393-2.527266-25.240664-5.02254-50.481329-7.709759-75.753984-2.687219-24.792795-5.534392-49.61758-8.349573-74.442365-2.591247-22.841362-5.118512-45.682723-7.869713-68.524085-4.062819-33.462275-8.093648-66.92455-12.508365-100.322844-4.062819-30.647093-8.66948-61.198214-12.988225-91.813317-5.886289-41.587914-12.508365-83.079855-19.834236-124.411842a1393.96288 1393.96288 0 0 0-5.310457-28.023856c-0.959721-4.702633-0.095972-7.421843 5.278466-8.157629 14.139891-1.887451 28.24779-4.830596 42.451663-6.206196 14.203872-1.311619 28.407744-3.966847 45.106891-2.71921z m1006.075609 403.33878c27.064134 0 27.703949 0.191944 32.054684 24.536869 5.342447 30.03927 9.08536 60.334465 12.636328 90.62966 3.742912 32.278619 7.517815 64.557238 10.972811 96.867848 2.783191 26.008441 5.118512 52.080864 7.74175 78.089305 2.7512 27.256079 5.662354 54.416185 8.509527 81.640274 1.567544 15.387528 3.039117 30.775056 4.798605 46.130593 0.511851 4.446708-0.831758 6.81402-5.214485 7.325871-9.245313 1.055693-18.426645 2.27134-27.639967 3.263052-16.891091 1.82347-33.814173 3.614949-50.737254 5.182493-8.733462 0.799768-9.309294 0.319907-10.940821-8.125638-14.843686-76.617733-29.719363-153.171485-44.435086-229.821208-9.789155-50.961189-19.322384-101.95437-28.919595-152.915559a805.525894 805.525894 0 0 1-3.582959-21.081873c-0.639814-4.030829 0.44787-6.622075 5.022541-7.70976 30.48714-7.133927 61.294186-12.636328 89.733921-14.011927z m-1137.077537 0c28.951586 0 28.823623 0.095972 33.302322 26.360339 6.909992 40.660183 11.804569 81.544301 16.187295 122.556382 4.286754 39.796434 8.957397 79.560878 13.148179 119.357311 2.847173 27.224088 5.086522 54.512157 7.74175 81.704255 1.887451 19.354375 4.126801 38.644769 6.174206 57.967153 0.255926 2.367312 0.383888 4.734624 0.543842 7.133927 0.415879 9.469248 0 10.237025-9.117351 11.164755-18.074747 1.887451-36.181485 3.454996-54.256232 5.246476-6.558094 0.639814-13.084197 1.599535-19.57831 2.239349-8.63749 0.799768-8.925406 0.767777-10.620913-7.965685-6.078234-30.679084-11.964523-61.422149-17.914793-92.101233-14.267853-73.898523-28.69566-147.733065-42.867542-221.631589-5.662354-29.559409-10.524941-59.246781-16.091323-88.838181-1.023702-5.406429-0.255926-7.933694 5.342447-9.245313 30.199223-7.037955 60.590391-12.540355 88.006423-13.947946z m382.128944 309.861946v124.027954c0 1.183656-0.127963 2.399303 0.03199 3.582959 0.607823 6.014252-1.599535 8.66948-7.805731 8.413555-8.157629-0.351898-16.251277-0.127963-24.408906 0.063981-17.019054 0.319907-34.070098-0.351898-51.057162 1.599535-9.405267 1.087684-9.213322 0.511851-10.141052-9.405266-2.783191-31.222926-5.822308-62.413861-8.669481-93.636787-2.623238-28.823623-4.99055-57.711228-7.677768-86.534851-2.71921-29.655381-5.758326-59.214791-8.509527-88.838181-1.887451-19.770254-3.550968-39.508518-5.214485-59.278772-2.175368-25.720525-4.190782-51.409059-6.462122-77.129585-0.959721-10.844848-0.159954-12.380402 10.588923-13.500076a531.877423 531.877423 0 0 1 83.527724-2.591247c6.941982 0.383888 13.851974 1.727498 20.570022 3.359024 8.477536 2.015414 9.405267 3.263052 9.853137 12.124476 0.92773 17.850812 1.855461 35.701624 2.335321 53.584427 0.543842 19.866226 0.095972 39.764443 0.831758 59.63067 1.855461 54.800074 1.567544 109.664129 2.207359 164.528184z m1134.806197 5.630364v117.437869c0 1.983424-0.063981 3.966847 0.03199 5.982262 0.415879 5.150503-1.983424 6.973973-6.878001 6.941982-12.028504-0.095972-24.025018 0-36.021531 0.159954-13.564058 0.127963-27.096125 0.063981-40.628192 1.535553-8.925406 1.023702-8.989387 0.351898-9.789155-8.509527-3.678931-40.660183-7.549806-81.320366-11.260728-122.04453-3.391014-37.525094-6.526103-75.082179-9.981099-112.639265-3.550968-38.740741-7.421843-77.38551-10.90883-116.09426-1.727498-19.386366-3.16708-38.772732-4.606661-58.159097-0.575833-8.445546 0.351898-9.949109 9.885127-10.716886 16.571184-1.311619 33.078387-3.550968 49.777534-3.263051 16.635165 0.319907 33.302322-0.607823 49.841515 2.559256 14.011928 2.687219 14.715723 3.486987 15.547481 18.458635 2.399303 44.051198 1.663517 88.230358 3.231061 132.281556 1.599535 46.89837 0.479861 93.79674 1.759489 146.069549zM1831.498213 305.135c9.789155 0.575833 17.498914 0.095972 25.176683 1.791479 4.894578 1.119675 7.357862 3.327033 7.837723 8.573509 2.303331 25.240664 4.798605 50.51332 7.32587 75.785975 2.015414 20.50604 4.158791 41.012081 6.238188 61.518121l0.191944 1.183656c1.663517 12.924244 1.279628 13.276142-11.292718 13.979937-11.196746 0.607823-22.361501 1.599535-33.558247 2.27134-7.357862 0.44787-9.693183 1.695507-10.90883-9.021378-4.190782-37.813011-9.053369-75.530049-13.692021-113.311069a1185.0316 1185.0316 0 0 0-4.286754-31.798759c-0.92773-5.982261 1.407591-9.277304 7.005964-9.757164 7.357862-0.671805 14.715723-0.863749 19.962198-1.215647z m-1133.398606 0.159954c7.549806 0.415879 15.323547-0.159954 22.937334 1.599535 4.350736 0.991712 6.558094 2.815182 6.973973 7.773741 0.92773 11.83656 2.7512 23.641129 3.870875 35.477689 3.550968 36.309448 6.909992 72.650886 10.237025 108.992324 0.703795 7.901704 0.543842 8.061657-6.84601 8.605499-13.116188 0.959721-26.264367 1.919442-39.412546 2.463284-7.645778 0.351898-8.605499-0.575833-9.56522-8.381564-3.327033-26.744227-6.462122-53.520446-9.661192-80.296664-2.591247-22.073585-4.766615-44.14717-7.901704-66.156773-0.863749-6.078234 1.119675-7.74175 5.982262-8.733462 7.709759-1.567544 15.451509-1.055693 23.385203-1.343609z m399.147998 100.002936c0 23.001315 0.063981 45.97064-0.031991 69.003946 0 10.332997-0.127963 10.396978-10.396978 10.269016a324.289753 324.289753 0 0 1-36.981252-1.919443c-7.933694-0.991712-8.093648-0.735786-8.317583-9.149341-0.799768-28.119828-1.631526-56.239655-2.207359-84.359483-0.415879-19.034468-0.639814-38.004955-1.791479-57.039422-0.607823-9.821146-0.063981-9.917118 9.373276-10.045081 13.915956-0.159954 27.799921 0.479861 41.619904 2.591247 8.317583 1.279628 8.701471 1.279628 8.733462 10.49295 0.063981 23.385204 0.063981 46.770407 0.063981 70.187602h-0.063981z m1135.38203 0.607824c0 23.033306 0.063981 46.034621-0.031991 69.035936 0 9.661192-0.159954 9.725174-9.853137 9.661192a505.32514 505.32514 0 0 1-38.132917-1.791479c-6.302168-0.479861-8.157629-3.135089-7.74175-8.861425 0.063981-0.799768 0-1.599535 0-2.399302-0.959721-44.403095-1.919442-88.7742-2.815182-133.177296-0.031991-2.367312-0.159954-4.734624-0.063982-7.133926 0.127963-8.957397 0.159954-9.181332 9.149341-9.117351 12.380402 0.063981 24.664832 0.703795 37.013243 1.919442 15.067621 1.503563 12.412393 3.359024 12.476375 15.259566 0.063981 22.169557 0.031991 44.403095 0 66.604643z m-1565.593 54.000306c0.287916 12.636328 0.287916 12.604337-11.804569 15.547481-8.221611 2.015414-16.443221 4.222773-24.728813 6.046243-7.069945 1.599535-8.317583 0.703795-9.53323-6.238187-8.445546-47.090314-16.8591-94.212619-25.240664-141.334924-1.695507-9.757164-1.247637-10.364988 8.349573-12.060495 11.804569-2.079396 23.577148-4.126801 35.381717-5.950271 7.517815-1.183656 8.477536-0.767777 9.9811 7.517815 2.975135 16.731138 5.790317 33.526256 7.997675 50.385357 3.423005 26.680246 6.238187 53.456464 9.309295 80.168701 0.255926 1.951433 0.191944 3.966847 0.287916 5.91828z m1064.138735-136.696273c15.451509-2.527266 31.030982-5.086522 46.610454-7.549806 5.598373-0.863749 7.29388 2.655228 8.029666 7.645778 2.655228 18.426645 5.982261 36.725327 8.157629 55.183962 3.19907 26.744227 7.581797 53.360492 8.413555 80.328655 0.063981 2.7512 0.031991 5.566382 0.095972 8.317583 0.159954 4.286754-1.983424 6.494113-5.950271 7.421843-10.556932 2.367312-21.113864 4.734624-31.638805 7.261889-5.054531 1.215647-6.750038-0.92773-7.581796-5.854298-3.16708-18.746552-6.81402-37.397131-10.045081-56.079702-5.47041-30.775056-10.780867-61.582103-16.091323-92.38915-0.127963-1.119675 0-2.303331 0-4.286754z m-710.64147 108.032603c-0.44787 16.37924 0.543842 30.647093-1.695507 44.914947-0.671805 4.510689-1.983424 7.421843-6.846011 7.837722-10.428969 0.863749-20.825947 1.695507-31.190935 2.7512-5.02254 0.543842-6.430131-1.631526-7.261889-6.558094-2.335321-14.55577-1.919442-29.303484-3.327033-43.923234-2.655228-27.607976-3.774903-55.407897-5.566383-83.111846-0.44787-6.750038-1.119675-13.436095-1.663516-20.186134-0.287916-3.774903 1.215647-5.886289 5.246475-6.046242 13.500077-0.543842 26.936172-3.007126 40.50023-2.527266 7.933694 0.287916 8.605499 0.799768 9.181331 8.797443 0.351898 5.534392 0.255926 11.132765 0.383889 16.699147l2.239349 81.352357z m1134.902169-15.867388c0 19.066459 0.223935 38.132918-0.031991 57.199376-0.159954 9.917118-1.279628 10.780867-10.652904 11.644616-9.277304 0.863749-18.490626 1.567544-27.735939 2.559256-5.214485 0.543842-7.645778-0.991712-7.965685-6.973973-1.34361-25.336637-3.16708-50.673273-4.926568-75.977919-1.3756-20.985901-2.943145-41.939811-4.414717-62.893722-0.159954-2.399303-0.031991-4.798605-0.191944-7.165917-0.223935-4.190782 1.055693-6.654066 5.758326-6.81402 13.116188-0.44787 26.136404-2.975135 39.348564-2.495274 8.061657 0.287916 8.18962 0.415879 8.797444 8.797443 1.951433 27.32006 2.143377 54.704102 2.015414 82.120134zM628.295894 756.171918c16.571184 18.234701 17.402942 39.828425 11.932532 62.413861-5.502401 22.585436-18.042756 41.204025-33.23834 57.903171-25.49659 27.895893-56.303637 48.497905-89.062116 65.99682-56.399609 30.135242-116.190232 50.161422-178.572103 61.997982-44.882956 8.477536-90.053828 15.00364-135.704561 17.498914-13.915956 0.767777-27.799921 1.407591-41.715876 1.311619-10.077071 0-20.186133 0.287916-30.231214-0.063981-8.541518-0.319907-9.789155-1.791479-10.49295-10.716886-2.591247-32.022693-4.798605-64.077378-7.645778-96.100071-3.327033-37.109215-7.229899-74.18644-10.812858-111.295654-2.623238-26.8402-4.894578-53.744381-7.773741-80.520599-3.327033-31.542833-7.069945-63.021684-10.716885-94.564517-3.327033-29.111539-6.526103-58.28706-10.045081-87.430591-3.934856-32.278619-7.997676-64.493257-12.31642-96.707894a8228.968456 8228.968456 0 0 0-13.212161-92.996973 5984.500754 5984.500754 0 0 0-24.312934-152.627642 3243.825263 3243.825263 0 0 0-23.67312-123.740038c-1.151665-5.502401 0.511851-7.709759 5.342448-9.725174C52.335283 47.609843 98.465876 28.063524 144.724432 8.77313c8.605499-3.582959 17.434933-6.590085 26.584274-8.285592 6.334159-1.183656 7.965685 0.127963 7.773741 6.494113-0.479861 16.283268 0.191944 32.630517-1.407591 48.849803a161.393095 161.393095 0 0 0-0.639814 13.084197c-0.735786 58.383032-1.439582 116.798056 0.095972 175.213079 1.34361 51.185124 4.030829 102.338258 7.005964 153.491392 2.335321 40.372267 5.694345 80.744534 9.149341 121.052819 3.391014 39.508518 7.517815 78.953054 11.38869 118.461572 0.735786 7.517815 1.407591 8.221611 9.949108 7.069945a381.329176 381.329176 0 0 1 50.833227-4.190782c52.880632-0.127963 104.897514 7.133927 156.338564 19.322384 45.010919 10.684895 88.806191 24.920757 130.777993 44.818975 20.793957 9.853136 40.692174 21.241827 58.830902 35.701624 6.174206 4.862587 11.676606 10.46096 16.891091 16.315259z m1126.840512-9.597211c20.47405 17.946784 27.927883 39.924397 22.105576 67.116494-4.830596 22.425483-15.771416 41.268006-30.359177 58.127107-23.417194 27.096125-51.856929 47.698138-82.631985 64.909136-60.334465 33.782182-124.603787 55.727804-192.168151 68.396122a1151.089465 1151.089465 0 0 1-111.455609 15.547481c-21.177845 1.82347-42.451662 4.09481-66.220754 2.623238h-27.76793c-5.406429 0-8.477536-1.695507-8.925406-8.125638-2.047405-28.087837-4.414717-56.143683-6.941983-84.19953-2.687219-29.623391-5.662354-59.246781-8.477536-88.870172-2.559256-27.224088-4.926568-54.512157-7.709759-81.736245-2.559256-25.656544-5.502401-51.249106-8.285592-76.873659-2.591247-24.057008-5.086522-48.114017-7.933695-72.139035-3.423005-29.111539-7.037955-58.223079-10.652904-87.334618-3.391014-27.160107-6.750038-54.288222-10.364987-81.416338a6133.577429 6133.577429 0 0 0-12.156467-87.142675c-5.694345-37.653057-11.804569-75.178151-17.818822-112.767227a3259.14881 3259.14881 0 0 0-29.111539-158.993792c-0.44787-2.335321-0.671805-4.734624-1.3756-7.005964-1.663517-5.118512-0.063981-7.837722 4.958559-9.821146C1191.012355 47.641834 1238.61452 24.448575 1288.2321 6.149893c6.494113-2.431293 13.052207-5.150503 20.058171-5.854299 6.302168-0.639814 7.901704 0.383888 7.29388 7.101936-3.327033 36.43741-1.407591 73.066765-3.135089 109.536166-1.407591 29.751354-1.247637 59.598679 0.255926 89.382023 0.351898 7.549806 0.639814 15.131602 0.575832 22.649418-0.383888 35.765606 1.503563 71.499221 3.327033 107.200845 2.335321 47.186286 5.758326 94.276601 9.245313 141.398906 2.527266 34.006117 5.822308 67.948253 9.021379 101.922379 1.695507 18.586598 3.518977 37.141206 5.822308 55.631832 1.247637 10.205034 1.759489 10.301006 11.772578 8.957396 17.658868-2.399303 35.349726-4.350736 53.200539-4.09481 62.637796 0.799768 124.027954 10.684895 184.266447 27.863902 40.788146 11.580634 80.488608 26.040432 117.981712 46.290547a253.55831 253.55831 0 0 1 47.218277 32.438573zM308.676783 922.811488c23.161269-11.068783 135.608589-98.947243 144.533995-113.279078-54.576139-23.513166-109.344222-45.362816-168.239105-63.24562l23.70511 176.524698z m1277.196815-107.520752c2.879163-3.103098 2.559256-5.502401-1.343609-7.229899-7.773741-3.550968-15.4835-7.325871-23.353213-10.556932-42.003793-17.179007-84.19953-33.814173-127.482951-47.37823-3.774903-1.151665-7.645778-3.774903-12.476374-1.535554l23.321222 173.45359c3.454996 0.767777 4.798605-0.831758 6.33416-1.919442 39.316574-28.855614 78.889073-57.35933 116.638102-88.390312 6.36615-5.182494 12.668318-10.396978 18.362663-16.443221z",fill:"var(--brand_blue)","p-id":"4405"},null,-1),qo=[Wo];function Ko(e,t){return u(),g("svg",Fo,qo)}const Yo=H(jo,[["render",Ko]]),Ue=e=>(Rn("data-v-e484e7f0"),e=e(),Bn(),e),Jo=Ue(()=>S("div",null,[S("div",{class:"diamond"})],-1)),Go=Ue(()=>S("div",null,[S("div",{class:"diamond"})],-1)),Zo=Ue(()=>S("div",null,[S("div",{class:"diamond"})],-1)),Xo=[Jo,Go,Zo],Qo=M({__name:"PlayButton",props:{value:{type:Boolean,default:!0}},emits:["update:value"],setup(e,{emit:t}){const n=e,s=O(n.value);return Ct(()=>{s.value=n.value}),L(s,()=>{t("update:value",s.value)}),(o,l)=>(u(),g("div",{class:Re(["play",{pause:!s.value}]),onClick:l[0]||(l[0]=()=>s.value=!s.value)},Xo,2))}});const el=H(Qo,[["__scopeId","data-v-e484e7f0"]]),tl={class:"flex flex-shrink-0 w-40 h-40"},nl=["src"],sl=M({__name:"ContentBilibiliWebsite",props:{bv:null},setup(e){const t=e,{bv:n}=U(t),s=z(()=>`//player.bilibili.com/player.html?bvid=${n.value}&&page=1&as_wide=1&high_quality=1&danmaku=0`),[o]=Bt(),l=O(!1),{duration:a,transitionActive:r,safeActive:i,show:p,hidden:d}=Rt();let _=null;return p(),L(l,()=>{clearTimeout(_),_=setTimeout(()=>{l.value?d():p()},3e3)}),(h,f)=>{const v=Yo,m=Z,x=Be;return u(),g("div",{ref_key:"bilibili_player_ref",ref:o,class:"w-full rounded-xl overflow-hidden relative"},[k(x,{class:"h-full w-full"},{default:$(()=>[c(i)?(u(),g("div",{key:0,class:"w-full h-full flex flex-col justify-center items-center absolute left-0 right-0 top-0 bottom-0",style:te({opacity:c(r)?1:0,transition:`opacity ${c(a)}ms ease `})},[k(m,{class:"absolute top-[25%]",style:te({transform:"translate(0,-50%)"}),size:"15em",color:"rgb(0, 174, 236)"},{default:$(()=>[k(v,{class:"h-40 w-40"})]),_:1},8,["style"]),S("div",tl,[k(el,{value:l.value,"onUpdate:value":f[0]||(f[0]=b=>l.value=b)},null,8,["value"])])],4)):I("",!0),l.value?(u(),g("iframe",{key:1,class:"w-full h-full",src:c(s),allowfullscreen:"",height:"0",width:"100%",scrolling:"no",frameborder:"0",sandbox:"allow-top-navigation allow-same-origin allow-forms allow-scripts"},`\r
        <span\r
          data-mce-type="bookmark"\r
          style="\r
            display: inline-block;\r
            width: 0px;\r
            overflow: hidden;\r
            line-height: 0;\r
          "\r
          class="mce_SELRES_start"\r
        ></span>\r
      `,8,nl)):I("",!0)]),_:1})],512)}}}),ol=""+new URL("7z.f9012bb4.png",import.meta.url).href,ll=["src"],al=M({__name:"Icon7z",setup(e){return(t,n)=>(u(),g("img",{class:"h-full w-auto",src:c(ol),alt:""},null,8,ll))}}),rl={},il={version:"1.1",xmlns:"http://www.w3.org/2000/svg","fill-rule":"evenodd","clip-rule":"evenodd",height:"1024",width:"1024",viewBox:"0 0 1024 1024"},cl=S("path",{d:"M766.1 57.2c-0.8-0.8-1.6-1.4-2.4-2.2l-50-50c-2.8-2.8-8.2-5-12.1-5H286c-58.1 0-105.4 47.2-105.4 105.1v465.5h82.5V105.1c0-12.4 10.5-22.9 22.9-22.9h364.4v152c0 58 47.3 105.1 105.4 105.1h152.4v579.5c0 12.4-10.5 22.9-22.9 22.9H286c-12.4 0-22.9-10.5-22.9-22.9v-57.9h-82.5v57.9c0 58 47.3 105.1 105.4 105.1h599.2c58.1 0 105.4-47.2 105.4-105.1V288.4c0-3.9-2.2-9.3-5-12l-50.2-50c-0.8-0.8-1.5-1.6-2.3-2.4l-167-166.8z m-33.2 177V129.1c0-3.9 2.2-4.8 5-2.1l125.3 125c2.8 2.8 1.8 5-2.1 5H755.8c-12.4 0.1-22.9-10.4-22.9-22.8z",fill:"#04a7f5"},null,-1),ul=S("path",{d:"M679.7 598.5H68c-15.1 0-27.5 12.3-27.5 27.4v180.6c0 15.1 12.4 27.4 27.5 27.4h611.7c15.1 0 27.5-12.3 27.5-27.4V626c0-15.1-12.4-27.5-27.5-27.5z m-345.1 59.3l-77.3 107.4h77.2v26.4H213.6v-18l78.7-106.9h-72.9v-26.4h115.1v17.5z m67.6 7.6h-13v101.1h13v25.1h-58v-25.1H357V665.4h-12.8v-25.1h58v25.1z m113.4 60c-11.4 9.3-25.6 13.8-42.6 13.4h-16.6v52.7h-32.2V640.3h52.1c37.6 0 56.4 16 56.4 47.9 0 15.5-5.7 27.9-17.1 37.2z",fill:"#034767"},null,-1),dl=S("path",{d:"M470.7 665.3h-14.3v48.8h14c18.9 0 28.4-8.2 28.4-24.7 0-16.1-9.4-24.1-28.1-24.1z",fill:"#034767"},null,-1),fl=S("path",{d:"M468.4 81.5h71v47.4h-71zM397.4 128.9h71v47.3h-71zM468.4 176.2h71v47.3h-71zM397.4 223.5h71v47.3h-71zM468.4 270.8h71v47.3h-71zM397.4 318.1h71v47.3h-71zM468.4 365.4h71v47.3h-71zM397.4 412.7h142V460h-142zM397.4 460h15.1v47.3h-15.1zM523.7 460h15.7v47.3h-15.7zM539.4 543.1c0 13.1-11 11.5-24.5 11.5H422c-13.6 0-24.5 1.7-24.5-11.3V531v-23.6h141.9v35.7z",fill:"#034767"},null,-1),pl=[cl,ul,dl,fl];function vl(e,t){return u(),g("svg",il,pl)}const hl=H(rl,[["render",vl]]),_l=""+new URL("xlsx.fcdf8604.png",import.meta.url).href,ml=["src"],yl=M({__name:"xlsx",setup(e){return(t,n)=>(u(),g("img",{class:"h-full w-auto",src:c(_l),alt:""},null,8,ml))}}),gl={},wl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},bl=S("path",{d:"M270.1 741.7c0 23.4 19.1 42.5 42.6 42.5h48.7v120.4c0 30.5 24.5 55.4 54.6 55.4c30.2 0 54.6-24.8 54.6-55.4V784.1h85v120.4c0 30.5 24.5 55.4 54.6 55.4c30.2 0 54.6-24.8 54.6-55.4V784.1h48.7c23.5 0 42.6-19.1 42.6-42.5V346.4h-486v395.3zm357.1-600.1l44.9-65c2.6-3.8 2-8.9-1.5-11.4c-3.5-2.4-8.5-1.2-11.1 2.6l-46.6 67.6c-30.7-12.1-64.9-18.8-100.8-18.8c-35.9 0-70.1 6.7-100.8 18.8l-46.6-67.5c-2.6-3.8-7.6-5.1-11.1-2.6c-3.5 2.4-4.1 7.4-1.5 11.4l44.9 65c-71.4 33.2-121.4 96.1-127.8 169.6h486c-6.6-73.6-56.7-136.5-128-169.7zM409.5 244.1a26.9 26.9 0 1 1 26.9-26.9a26.97 26.97 0 0 1-26.9 26.9zm208.4 0a26.9 26.9 0 1 1 26.9-26.9a26.97 26.97 0 0 1-26.9 26.9zm223.4 100.7c-30.2 0-54.6 24.8-54.6 55.4v216.4c0 30.5 24.5 55.4 54.6 55.4c30.2 0 54.6-24.8 54.6-55.4V400.1c.1-30.6-24.3-55.3-54.6-55.3zm-658.6 0c-30.2 0-54.6 24.8-54.6 55.4v216.4c0 30.5 24.5 55.4 54.6 55.4c30.2 0 54.6-24.8 54.6-55.4V400.1c0-30.6-24.5-55.3-54.6-55.3z",fill:"currentColor"},null,-1),kl=[bl];function xl(e,t){return u(),g("svg",wl,kl)}const $l=H(gl,[["render",xl]]),Sl={},zl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},El=S("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7l7-7z",fill:"currentColor"},null,-1),Pl=[El];function Cl(e,t){return u(),g("svg",zl,Pl)}const Ol=H(Sl,[["render",Cl]]),Rl={class:"flex h-20"},Bl={class:"flex-1 flex-shrink flex items-center"},Ml=M({__name:"ContentDownloadBlock",props:{url:null},setup(e){const t=e,{url:n}=U(t),s=z(()=>{var r;const l=n.value.lastIndexOf("/"),a=(r=n.value.slice(l+1))!=null?r:n.value;return decodeURI(a)}),o=()=>{window.open(n.value)};return(l,a)=>{const r=Mn,i=$l,p=Z,d=yl,_=hl,h=al,f=Be;return u(),C(f,{class:"mt-2"},{default:$(()=>[S("div",Rl,[S("div",Bl,[k(r,{trigger:"hover"},{trigger:$(()=>[J(D(c(s)),1)]),default:$(()=>[J(" "+D(c(n)),1)]),_:1})]),S("div",{class:"flex-shrink h-20 w-20 flex justify-center items-center",onClick:o},[c(n).endsWith(".apk")?(u(),C(p,{key:0,size:"3em"},{default:$(()=>[k(i)]),_:1})):c(n).endsWith(".xlsx")?(u(),C(p,{key:1,size:"3em"},{default:$(()=>[k(d)]),_:1})):c(n).endsWith(".zip")?(u(),C(p,{key:2,size:"3em"},{default:$(()=>[k(_)]),_:1})):c(n).endsWith(".7z")?(u(),C(p,{key:3,size:"3em"},{default:$(()=>[k(h)]),_:1})):(u(),C(p,{key:4,size:"3em"},{default:$(()=>[k(Ol)]),_:1}))])])]),_:1})}}}),Tl=["src"],Dl=M({__name:"ContentYouTubeWebsite",props:{v:null},setup(e){const t=e,{v:n}=U(t),s=z(()=>`https://www.youtube.com/embed/${n.value}?controls=0`),[o]=Bt();return(l,a)=>{const r=Be;return u(),g("div",{ref_key:"target",ref:o,class:"w-full rounded-xl overflow-hidden relative"},[k(r,{class:"h-full w-full"},{default:$(()=>[S("iframe",{class:"w-full h-full",src:c(s),title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,Tl)]),_:1})],512)}}}),Al={class:"w-full"},Ll=["href"],Il=M({__name:"ContentWebsite",props:{src:null},setup(e){const t=e,{src:n}=U(t),s=z(()=>{const a=/bilibili.com.*(BV[A-Za-z0-9]{5,20})\//[Symbol.match](n.value);if(!a)return;const r=a[1];if(!!r)return r}),o=z(()=>{const a=/youtube.com\/.*v=([a-zA-Z0-9]+)/[Symbol.match](n.value);if(!a)return;const r=a[1];if(!!r)return r}),l=`apk,pdf,zip,excel,xlsx,7z,exe,docx,doc,docx,zip,rar,apk,ipa,txt,exe,7z,e,z,ct,ke,cetrainer,db,tar,pdf,w3x
epub,mobi,azw,azw3,osk,osz,xpa,cpk,lua,jar,dmg,ppt,pptx,xls,xlsx,mp3
ipa,iso,img,gho,ttf,ttc,txf,dwg,bat,imazingapp,dll,crx,xapk,conf
deb,rp,rpm,rplib,mobileconfig,appimage,lolgezi,flac
cad,hwt,accdb,ce,xmind,enc,bds,bdi,ssf,it
pkg,cfg`.split(",").map(a=>`.${a}`);return(a,r)=>(u(),g("div",Al,[c(s)?(u(),C(sl,{key:0,bv:c(s)},null,8,["bv"])):c(o)?(u(),C(Dl,{key:1,v:c(o)},null,8,["v"])):c(l).some(i=>c(n).endsWith(i))?(u(),C(Ml,{key:2,url:c(n)},null,8,["url"])):(u(),g("a",{key:3,class:"break-words",href:c(n),target:"_blank"},D(c(n)),9,Ll))]))}}),Hl=["onClick"],Vl={key:0},Nl={key:1,class:"p-0 m-0 w-full h-auto"},Ul={controls:"",class:"overflow-hidden rounded-2xl w-full m-0 p-0 h-auto"},jl=["src"],Fl=["href"],Wl=["href"],ql={key:9,class:"break-words block"},Kl=["textContent"],Yl=M({__name:"Content",props:{event:null,contenteditable:{type:Boolean},disabledReply:{type:Boolean}},setup(e){const t=e,{event:n,contenteditable:s}=U(t);function o(f,v,m,x){let b=0;const w=v[Symbol.matchAll](f);for(const E of w){let y=E.index,R=E[0];!Ke(y)||(y-b>0&&m(f.slice(b,y)),x(R,y,E),b=y+R.length)}f.length-b>0&&m(f.slice(b))}const l=[(f,v,m,x)=>{o(v,Dn(),b=>{f(b)},(b,w,E)=>{let y=E[1];!b||!y||m.push(r(b,y,x.tags))})},(f,v,m,x)=>{o(v,/(nostr:|&|@)((naddr)[a-zA-Z0-9]+)/g,b=>{f(b)},(b,w,E)=>{const y=E[2];!y||m.push(["naddr",y])})},(f,v,m,x)=>{o(v,/(nostr:|&|@)((nevent|note)[a-zA-Z0-9]+)/g,b=>{f(b)},(b,w,E)=>{const y=E[2];!y||m.push(["e",y])})},(f,v,m,x)=>{o(v,/(nostr:|@)((nprofile|npub)[a-zA-Z0-9]+)/g,b=>{f(b)},(b,w,E)=>{const y=E[2];!y||m.push(["p",`@${y}`,y])})},(f,v,m,x)=>{o(v,An(),b=>{f(b)},(b,w,E)=>{const y=E[1];!y||m.push(["t",`#${y}`,y])})},(f,v,m)=>{m.push(["text",v])}];function a(f,v,m){const x=w=>{const E=l[w];return E?y=>{!y||E(x(w+1),y,v,m)}:()=>{}};x(0)(f)}function r(f,v,m){const x=parseInt(v);if(!Ke(x))return["text",f];const b=m[x];if(!b)return["text",f];const w=b[1];if(!w)return["text",f];switch(b[0]){case"p":const E=w,y=ve.kind0.get(E),R=ue.nprofileEncode({pubkey:w});return y?["p",`@${In(y).name}`,R]:["p",`@${R}`,R];case"e":return["e",ue.neventEncode({id:w})];case"t":return["t",`#${w}`,w];default:return["text",f]}}function i(f,v){f.split(`
`).forEach(m=>{const x=[];o(m,Tn(),b=>{a(b,x,n.value)},(b,w,E)=>{let y=b;[".jpg",".jpeg",".png",".gif",".bmp"].some(R=>y.endsWith(R))?x.push(["img",y,y]):[".mov",".mp4",".av1"].some(R=>y.endsWith(R))?x.push(["video",y,y]):m===y?x.push(["website",y,y]):x.push(["url",y,y])}),x.push(["enter",""]),v.push(x)})}const p=z(()=>{const f=[];return i(n.value.content,f),f}),[d,_]=Me();function h(f,v){["e","p","url","website","img","video","t"].some(m=>f[0]===m)&&v.stopPropagation()}return(f,v)=>{const m=wt,x=Ot("RouterLink");return u(),g("div",{class:"w-full",ref_key:"target",ref:d},[S("div",null,[(u(!0),g(K,null,se(c(p),b=>(u(),g("div",{key:b,class:"w-full flex flex-wrap justify-start items-start"},[(u(!0),g(K,null,se(b,w=>(u(),g("span",{key:w[1],class:Re(["flex justify-start items-start",{"w-full":["e","website","img","video"].some(E=>w[0]===E)}]),onClick:E=>h(w,E)},[w[0]==="img"?(u(),g("div",Vl,[k(m,{class:"img w-full",src:w[1]},null,8,["src"])])):w[0]==="video"?(u(),g("div",Nl,[S("video",Ul,[S("source",{src:w[1]},null,8,jl)])])):w[0]==="website"?(u(),C(Il,{key:w[1],src:w[1]},null,8,["src"])):w[0]==="url"?(u(),g("a",{key:3,class:"break-words",href:w[2]},D(w[1]),9,Fl)):w[0]==="t"?(u(),C(x,{key:4,to:{name:"tag",params:{value:w[2]}}},{default:$(()=>[J(D(w[1]),1)]),_:2},1032,["to"])):w[0]==="naddr"?(u(),C(d1,{key:5,addr:w[1]},null,8,["addr"])):w[0]==="p"?(u(),C(f1,{key:6,value:w[2]},null,8,["value"])):w[0]==="e"?(u(),C(Uo,{key:7,event:c(n),value:w[1],tag:w[2]},null,8,["event","value","tag"])):w[0]==="url"?(u(),g("a",{key:8,class:"break-words block",style:{"word-break":"break-all","text-overflow":"ellipsis","word-wrap":"break-word"},href:w[2]},D(w[1]),9,Wl)):w[0]==="enter"?(u(),g("br",ql)):(u(),g("span",{key:10,class:"flex",style:{"table-layout":"fixed","word-break":"break-all","word-wrap":"break-word"},textContent:D(w[1].replace(" ","\xA0"))},null,8,Kl))],10,Hl))),128))]))),128))]),!e.disabledReply&&c(_)?(u(),C(Yt,{key:0,event:c(n)},null,8,["event"])):I("",!0)],512)}}});const Jl=H(Yl,[["__scopeId","data-v-00c108fc"]]);export{Jl as C,Jt as P,y1 as _,h1 as a,xa as b,ka as c,Yt as d,jt as e,Ao as f,Ds as g,Ts as h,Sa as i,go as j,wo as k,bo as l,xo as m,Oo as n,$a as o,Ea as p,za as q,Kt as r,g1 as u};
