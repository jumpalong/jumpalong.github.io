import{e as P}from"./event.44d09d76.js";import{_ as C}from"./PapawList.vue_vue_type_script_setup_true_lang.39874c13.js";import{f as S,bD as z,bz as D,n as l,bu as I,av as v,y as m,I as _,C as s,H as b,G as B,z as j,aL as w,O as F}from"./index.dd8c0757.js";import{g as N}from"./use.b9e0cb1d.js";import{e as U}from"./Content.2b6a65a8.js";import{u as V}from"./Scrollbar.206ae9b5.js";import{_ as $}from"./RelayInfoView.c41cbec3.js";import{_ as q}from"./Empty.2444c71c.js";const A={key:0,class:"py-20 flex items-center justify-center"},G={key:1,class:"h-40 flex justify-center items-center"},Y=S({__name:"PostList",props:{urls:null,pubkeys:null,filter:null,filters:null,pushEvent:null,active:{type:Boolean,default:!0},disabledLoad:{type:Boolean},disabledEmpty:{type:Boolean},limit:null,reverseSort:{type:Boolean},disabledReply:{type:Boolean}},emits:["update:pushEvent"],setup(i,{expose:L,emit:E}){const c=i;logger.for("home.vue").for("PostList.vue").info("\u8FDB\u5165PostList.vue");const{pubkeys:o,filter:u,filters:r,urls:f,active:p}=z(c);D(),logger.for("home.vue").for("PostList.vue").debug("defineProps > pubkey:",o);const y=l(()=>{const e=r!=null&&r.value?[...r.value]:[];return u!=null&&u.value&&e.push(u.value),o!=null&&o.value&&e.push(...o.value.map(t=>({kinds:[30023,1],authors:[t]}))),e}),k=l(()=>{var e;return[...(e=o==null?void 0:o.value)!=null?e:[],...y.value.map(t=>{var d;return(d=t.authors)!=null?d:[]}).flat(1)]}),a=l(()=>{const e={},t=U({filters:y.value,...e,addUrls:f==null?void 0:f.value,pubkeys:k.value,limit:c.limit});return c.reverseSort&&t.addStaffOfSortByCreateAt(),t}),R=V(a,p);I(()=>{var e;(e=a.value)==null||e.closeReq()});const n=l(()=>{var e;return(e=a.value)==null?void 0:e.getList()});E("update:pushEvent",e=>{var t;(t=a.value)==null||t.pushEvent(e)});const g=l(()=>{var e,t;return((e=a.value)==null?void 0:e.feat.loadBufferOpt.isLoading)||((t=a.value)==null?void 0:t.feat.refreshBufferOpt.isLoading)});L({postEvents:n,...R});const h=v(void 0);return N(h,{active:p!=null?p:v(!0)}),v(w()),(e,t)=>{const d=$,x=q;return m(),_("div",{ref_key:"divRef",ref:h},[!i.disabledLoad&&s(g)&&s(n)&&s(n).length===0?(m(),_("div",A,[b(d,{size:"medium"})])):!i.disabledEmpty&&!s(g)&&s(n)&&s(n).length===0?(m(),_("div",G,[b(x,{description:s(F)("empty_text"),size:"huge"},null,8,["description"])])):B("",!0),s(n)?(m(),j(C,{key:2,eventList:s(n),withPapawOptionsButtons:"",disabledReply:i.disabledReply,onEventDeletion:t[0]||(t[0]=O=>s(P)(O))},null,8,["eventList","disabledReply"])):B("",!0)],512)}}});export{Y as _};
