import{a9 as s,Y as f,a3 as r,a4 as u,a8 as o,aj as c}from"./index.77ea77b9.js";import{a as S,d as h,h as E}from"./getCacheStaff.5c77dca0.js";function b(){let e=0;return s({initialization(){this.beltline.feat.pushEvent=(a,i)=>{e===0&&(this.beltline.closeReq(),this.beltline.offLine(),e++,i[0]=a)}},feat:{useEvent(){return this.beltline.getList()[0]},onHasEventOnce(a){const i=this.useEvent();i?a(i):this.beltline.addStaff({push(t){a(t)}})}}})}function g(e){return logger.for("autoAddRelayurlByEventIdStaff").debug("eventId",e),s({initialization(){let a=!1;const i=this,t=f.createChild({describe:"\u83B7\u53D6id\u901A\u8FC7id"}).addFilter({ids:[e],limit:1}).addStaff(b()).addStaff(S()).addFilter({ids:[e],limit:1}).addStaff(r()).addStaff(u());if(t.feat.onHasEventOnce(n=>{if(a)return;const l=o(n.tags);i.beltline.addRelayUrls(l),i.beltline.addStaff(h(n.pubkey)),a=!0}),t.addStaff(E(e)),t.feat.withEvent()||(t.addExtends(f),t.feat.withEvent()))return;const d=()=>{t.feat.withEvent()||t.addReadUrl()};c(`getEventLineById:${e}`,()=>{d()})}})}export{g as a,b as c};
