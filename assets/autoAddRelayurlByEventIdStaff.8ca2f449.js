import{a8 as s,Y as f,a4 as d,a5 as u,a7 as o,ai as c}from"./index.0e420a7a.js";import{c as S,b as h,h as E}from"./getCacheStaff.ce5a8b54.js";function b(){let e=0;return s({initialization(){this.beltline.feat.pushEvent=(a,i)=>{e===0&&(this.beltline.closeReq(),this.beltline.offLine(),e++,i[0]=a)}},feat:{useEvent(){return this.beltline.getList()[0]},onHasEventOnce(a){const i=this.useEvent();i?a(i):this.beltline.addStaff({push(t){a(t)}})}}})}function g(e){return logger.for("autoAddRelayurlByEventIdStaff").debug("eventId",e),s({initialization(){let a=!1;const i=this,t=f.createChild({describe:"\u83B7\u53D6id\u901A\u8FC7id"}).addFilter({ids:[e],limit:1}).addStaff(b()).addStaff(S()).addFilter({ids:[e],limit:1}).addStaff(d()).addStaff(u());if(t.feat.onHasEventOnce(n=>{if(a)return;const r=o(n.tags);i.beltline.addRelayUrls(r),i.beltline.addStaff(h(n.pubkey)),a=!0}),t.addStaff(E(e)),t.feat.withEvent()||(t.addExtends(f),t.feat.withEvent()))return;const l=()=>{t.feat.withEvent()||t.addReadUrl()};c(`getEventLineById:${e}`,()=>{l()})}})}export{g as a,b as c};
