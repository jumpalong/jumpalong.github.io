import{d as pt,b as qt,R as fe}from"./getCacheStaff.6b7a4ad5.js";import{g as Kt,p as Yt}from"./user.553ed000.js";import{c as vt,c3 as Gt,f as M,u as _t,h as pe,d0 as Zt,g as Xt,n as S,q as ht,j as Q,bc as Se,c5 as Jt,e as me,d as J,a as Z,d1 as Qt,L as K,m as en,ac as tn,U as re,p as nn,d2 as on,bs as te,br as ae,av as ve,aq as R,y as u,I as w,aQ as z,C as c,z as C,G as I,D as G,F as A,H as x,co as ce,A as $,J as ne,d3 as mt,O as T,d4 as yt,bt as L,aZ as ee,Q as sn,S as Ee,d5 as se,d6 as ln,d7 as an,aG as rn,aF as cn,aL as wt,ax as D,bw as N,d8 as un,aP as W,cm as dn,a9 as fn,ae as we,a1 as pn,a2 as vn,as as gt,ar as _n,af as bt,al as Ce,ab as Pe,ad as hn,a7 as Re,Y as xt,ag as kt,ah as mn,_ as ie,d9 as yn,a8 as wn,da as gn,db as Ne,ao as ue,aH as $t,b$ as bn,aY as Oe,dc as xn,ak as Ue,cl as kn,M as zt,cy as $n,cz as zn,a_ as Be,ck as Sn,dd as je,de as En,df as Cn,dg as Pn}from"./index.ad5a3ab6.js";import{j as Me,k as St,c as Et,e as Ct,l as Te,m as Rn,n as On,o as Bn,b as Mn,p as Pt}from"./use.155929f4.js";import{g as Ae,e as Fe}from"./event.4ebd61ae.js";import{a as Rt,n as Ot,g as We}from"./nostr.e909604e.js";import{u as Tn,a as An,b as Dn}from"./Markdown.332b2c76.js";import{_ as Bt,a as In}from"./RelayAddButton.vue_vue_type_script_setup_true_lang.bccd7cd1.js";import{M as Ln}from"./MavonEditor.0cc50f9f.js";import{_ as Mt}from"./Tag.7971d92c.js";import{_ as De}from"./Space.e1756818.js";import{N as X}from"./Icon.32da1a7c.js";import{_ as Tt,a as Hn}from"./Drawer.vue_vue_type_script_setup_true_lang.eb3fbe5c.js";import{_ as Vn}from"./RelayInfoView.05c586ef.js";import{d as Nn,b as Un,c as jn,a as Fn}from"./createGarbageFilter.4351256a.js";import{a as Wn}from"./autoAddRelayurlByEventIdStaff.5eab6df5.js";import{c as qn,u as Kn}from"./ContentBlacklistView.de471595.js";import{u as Yn}from"./use-theme-vars.e5566cb3.js";import{a as Gn}from"./AddButton.vue_vue_type_script_setup_true_lang.67925d2e.js";import{S as Zn}from"./Scrollbar.d69db926.js";import{u as Xn}from"./naiveUi.3458fb2f.js";import{_ as Jn}from"./Popselect.1828687b.js";import{E as Qn}from"./Ellipsis.4fc54a07.js";import{_ as e1}from"./Empty.23d9a7d4.js";import{_ as t1}from"./NaddrLink.vue_vue_type_script_setup_true_lang.51b8f688.js";import{_ as n1}from"./UserLink.vue_vue_type_script_setup_true_lang.452cc1a1.js";const o1=vt("collapse-transition",{width:"100%"},[Gt()]),s1=Object.assign(Object.assign({},pe.props),{show:{type:Boolean,default:!0},appear:Boolean,collapsed:{type:Boolean,default:void 0}}),l1=M({name:"CollapseTransition",props:s1,inheritAttrs:!1,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n,mergedRtlRef:o}=_t(e),s=pe("CollapseTransition","-collapse-transition",o1,Zt,e,t),l=Xt("CollapseTransition",o,t),a=S(()=>e.collapsed!==void 0?e.collapsed:e.show),r=S(()=>{const{self:{bezier:p}}=s.value;return{"--n-bezier":p}}),i=n?ht("collapse-transition",void 0,r,e):void 0;return{rtlEnabled:l,mergedShow:a,mergedClsPrefix:t,cssVars:n?void 0:r,themeClass:i==null?void 0:i.themeClass,onRender:i==null?void 0:i.onRender}},render(){return Q(Jt,{appear:this.appear},{default:()=>{var e;if(!!this.mergedShow)return(e=this.onRender)===null||e===void 0||e.call(this),Q("div",Se({class:[`${this.mergedClsPrefix}-collapse-transition`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse-transition--rtl`,this.themeClass],style:this.cssVars},this.$attrs),this.$slots)}})}}),a1=vt("divider",`
 position: relative;
 display: flex;
 width: 100%;
 box-sizing: border-box;
 font-size: 16px;
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
`,[me("vertical",`
 margin-top: 24px;
 margin-bottom: 24px;
 `,[me("no-title",`
 display: flex;
 align-items: center;
 `)]),J("title",`
 display: flex;
 align-items: center;
 margin-left: 12px;
 margin-right: 12px;
 white-space: nowrap;
 font-weight: var(--n-font-weight);
 `),Z("title-position-left",[J("line",[Z("left",{width:"28px"})])]),Z("title-position-right",[J("line",[Z("right",{width:"28px"})])]),Z("dashed",[J("line",`
 background-color: #0000;
 height: 0px;
 width: 100%;
 border-style: dashed;
 border-width: 1px 0 0;
 `)]),Z("vertical",`
 display: inline-block;
 height: 1em;
 margin: 0 8px;
 vertical-align: middle;
 width: 1px;
 `),J("line",`
 border: none;
 transition: background-color .3s var(--n-bezier), border-color .3s var(--n-bezier);
 height: 1px;
 width: 100%;
 margin: 0;
 `),me("dashed",[J("line",{backgroundColor:"var(--n-color)"})]),Z("dashed",[J("line",{borderColor:"var(--n-color)"})]),Z("vertical",{backgroundColor:"var(--n-color)"})]),r1=Object.assign(Object.assign({},pe.props),{titlePlacement:{type:String,default:"center"},dashed:Boolean,vertical:Boolean}),i1=M({name:"Divider",props:r1,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=_t(e),o=pe("Divider","-divider",a1,Qt,e,t),s=S(()=>{const{common:{cubicBezierEaseInOut:a},self:{color:r,textColor:i,fontWeight:p}}=o.value;return{"--n-bezier":a,"--n-color":r,"--n-text-color":i,"--n-font-weight":p}}),l=n?ht("divider",void 0,s,e):void 0;return{mergedClsPrefix:t,cssVars:n?void 0:s,themeClass:l==null?void 0:l.themeClass,onRender:l==null?void 0:l.onRender}},render(){var e;const{$slots:t,titlePlacement:n,vertical:o,dashed:s,cssVars:l,mergedClsPrefix:a}=this;return(e=this.onRender)===null||e===void 0||e.call(this),Q("div",{role:"separator",class:[`${a}-divider`,this.themeClass,{[`${a}-divider--vertical`]:o,[`${a}-divider--no-title`]:!t.default,[`${a}-divider--dashed`]:s,[`${a}-divider--title-position-${n}`]:t.default&&n}],style:l},o?null:Q("div",{class:`${a}-divider__line ${a}-divider__line--left`}),!o&&t.default?Q(K,null,Q("div",{class:`${a}-divider__title`},this.$slots),Q("div",{class:`${a}-divider__line ${a}-divider__line--right`})):null)}}),qe=Symbol();function c1(e=on()){return en(qe,()=>{const t=new tn.exports.EventEmitter,s=re({emitRichTextEditBox:function(l,...a){t.emit(l,...a)},onRichTextEditBox:function(a,r){t.on(a,r)},id:e});return nn(qe,s),s},!0)}function ca(e,t,n){const o=te();ae(e,"dragenter",l=>{l.stopPropagation(),l.preventDefault()}),ae(e,"dragover",l=>{l.stopPropagation(),l.preventDefault()}),ae(e,"dragleave",l=>{l.stopPropagation(),l.preventDefault()}),ae(e,"drop",l=>{var a;l.stopPropagation(),l.preventDefault(),l.dataTransfer&&s((a=l.dataTransfer)==null?void 0:a.files)});function s(l){if(l.length>1)return o.info("\u4E00\u6B21\u53EA\u5141\u8BB8\u4E0A\u4F20\u4E00\u4E2A\u6587\u4EF6");var a=l[0];t(a)}}function ua(e,t){function n(o){var s=o.clipboardData&&o.clipboardData.items,l=null;if(s&&s.length){for(var a=0;a<s.length;a++)if(s[a].type.indexOf("image")!==-1){l=s[a].getAsFile();break}}!l||t(l)}ae(e,"paste",n)}const u1={class:"flex flex-col"},d1={key:0},f1={key:1,style:{"word-break":"break-all","text-overflow":"ellipsis","word-wrap":"break-word"}},p1=M({__name:"Markdown",props:{identifier:null,pubkey:null,event:null},setup(e){var d;const t=e,n=ve(t,"event"),o=S(()=>{if(!!t.pubkey&&!!t.identifier)return{identifier:t.identifier,pubkey:t.pubkey,kind:30023}}),{longFormContentOptions:s}=Tn(o),l=An(n),{showArticleDetails:a}=(d=Dn())!=null?d:{},r=R({bold:!1,italic:!1,header:!1,underline:!1,strikethrough:!1,mark:!1,superscript:!1,subscript:!1,quote:!1,ol:!1,ul:!1,link:!1,imagelink:!1,code:!1,table:!1,fullscreen:!0,readmodel:!0,htmlcode:!1,help:!1,undo:!1,redo:!1,trash:!1,save:!1,navigation:!1,alignleft:!1,aligncenter:!1,alignright:!1,subfield:!1,preview:!1}),i=S(()=>{var m;return(m=s.value)!=null?m:l.value});function p(m){yt.push({name:"tag",params:{value:m}})}return(m,h)=>{var k,b,g,E,_,P,B,O,j,H;const f=mt,v=Mt,y=De;return u(),w("div",u1,[z("div",null,[(k=c(i))!=null&&k.image?(u(),C(f,{key:0,class:"w-full rounded-md",imgProps:{style:{width:"100%"}},src:(b=c(i))==null?void 0:b.image},null,8,["src"])):I("",!0)]),z("div",null,[(g=c(i))!=null&&g.publishedAt?(u(),w("div",d1,[G(A(c(T)("published_at"))+": ",1),x(Bt,{secondTimestamp:(E=c(i))==null?void 0:E.publishedAt},null,8,["secondTimestamp"])])):I("",!0),(_=c(i))!=null&&_.title?(u(),w("h3",f1,A((P=c(i))==null?void 0:P.title),1)):I("",!0),z("p",null,A((H=(B=c(i))==null?void 0:B.summary)!=null?H:(j=(O=c(i))==null?void 0:O.content)==null?void 0:j.slice(0,100)),1)]),c(i)&&c(a)?(u(),w("div",{key:0,onClick:h[0]||(h[0]=ce(()=>{},["stop"]))},[x(y,null,{default:$(()=>[(u(!0),w(K,null,ne(c(i).hashtags,le=>(u(),C(v,{type:"info",onClick:Dl=>p(le)},{default:$(()=>[G(A(le),1)]),_:2},1032,["onClick"]))),256))]),_:1}),x(Ln,{ref:"md",class:"h-full mt-4 md",style:{},autofocus:!1,editable:!1,subfield:!1,defaultOpen:"preview",toolbars:r.value,"model-value":c(i).content},null,8,["toolbars","model-value"])])):I("",!0)])}}}),v1={},_1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},h1=z("path",{d:"M885.9 490.3c3.6-12 5.4-24.4 5.4-37c0-28.3-9.3-55.5-26.1-77.7c3.6-12 5.4-24.4 5.4-37c0-28.3-9.3-55.5-26.1-77.7c3.6-12 5.4-24.4 5.4-37c0-51.6-30.7-98.1-78.3-118.4a66.1 66.1 0 0 0-26.5-5.4H273v428h.3l85.8 310.8C372.9 889 418.9 924 470.9 924c29.7 0 57.4-11.8 77.9-33.4c20.5-21.5 31-49.7 29.5-79.4l-6-122.9h239.9c12.1 0 23.9-3.2 34.3-9.3c40.4-23.5 65.5-66.1 65.5-111c0-28.3-9.3-55.5-26.1-77.7zM112 132v364c0 17.7 14.3 32 32 32h65V100h-65c-17.7 0-32 14.3-32 32z",fill:"currentColor"},null,-1),m1=[h1];function y1(e,t){return u(),w("svg",_1,m1)}const w1=L(v1,[["render",y1]]),g1={},b1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},x1=z("path",{d:"M885.9 490.3c3.6-12 5.4-24.4 5.4-37c0-28.3-9.3-55.5-26.1-77.7c3.6-12 5.4-24.4 5.4-37c0-28.3-9.3-55.5-26.1-77.7c3.6-12 5.4-24.4 5.4-37c0-51.6-30.7-98.1-78.3-118.4a66.1 66.1 0 0 0-26.5-5.4H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h129.3l85.8 310.8C372.9 889 418.9 924 470.9 924c29.7 0 57.4-11.8 77.9-33.4c20.5-21.5 31-49.7 29.5-79.4l-6-122.9h239.9c12.1 0 23.9-3.2 34.3-9.3c40.4-23.5 65.5-66.1 65.5-111c0-28.3-9.3-55.5-26.1-77.7zM184 456V172h81v284h-81zm627.2 160.4H496.8l9.6 198.4c.6 11.9-4.7 23.1-14.6 30.5c-6.1 4.5-13.6 6.8-21.1 6.7a44.28 44.28 0 0 1-42.2-32.3L329 459.2V172h415.4a56.85 56.85 0 0 1 33.6 51.8c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4l21.9 19a56.76 56.76 0 0 1 19.6 43c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4l21.9 19a56.76 56.76 0 0 1 19.6 43c0 9.7-2.3 18.9-6.9 27.3l-14 25.5l21.9 19a56.76 56.76 0 0 1 19.6 43c0 19.1-11 37.5-28.8 48.4z",fill:"currentColor"},null,-1),k1=[x1];function $1(e,t){return u(),w("svg",b1,k1)}const z1=L(g1,[["render",$1]]),S1={},E1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},C1=z("path",{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7c0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 0 0-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 0 0 471 99.9c-52 0-98 35-111.8 85.1l-85.9 311h-.3v428h472.3c9.2 0 18.2-1.8 26.5-5.4c47.6-20.3 78.3-66.8 78.3-118.4c0-12.6-1.8-25-5.4-37c16.8-22.2 26.1-49.4 26.1-77.7c0-12.6-1.8-25-5.4-37c16.8-22.2 26.1-49.4 26.1-77.7c-.2-12.6-2-25.1-5.6-37.1zM112 528v364c0 17.7 14.3 32 32 32h65V496h-65c-17.7 0-32 14.3-32 32z",fill:"currentColor"},null,-1),P1=[C1];function R1(e,t){return u(),w("svg",E1,P1)}const O1=L(S1,[["render",R1]]),B1={},M1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},T1=z("path",{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7c0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 0 0-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 0 0 471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4c47.6-20.3 78.3-66.8 78.3-118.4c0-12.6-1.8-25-5.4-37c16.8-22.2 26.1-49.4 26.1-77.7c0-12.6-1.8-25-5.4-37c16.8-22.2 26.1-49.4 26.1-77.7c-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19l13.9 25.4a56.2 56.2 0 0 1 6.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19l13.9 25.4a56.2 56.2 0 0 1 6.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19l13.9 25.4a56.2 56.2 0 0 1 6.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0 1 42.2-32.3c7.6 0 15.1 2.2 21.1 6.7c9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z",fill:"currentColor"},null,-1),A1=[T1];function D1(e,t){return u(),w("svg",M1,A1)}const I1=L(B1,[["render",D1]]),L1={key:0},H1={key:1},ge=M({__name:"PapawReactionItem",props:{reaction:null,events:null,active:{type:Boolean},size:null},emits:["handelSwitchActive"],setup(e){return(t,n)=>{const o=X,s=Mt;return u(),C(s,{round:"",checked:e.active,onUpdateChecked:n[0]||(n[0]=()=>t.$emit("handelSwitchActive",e.reaction)),checkable:""},{icon:$(()=>[e.reaction==="+"||e.reaction==="-"?(u(),C(o,{key:0,size:e.size,color:e.active?"#fffff":void 0},{default:$(()=>[e.reaction==="+"?(u(),w("div",L1,[e.active?(u(),C(O1,{key:0})):(u(),C(I1,{key:1}))])):e.reaction==="-"?(u(),w("div",H1,[e.active?(u(),C(w1,{key:0})):(u(),C(z1,{key:1}))])):I("",!0)]),_:1},8,["size","color"])):(u(),w("span",{key:1,style:ee({fontSize:`${e.size*.9}px`})},A(e.reaction),5))]),default:$(()=>[z("span",null,A(e.active?e.events.length+1:e.events.length),1)]),_:1},8,["checked"])}}}),be=R(null);function da(){const e=sn(),t=S(()=>e.params.value),n=S(()=>Rt(t.value)),o=S(()=>{var s;return(s=n.value)==null?void 0:s.id});return S(()=>{var l,a;if(!o.value)return null;if(((l=be.value)==null?void 0:l.id)===o.value)return be.value;const s=Ae(o.value,{urls:new Set((a=n.value)==null?void 0:a.relays)});return s==null?void 0:s.feat.useEvent()})}function _e(){const e=Ee();return t=>{if(typeof t=="string"){e.push({name:"short-text-note",params:{value:t}});return}const n=se(t.id);be.value=t,e.push({name:"short-text-note",params:{value:Ot(t,n)}})}}var Ke;const At=typeof window<"u",V1=e=>typeof e=="string",q=()=>{},xe=At&&((Ke=window==null?void 0:window.navigator)==null?void 0:Ke.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function F(e){return typeof e=="function"?e():c(e)}function Dt(e,t){function n(...o){return new Promise((s,l)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(s).catch(l)})}return n}function N1(e,t={}){let n,o,s=q;const l=r=>{clearTimeout(r),s(),s=q};return r=>{const i=F(e),p=F(t.maxWait);return n&&l(n),i<=0||p!==void 0&&p<=0?(o&&(l(o),o=null),Promise.resolve(r())):new Promise((d,m)=>{s=t.rejectOnCancel?m:d,p&&!o&&(o=setTimeout(()=>{n&&l(n),o=null,d(r())},p)),n=setTimeout(()=>{o&&l(o),o=null,d(r())},i)})}}function U1(e,t=!0,n=!0,o=!1){let s=0,l,a=!0,r=q,i;const p=()=>{l&&(clearTimeout(l),l=void 0,r(),r=q)};return m=>{const h=F(e),f=Date.now()-s,v=()=>i=m();return p(),h<=0?(s=Date.now(),v()):(f>h&&(n||!a)?(s=Date.now(),v()):t&&(i=new Promise((y,k)=>{r=o?k:y,l=setTimeout(()=>{s=Date.now(),a=!0,y(v()),p()},Math.max(0,h-f))})),!n&&!l&&(l=setTimeout(()=>a=!0,h)),a=!1,i)}}const Y={mounted:"mounted",updated:"updated",unmounted:"unmounted"};function he(e){return ln()?(an(e),!0):!1}function j1(e,t=200,n={}){return Dt(N1(t,n),e)}function F1(e,t=200,n=!1,o=!0,s=!1){return Dt(U1(t,n,o,s),e)}function W1(e){return typeof e=="function"?S(e):R(e)}function q1(e,t=!0){rn()?cn(e):t?e():wt(e)}function V(e){var t;const n=F(e);return(t=n==null?void 0:n.$el)!=null?t:n}const oe=At?window:void 0;function U(...e){let t,n,o,s;if(V1(e[0])||Array.isArray(e[0])?([n,o,s]=e,t=oe):[t,n,o,s]=e,!t)return q;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const l=[],a=()=>{l.forEach(d=>d()),l.length=0},r=(d,m,h,f)=>(d.addEventListener(m,h,f),()=>d.removeEventListener(m,h,f)),i=D(()=>[V(t),F(s)],([d,m])=>{a(),d&&l.push(...n.flatMap(h=>o.map(f=>r(d,h,f,m))))},{immediate:!0,flush:"post"}),p=()=>{i(),a()};return he(p),p}let Ye=!1;function Ge(e,t,n={}){const{window:o=oe,ignore:s=[],capture:l=!0,detectIframe:a=!1}=n;if(!o)return;xe&&!Ye&&(Ye=!0,Array.from(o.document.body.children).forEach(h=>h.addEventListener("click",q)));let r=!0;const i=h=>s.some(f=>{if(typeof f=="string")return Array.from(o.document.querySelectorAll(f)).some(v=>v===h.target||h.composedPath().includes(v));{const v=V(f);return v&&(h.target===v||h.composedPath().includes(v))}}),d=[U(o,"click",h=>{const f=V(e);if(!(!f||f===h.target||h.composedPath().includes(f))){if(h.detail===0&&(r=!i(h)),!r){r=!0;return}t(h)}},{passive:!0,capture:l}),U(o,"pointerdown",h=>{const f=V(e);f&&(r=!h.composedPath().includes(f)&&!i(h))},{passive:!0}),a&&U(o,"blur",h=>{var f;const v=V(e);((f=o.document.activeElement)==null?void 0:f.tagName)==="IFRAME"&&!(v!=null&&v.contains(o.document.activeElement))&&t(h)})].filter(Boolean);return()=>d.forEach(h=>h())}Y.mounted+"",Y.unmounted+"";const K1=e=>typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0;function Ze(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:s=oe,eventName:l="keydown",passive:a=!1}=o,r=K1(t);return U(s,l,p=>{r(p)&&n(p)},a)}var Y1=Object.defineProperty,Xe=Object.getOwnPropertySymbols,G1=Object.prototype.hasOwnProperty,Z1=Object.prototype.propertyIsEnumerable,Je=(e,t,n)=>t in e?Y1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,X1=(e,t)=>{for(var n in t||(t={}))G1.call(t,n)&&Je(e,n,t[n]);if(Xe)for(var n of Xe(t))Z1.call(t,n)&&Je(e,n,t[n]);return e};Y.mounted+"";const J1=500;function Qe(e,t,n){var o,s;const l=S(()=>V(e));let a;function r(){a&&(clearTimeout(a),a=void 0)}function i(d){var m,h,f,v;((m=n==null?void 0:n.modifiers)==null?void 0:m.self)&&d.target!==l.value||(r(),(h=n==null?void 0:n.modifiers)!=null&&h.prevent&&d.preventDefault(),(f=n==null?void 0:n.modifiers)!=null&&f.stop&&d.stopPropagation(),a=setTimeout(()=>t(d),(v=n==null?void 0:n.delay)!=null?v:J1))}const p={capture:(o=n==null?void 0:n.modifiers)==null?void 0:o.capture,once:(s=n==null?void 0:n.modifiers)==null?void 0:s.once};U(l,"pointerdown",i,p),U(l,"pointerup",r,p),U(l,"pointerleave",r,p)}const Q1={[Y.mounted](e,t){typeof t.value=="function"?Qe(e,t.value,{modifiers:t.modifiers}):Qe(e,...t.value)}},ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$e="__vueuse_ssr_handlers__";ke[$e]=ke[$e]||{};ke[$e];function It(e,t=!1){const n=R(),o=()=>n.value=Boolean(e());return o(),q1(o,t),n}function eo(e,t={}){const n=t?t.delayEnter:0,o=t?t.delayLeave:0,s=R(!1);let l;const a=r=>{const i=r?n:o;l&&(clearTimeout(l),l=void 0),i?l=setTimeout(()=>s.value=r,i):s.value=r};return window&&(U(e,"mouseenter",()=>a(!0),{passive:!0}),U(e,"mouseleave",()=>a(!1),{passive:!0})),s}Y.mounted+"";var et=Object.getOwnPropertySymbols,to=Object.prototype.hasOwnProperty,no=Object.prototype.propertyIsEnumerable,oo=(e,t)=>{var n={};for(var o in e)to.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&et)for(var o of et(e))t.indexOf(o)<0&&no.call(e,o)&&(n[o]=e[o]);return n};function so(e,t,n={}){const o=n,{window:s=oe}=o,l=oo(o,["window"]);let a;const r=It(()=>s&&"ResizeObserver"in s),i=()=>{a&&(a.disconnect(),a=void 0)},p=D(()=>V(e),m=>{i(),r.value&&s&&m&&(a=new ResizeObserver(t),a.observe(m,l))},{immediate:!0,flush:"post"}),d=()=>{i(),p()};return he(d),{isSupported:r,stop:d}}function lo(e,t={width:0,height:0},n={}){const{window:o=oe,box:s="content-box"}=n,l=S(()=>{var i,p;return(p=(i=V(e))==null?void 0:i.namespaceURI)==null?void 0:p.includes("svg")}),a=R(t.width),r=R(t.height);return so(e,([i])=>{const p=s==="border-box"?i.borderBoxSize:s==="content-box"?i.contentBoxSize:i.devicePixelContentBoxSize;if(o&&l.value){const d=V(e);if(d){const m=o.getComputedStyle(d);a.value=parseFloat(m.width),r.value=parseFloat(m.height)}}else if(p){const d=Array.isArray(p)?p:[p];a.value=d.reduce((m,{inlineSize:h})=>m+h,0),r.value=d.reduce((m,{blockSize:h})=>m+h,0)}else a.value=i.contentRect.width,r.value=i.contentRect.height},n),D(()=>V(e),i=>{a.value=i?t.width:0,r.value=i?t.height:0}),{width:a,height:r}}Y.mounted+"";function tt(e,{window:t=oe,scrollTarget:n}={}){const o=R(!1),s=()=>{if(!t)return;const l=t.document,a=V(e);if(!a)o.value=!1;else{const r=a.getBoundingClientRect();o.value=r.top<=(t.innerHeight||l.documentElement.clientHeight)&&r.left<=(t.innerWidth||l.documentElement.clientWidth)&&r.bottom>=0&&r.right>=0}};return D(()=>V(e),()=>s(),{immediate:!0,flush:"post"}),t&&U(n||t,"scroll",s,{capture:!1,passive:!0}),o}Y.mounted+"";const nt=1;function ze(e,t={}){const{throttle:n=0,idle:o=200,onStop:s=q,onScroll:l=q,offset:a={left:0,right:0,top:0,bottom:0},eventListenerOptions:r={capture:!1,passive:!0},behavior:i="auto"}=t,p=R(0),d=R(0),m=S({get(){return p.value},set(_){f(_,void 0)}}),h=S({get(){return d.value},set(_){f(void 0,_)}});function f(_,P){var B,O,j;const H=F(e);!H||(j=H instanceof Document?document.body:H)==null||j.scrollTo({top:(B=F(P))!=null?B:h.value,left:(O=F(_))!=null?O:m.value,behavior:F(i)})}const v=R(!1),y=re({left:!0,right:!1,top:!0,bottom:!1}),k=re({left:!1,right:!1,top:!1,bottom:!1}),b=_=>{!v.value||(v.value=!1,k.left=!1,k.right=!1,k.top=!1,k.bottom=!1,s(_))},g=j1(b,n+o),E=_=>{const P=_.target===document?_.target.documentElement:_.target,B=P.scrollLeft;k.left=B<p.value,k.right=B>d.value,y.left=B<=0+(a.left||0),y.right=B+P.clientWidth>=P.scrollWidth-(a.right||0)-nt,p.value=B;let O=P.scrollTop;_.target===document&&!O&&(O=document.body.scrollTop),k.top=O<d.value,k.bottom=O>d.value,y.top=O<=0+(a.top||0),y.bottom=O+P.clientHeight>=P.scrollHeight-(a.bottom||0)-nt,d.value=O,v.value=!0,g(_),l(_)};return U(e,"scroll",n?F1(E,n,!0,!1):E,r),U(e,"scrollend",b,r),{x:m,y:h,isScrolling:v,arrivedState:y,directions:k}}var ao=Object.defineProperty,ro=Object.defineProperties,io=Object.getOwnPropertyDescriptors,ot=Object.getOwnPropertySymbols,co=Object.prototype.hasOwnProperty,uo=Object.prototype.propertyIsEnumerable,st=(e,t,n)=>t in e?ao(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lt=(e,t)=>{for(var n in t||(t={}))co.call(t,n)&&st(e,n,t[n]);if(ot)for(var n of ot(t))uo.call(t,n)&&st(e,n,t[n]);return e},fo=(e,t)=>ro(e,io(t));function at(e,t,n={}){var o,s;const l=(o=n.direction)!=null?o:"bottom",a=re(ze(e,fo(lt({},n),{offset:lt({[l]:(s=n.distance)!=null?s:0},n.offset)})));D(()=>a.arrivedState[l],async r=>{var i,p;if(r){const d=F(e),m={height:(i=d==null?void 0:d.scrollHeight)!=null?i:0,width:(p=d==null?void 0:d.scrollWidth)!=null?p:0};await t(a),n.preserveScrollPosition&&d&&wt(()=>{d.scrollTo({top:d.scrollHeight-m.height,left:d.scrollWidth-m.width})})}})}Y.mounted+"";function rt(e,t,n={}){const{root:o,rootMargin:s="0px",threshold:l=.1,window:a=oe}=n,r=It(()=>a&&"IntersectionObserver"in a);let i=q;const p=r.value?D(()=>({el:V(e),root:V(o)}),({el:m,root:h})=>{if(i(),!m)return;const f=new IntersectionObserver(t,{root:h,rootMargin:s,threshold:l});f.observe(m),i=()=>{f.disconnect(),i=q}},{immediate:!0,flush:"post"}):q,d=()=>{i(),p()};return he(d),{isSupported:r,stop:d}}Y.mounted+"";var po=Object.defineProperty,vo=Object.defineProperties,_o=Object.getOwnPropertyDescriptors,it=Object.getOwnPropertySymbols,ho=Object.prototype.hasOwnProperty,mo=Object.prototype.propertyIsEnumerable,ct=(e,t,n)=>t in e?po(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yo=(e,t)=>{for(var n in t||(t={}))ho.call(t,n)&&ct(e,n,t[n]);if(it)for(var n of it(t))mo.call(t,n)&&ct(e,n,t[n]);return e},wo=(e,t)=>vo(e,_o(t));Y.mounted+"";function Lt(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientHeight<e.scrollHeight||t.overflowY==="auto"&&e.clientWidth<e.scrollWidth)return!0;{const n=e.parentNode;return!n||n.tagName==="BODY"?!1:Lt(n)}}function go(e){const t=e||window.event,n=t.target;return Lt(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}function bo(e,t=!1){const n=R(t);let o=null,s;D(W1(e),r=>{if(r){const i=r;s=i.style.overflow,n.value&&(i.style.overflow="hidden")}},{immediate:!0});const l=()=>{const r=F(e);!r||n.value||(xe&&(o=U(r,"touchmove",i=>{go(i)},{passive:!1})),r.style.overflow="hidden",n.value=!0)},a=()=>{const r=F(e);!r||!n.value||(xe&&(o==null||o()),r.style.overflow=s,n.value=!1)};return he(a),S({get(){return n.value},set(r){r?l():a()}})}const xo=()=>{let e=!1;const t=R(!1);return(n,o)=>{if(t.value=o.value,e)return;e=!0;const s=bo(n,o.value);D(t,l=>s.value=l)}};xo();const ko=M({__name:"LazyItem",props:{show:{type:[null,Boolean],default:null},minHeight:{default:0},transitionDuration:{default:500},disabled:{type:Boolean},delay:{default:500}},emits:["update:show"],setup(e,{emit:t}){const n=e,{transitionDuration:o,delay:s,disabled:l}=N(n),a=R(),r=R(),i=n.show===void 0||n.show===null?Me(s.value,{target:a})[1]:ve(n,"show"),{transitionActive:p,safeActive:d,duration:m,show:h,hidden:f,transitioning:v}=St(o);D(i,b=>{b?h():f(),t("update:show",b)});const{height:y}=un(r),k=R(0);return D(y,b=>{if(b){k.value=b;return}else return}),(b,g)=>{const E=Vn;return u(),w("div",{ref_key:"wrap",ref:a,class:"overflow-hidden relative",style:ee({minHeight:typeof e.minHeight=="number"?`${e.minHeight}px`:e.minHeight,height:c(p)?`${k.value}px`:"0px",transition:`height ${c(m)}ms ease-out`})},[e.minHeight>100&&(!c(d)||c(v))?(u(),w("div",{key:0,class:"absolute left-0 right-0 top-0 bottom-0 flex items-center justify-center",style:ee({opacity:c(p)?0:1,transition:`opacity ${c(m)}ms ease-out`})},[x(E,{size:"medium"})],4)):I("",!0),c(d)?(u(),w("div",{key:1,ref_key:"target",ref:r,style:ee({opacity:c(p)?1:0,transition:`opacity ${c(m)}ms ease-in`})},[W(b.$slots,"default")],4)):I("",!0)],4)}}}),$o=M({__name:"LazyItemDisabled",props:{show:{type:[null,Boolean],default:null},minHeight:{default:0},transitionDuration:{default:500},disabled:{type:Boolean},delay:{default:500}},setup(e){const t=e;return(n,o)=>e.disabled?W(n.$slots,"default",{key:0}):(u(),C(ko,dn(Se({key:1},t)),{default:$(()=>[W(n.$slots,"default")]),_:3},16))}}),[fa,zo]=Et(e=>e),[pa,So]=Et(e=>{const t=S(()=>{var n,o;return new Set(((o=(n=e.value)==null?void 0:n.tags.filter(s=>s[0]==="e"&&s[1]&&(!s[3]||s[3]==="reply")))!=null?o:[]).map(s=>s[1]))});return{focusEvent:e,parents:t}}),Eo={},Co={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},Po=z("path",{d:"M11.61 29.92a1 1 0 0 1-.6-1.07L12.83 17H8a1 1 0 0 1-1-1.23l3-13A1 1 0 0 1 11 2h10a1 1 0 0 1 .78.37a1 1 0 0 1 .2.85L20.25 11H25a1 1 0 0 1 .9.56a1 1 0 0 1-.11 1l-13 17A1 1 0 0 1 12 30a1.09 1.09 0 0 1-.39-.08zM17.75 13l2-9H11.8L9.26 15h5.91l-1.59 10.28L23 13z",fill:"currentColor"},null,-1),Ro=[Po];function Oo(e,t){return u(),w("svg",Co,Ro)}const Bo=L(Eo,[["render",Oo]]);function ut(e){const{filters:t=[],include:n=new Set(["ids","#e","authors","#p"])}=e!=null?e:{};let o=!1;return fn({async initialization(){const s=[...this.beltline.getFilters(),...t],l=We(["authors","#p"].filter(r=>n.has(r)),s);for(const r of l){if(await we(1e3),o)return;this.beltline.addStaff(pt(r))}const a=We(["ids","#e"].filter(r=>n.has(r)),s);for(const r of a){if(await we(1e3),o)return;this.beltline.addStaff(Wn(r))}},feat:{stopAutoAddRelayUrlByFilter(){o=!0}}})}function Ht(e){return pn(`createShortTextEventBeltline:${JSON.stringify(e.filters)}`,()=>{var s;const t=(s=e.limit)!=null?s:10,n=e.filters,o=vn(gt(e,{describe:"\u83B7\u53D6\u77ED\u6D88\u606F\u5217\u8868"})).addStaff(qt()).addStaff(qn()).addStaff(Nn()).addStaff(Un()).addStaff(jn(n,t)).addStaff(Fn()).addStaffOfReverseSortByCreateAt();if(o.addReadUrl().addRelayUrls(e.urls).addRelayUrls(e.addUrls),e.urls||o.addStaff(ut({filters:n})),e.pubkeys)for(const l of e.pubkeys)o.addStaff(pt(l,{urls:e.urls}));else o.addStaff(ut({filters:n}));return o.feat.firstLoad(),o},{useLocalStorage:!1})}const de=re(_n("reactions",["+","-"]).value),dt=new Set(de),Ie={...bt,duration:1e3*60*60*24};async function Mo(e,t,n){dt.has(e)||(dt.add(e),de.push(e));let o=t.tags.filter(r=>r.length>=2&&(r[0]=="e"||r[0]=="p"||r[0]=="r"));o.push(["e",t.id]),o.push(["p",t.pubkey]);const s=new Set(Pe.getWriteList()),l=fe.kind10002.get(t.pubkey);if(l){const{writeUrl:r}=hn(l.tags);Re(s,r)}const a=await xt.publish({content:e,kind:7,tags:o},s,n);!a||kt(Le(e,t.id),a.id,Ie)}function To(e,t){if(t.eventId){const n=Le(e,t.eventId),o=Ce(n,Ie);o&&Fe(o,t),mn(n)}else t.likeId&&Fe(t.likeId,t)}function Ao(e,t){const n=Le(e,t);return Ce(n,Ie)!==null}function Le(e,t){return`${e}:${t}`}function Do(e){const t=e.event,n=se(t.id);return Ht(gt(e,{filters:[{"#e":[e.event.id],kinds:[7]}],addUrls:new Set(n),limit:30})).addStaff({initialization(){this.beltline.feat.reactionMap={}},push(s){var a;const l=this.beltline.feat.reactionMap;((a=l[s.content])!=null?a:l[s.content]=[]).push(s)},feat:{getReactionMap(){return this.beltline.feat.reactionMap}}})}const Io={},Lo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 496 512"},Ho=z("path",{d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200s-89.7 200-200 200zm84-143.4c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.6-11.5-33.8-3.1c-10.2 8.5-11.5 23.6-3.1 33.8c30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8c-10.2-8.4-25.3-7.1-33.8 3.1zM136.5 211c7.7-13.7 19.2-21.6 31.5-21.6s23.8 7.9 31.5 21.6l9.5 17c2.1 3.7 6.2 4.7 9.3 3.7c3.6-1.1 6-4.5 5.7-8.3c-3.3-42.1-32.2-71.4-56-71.4s-52.7 29.3-56 71.4c-.3 3.7 2.1 7.2 5.7 8.3c3.4 1.1 7.4-.5 9.3-3.7l9.5-17zM328 152c-23.8 0-52.7 29.3-56 71.4c-.3 3.7 2.1 7.2 5.7 8.3c3.5 1.1 7.4-.5 9.3-3.7l9.5-17c7.7-13.7 19.2-21.6 31.5-21.6s23.8 7.9 31.5 21.6l9.5 17c2.1 3.7 6.2 4.7 9.3 3.7c3.6-1.1 6-4.5 5.7-8.3c-3.3-42.1-32.2-71.4-56-71.4z",fill:"currentColor"},null,-1),Vo=[Ho];function No(e,t){return u(),w("svg",Lo,Vo)}const Uo=L(Io,[["render",No]]),jo=M({__name:"PapawReaction",props:{event:null,size:null},setup(e){const n=ve(e,"event"),o=Ct(),s=20,[l,a]=Te(()=>Do({event:n.value,limit:s})),r=S(()=>{var v,y;return(y=(v=l.value)==null?void 0:v.feat.getReactionMap())!=null?y:{}}),i=R({});de.forEach(v=>{i.value[v]=Ao(v,n.value.id)});function p(v){i.value[v]?To(v,{eventId:n.value.id,onOK:o}):Mo(v,n.value,{onOK:o}),i.value[v]=!i.value[v]}const d=R(!1),m=S(()=>Object.entries(r.value)),h=S(()=>Object.entries(i.value).filter(([v,y])=>y&&!r.value[v]).map(([v,y])=>[v,[]])),f=S(()=>[...m.value,...h.value].sort((v,y)=>v[1].length-y[1].length).slice(0,3));return(v,y)=>{const k=X,b=ie,g=De;return u(),w("div",{ref_key:"target",ref:a},[x(g,{class:"flex items-center justify-center"},{default:$(()=>[(u(!0),w(K,null,ne(c(f),([E,_])=>(u(),C(ge,{onHandelSwitchActive:p,size:e.size,events:_,reaction:E,active:i.value[E]},null,8,["size","events","reaction","active"]))),256)),x(b,{circle:"",quaternary:"",onClick:y[0]||(y[0]=()=>d.value=!d.value)},{default:$(()=>[x(k,{size:e.size},{default:$(()=>[x(Uo)]),_:1},8,["size"])]),_:1}),x(Tt,{show:d.value,"onUpdate:show":y[1]||(y[1]=E=>d.value=E)},{default:$(()=>[x(g,{class:"h-full w-full flex items-center flex-wrap"},{default:$(()=>[(u(!0),w(K,null,ne(c(de),E=>{var _;return u(),C(ge,{onHandelSwitchActive:p,size:e.size,events:(_=c(r)[E])!=null?_:[],reaction:E,active:i.value[E]},null,8,["size","events","reaction","active"])}),256))]),_:1})]),_:1},8,["show"])]),_:1})],512)}}}),Fo={},Wo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},qo=z("path",{d:"M464 512a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm200 0a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm-400 0a48 48 0 1 0 96 0a48 48 0 1 0-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 0 0-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 0 0-142 96.5c-40.9 41.3-73 89.3-95.2 142.8c-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 0 0 112 714v152a46 46 0 0 0 46 46h152.1A449.4 449.4 0 0 0 510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 0 0 142.8-95.2c41.3-40.9 73.8-88.7 96.5-142c23.6-55.2 35.6-113.9 35.9-174.5c.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8c69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9c44.6 18.7 84.6 45.6 119 80c34.3 34.3 61.3 74.4 80 119c19.4 46.2 29.1 95.2 28.9 145.8c-.6 99.6-39.7 192.9-110.1 262.7z",fill:"currentColor"},null,-1),Ko=[qo];function Yo(e,t){return u(),w("svg",Wo,Ko)}const Go=L(Fo,[["render",Yo]]),Zo={class:"ml-2"},Xo={key:0},Jo=M({__name:"PapawReplyButton",props:{event:null,size:null},setup(e){const t=e,{event:n}=N(t),o=_e();function s(){o(n.value)}const l=20,a=S(()=>se(n.value.id)),[r,i]=Te(()=>Ht({filters:[{"#e":[n.value.id],kinds:[1,30023]}],addUrls:new Set(a.value),limit:l})),p=S(()=>{var d,m;return(m=(d=r.value)==null?void 0:d.getList().length)!=null?m:0});return(d,m)=>{const h=X,f=ie;return u(),w("div",{ref_key:"target",ref:i},[x(f,{text:"",onClick:s},{default:$(()=>[x(h,{size:e.size},{default:$(()=>[x(Go)]),_:1},8,["size"]),z("span",Zo,[G(A(c(p))+" ",1),c(p)>=l?(u(),w("span",Xo,"+")):I("",!0)])]),_:1})],512)}}}),Qo={class:"flex items-center justify-between"},es=M({__name:"PapawOptionsButtons",props:{event:null,deleteEvent:null},setup(e){const t=e,{event:n,deleteEvent:o}=N(t),s=te();Ct(),Yn();const l=R(18);return(a,r)=>{const i=X,p=ie,d=De;return u(),w("div",Qo,[x(d,{class:"flex justify-around py-4 box-border"},{default:$(()=>[x(Jo,{size:l.value,event:c(n)},null,8,["size","event"]),x(p,{text:"",onClick:r[0]||(r[0]=()=>c(s).error(c(T)("message.not_implemented")))},{default:$(()=>[x(i,{size:l.value},{default:$(()=>[x(Bo)]),_:1},8,["size"])]),_:1})]),_:1}),x(jo,{size:l.value,event:c(n)},null,8,["size","event"])])}}}),Vt="__color_map",Nt={...bt};var ft;const ye=(ft=Ce(Vt,Nt))!=null?ft:{};function ts(e){const t=ye[e];if(t)return t;const n=yn();return ye[e]=n,kt(Vt,ye,Nt),n}function Ut(e){var n;const t=e.tags.filter(o=>(o[0]==="e"||o[0]==="p")&&o[2]).map(o=>o[2]);return Re(wn(e.tags),(n=se(e.id))!=null?n:[],t)}const ns=M({__name:"PapawSourceUrl",props:{event:null},setup(e){const n=ve(e,"event"),o=S(()=>se(n.value.id)),s=R(!1),l=Ee();function a(){l.push({name:"relays"})}return(r,i)=>{const p=ie,d=l1;return u(),w(K,null,[z("div",{class:"flex",onClick:i[0]||(i[0]=()=>s.value=!s.value)},[(u(!0),w(K,null,ne(c(o),m=>(u(),w("div",{class:"h-2 w-2 rounded-full mr-1",style:ee({backgroundColor:c(ts)(m)})},null,4))),256))]),x(Tt,{show:s.value,"onUpdate:show":i[1]||(i[1]=m=>s.value=m),height:"100%",closable:""},{header:$(()=>[x(d,{show:c(Pe).hasChange()},{default:$(()=>[x(p,{onClick:a,type:"primary"},{default:$(()=>[G(A(c(T)("save")),1)]),_:1})]),_:1},8,["show"])]),default:$(()=>[x(Zn,null,{default:$(()=>{var m;return[x(Gn,{urls:(m=c(o))!=null?m:[],title:""},{right:$(({url:h})=>[x(In,{url:h},null,8,["url"])]),_:1},8,["urls"])]}),_:1})]),_:1},8,["show"])],64)}}}),os={},ss={class:"pl-1 box-border",style:{borderLeft:"2px solid red"}};function ls(e,t){return u(),w("div",ss,[W(e.$slots,"default")])}const jt=L(os,[["render",ls]]);function He(){const{error:e,success:t,info:n}=te();return function(s){xt.publish(s,Pe.getWriteList(),{onOK({url:l,ok:a}){a?t(`\u5DF2\u6210\u529F\u63A8\u9001\u5230${l}`):e(`\u63A8\u9001\u5230'${l}'\u5931\u8D25`)}}),n("\u5DF2\u7ECF\u53D1\u9001\u63A8\u8350\u7528\u6237\u8BF7\u6C42")}}function as(){const{error:e,success:t,info:n}=te(),o=He();return function(l){const a=fe.kind10002.get(l);a?o(a):e("\u76EE\u524D\u8FD8\u6CA1\u6709\u6B64\u7528\u6237\u7684\u4FE1\u606F")}}function rs(){const{error:e,success:t,info:n}=te(),o=He();return function(l){const a=fe.kind0.get(l);a?o(a):e("\u76EE\u524D\u8FD8\u6CA1\u6709\u6B64\u7528\u6237\u7684\u5143\u6570\u636E")}}const is=z("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},[z("g",{fill:"none"},[z("path",{d:"M6.75 10a1.75 1.75 0 1 1-3.5 0a1.75 1.75 0 0 1 3.5 0zm5 0a1.75 1.75 0 1 1-3.5 0a1.75 1.75 0 0 1 3.5 0zM15 11.75a1.75 1.75 0 1 0 0-3.5a1.75 1.75 0 0 0 0 3.5z",fill:"currentColor"})])],-1),cs=M({__name:"MoreIcon",setup(e){return(t,n)=>(u(),C(c(X),null,{default:$(()=>[is]),_:1}))}}),us=M({__name:"SMSButton",props:{event:null,deleteEvent:null,show:{type:Boolean}},setup(e){const t=e,n=te(),o=c1(),{event:s,deleteEvent:l}=N(t),a=R(""),{info:r}=te(),i=Xn(),p=Rn(t,"show"),d=He(),m=as(),h=rs(),f=_e(),v={close:()=>{p.value=!1},editArticle:()=>{const _=Ne(s.value);if(!_){n.info("Identifier not found");return}yt.push({name:"markdown-editor",params:{value:_}})},deleteEvent:()=>{l.value(s.value.id),r(T("message.you_have_sent_a_delete_request"))},joinTheBlacklist(){k({title:T("hide_list"),ignoreContent:s.value.content})},copyNevent(){const _=Ot(s.value);i(_)},copyNote(){const _=ue.noteEncode(s.value.id);i(_)},copyNaddr(){const _=Ne(s.value);if(!_){n.info("Identifier not found");return}i(_)},copyHexPubkey(){i(s.value.pubkey)},recommendUser(){m(s.value.pubkey)},recommendEvent(){d(s.value)},recommendUserMetadata(){h(s.value.pubkey)},pushShortTextNote(){f(s.value)},reply(){o.emitRichTextEditBox("reply",s.value)},mention(){o.emitRichTextEditBox("mention",s.value)}},y=_=>{const P=v[_];P||n.error("Not found"),P()},{addRule:k}=Kn(),b=gn(),g=S(()=>[{label:T("close"),value:"close",key:"close"},...s.value.pubkey===b.value?[...s.value.kind===30023?[{label:T("edit"),value:"editArticle",key:"editArticle"}]:[],{label:T("delete_event"),value:"deleteEvent",key:"deleteEvent"}]:[{label:T("hide"),value:"joinTheBlacklist",key:"joinTheBlacklist"}],{label:T("open"),value:"pushShortTextNote",key:"pushShortTextNote"},{label:T("reply"),value:"reply",key:"reply"},{label:T("mention"),value:"mention",key:"mention"},{label:`${T("copy")} Nevent`,value:"copyNevent",key:"copyNevent"},{label:`${T("copy")} Note`,value:"copyNote",key:"copyNote"},...s.value.kind>=3e4&&s.value.kind<4e4?[{label:`${T("copy")} Naddr`,value:"copyNaddr",key:"copyNaddr"}]:[],{label:`${T("copy")} Hex pubkey`,value:"copyHexPubkey",key:"copyHexPubkey"},{label:T("recommend_user"),value:"recommendUser",key:"recommendUser"},{label:T("recommend_event"),value:"recommendEvent",key:"recommendEvent"},{label:T("recommend_metadata"),value:"recommendUserMetadata",key:"recommendUserMetadata"}]),E=R(null);return On(p),(_,P)=>{const B=X,O=ie,j=Jn;return u(),w("div",null,[x(j,{ref_key:"target",ref:E,onUpdateValue:y,value:a.value,"onUpdate:value":P[1]||(P[1]=H=>a.value=H),options:c(g),trigger:"manual",show:c(p)},{default:$(()=>[x(O,{quaternary:"",circle:"",onClick:P[0]||(P[0]=()=>p.value=!c(p))},{default:$(()=>[x(B,null,{default:$(()=>[x(cs)]),_:1})]),_:1})]),_:1},8,["value","options","show"])])}}}),ds=""+new URL("profile-2-400x400.aa75e465.png",import.meta.url).href,fs=["src"],ps={class:"flex-grow flex-shrink"},vs={class:"ml-4"},_s={class:"flex-grow-0 flex-shrink-0"},hs=M({__name:"UserInfo",props:{pubkey:null,created_at:null,event:null},setup(e){const t=e,{pubkey:n,created_at:o}=N(t),s=S(()=>t.event&&Ut(t.event)),[l,a,r]=Te(()=>Kt(n.value,{urls:s.value}).feat.useMetadata()),i=S(()=>l.value),p=Ee();function d(h){var f;p.push(`/profile/${ue.nprofileEncode({pubkey:h,relays:[...(f=s.value)!=null?f:[]]})}`)}const m=S(()=>{var h;if(!i.value)return n.value.slice(0,10);for(const f of["name","display_name","displayName","username"]){const v=i.value[f];if((h=v==null?void 0:v.length)!=null?h:0>0)return v}return n.value.slice(0,10)});return(h,f)=>{var v,y;return u(),w("div",{class:"flex items-center cursor-pointer w-full",ref_key:"target",ref:a},[z("img",{class:"h-12 w-12 bg-white rounded-full flex-grow-0 flex-shrink-0",src:(y=(v=c(i))==null?void 0:v.picture)!=null?y:c(ds),onClick:f[0]||(f[0]=()=>d(c(n)))},null,8,fs),z("div",ps,[z("div",{class:"font-bold ml-4",onClick:f[1]||(f[1]=()=>d(c(n)))},[x(Qn,null,{default:$(()=>[G(A(c(m)),1)]),_:1})]),z("div",vs,[W(h.$slots,"bottom",{userInfo:c(i)})])]),z("div",_s,[W(h.$slots,"right",{userInfo:c(i)})])],512)}}}),ms=["id"],ys={class:"mx-3 my-3"},ws={class:"my-2"},gs=M({__name:"PapawWarp",props:{event:null,deleteEvent:null,withPapawOptionsButtons:{type:Boolean,default:!0},disabledReply:{type:Boolean}},emits:["update:showSMS"],setup(e,{emit:t}){var P;const n=e,[o,s]=Me(void 0,{preloadDistance:0}),{event:l,deleteEvent:a}=N(n),r=R(!1),i=R(!1);function p(){i.value=!i.value,r.value=!0}const d=R(),m=_e(),{isPress:h}=Bn(d,()=>{m(l.value)}),f=Mn(),v=async()=>{var j,H,le;const B=o.value;if(!B||!f)return;const O=B.getBoundingClientRect();s.value=!0,await we(0),(le=f.scrollbarInst.value)==null||le.scrollBy({top:O.top-((H=(j=f.containerRef.value)==null?void 0:j.getBoundingClientRect().top)!=null?H:0),behavior:"smooth"}),E()},y=(P=zo())==null?void 0:P.jumpList;y==null||y.value.push(v);const k=So(),b=S(()=>{const B=k==null?void 0:k.focusEvent.value;return B?B.id===l.value.id:!1});$t(()=>{b.value&&v()}),D(s,()=>{if(s.value){if(!(y!=null&&y.value))return;xn(y.value,v)}});const g=R(!1);function E(){g.value=!0,setTimeout(()=>{g.value=!1},1e3)}function _(B){var O;(O=a==null?void 0:a.value)==null||O.call(a,B)}return(B,O)=>(u(),w("div",{class:"mt-4",ref_key:"target",ref:o},[x($o,{delay:c(Ue).lazyDelayForPapaw,disabled:!c(Ue).lazyDelayForPapaw,minHeight:200},{default:$(()=>[x(Hn,null,{default:$(({id:j})=>{var H;return[bn((u(),w("div",{class:Oe(["w-max-full rounded-2xl bg-[#dfe4ea55] overflow-hidden relative transition",{twinkle:g.value,["bg-[#dfe4eabb]"]:c(h)}]),onMousedownPassive:O[0]||(O[0]=ce(()=>{},["stop"])),onTouchstartPassive:O[1]||(O[1]=ce(()=>{},["stop"])),onClickPassive:O[2]||(O[2]=ce(()=>{},["stop"]))},[z("div",{id:j,class:"relative overflow-hidden rounded-xl"},[W(B.$slots,"header"),z("div",ys,[x(hs,{pubkey:c(l).pubkey,created_at:c(l).created_at,event:c(l)},{bottom:$(()=>[x(Bt,{secondTimestamp:c(l).created_at},null,8,["secondTimestamp"])]),right:$(()=>[x(us,{show:i.value,event:c(l),deleteEvent:_},null,8,["show","event"])]),_:1},8,["pubkey","created_at","event"]),z("div",{class:"my-4 font",ref_key:"contentRef",ref:d},[W(B.$slots,"default")],512),z("div",ws,[(H=e.withPapawOptionsButtons)==null||H?(u(),C(es,{key:0,event:c(l)},null,8,["event"])):I("",!0),x(ns,{event:c(l)},null,8,["event"])])])],8,ms),x(jt,null,{default:$(()=>[W(B.$slots,"reply")]),_:3})],34)),[[c(Q1),[p,{modifiers:{stop:!0}}],void 0,{stop:!0}]])]}),_:3})]),_:3},8,["delay","disabled"])],512))}}),bs={key:1},xs=M({__name:"PapawById",props:{id:null,relays:null,pubkey:null,disabledReply:{type:Boolean}},setup(e){const t=e,n=S(()=>Ae(t.id,{urls:t.relays,pubkey:t.pubkey})),o=S(()=>n.value.feat.useEvent()),s=_e();return(l,a)=>{const r=e1;return c(o)?(u(),C(Wt,{key:0,event:c(o),disabledReply:""},kn({_:2},[l.$slots.reply?{name:"reply",fn:$(()=>[W(l.$slots,"reply",{event:c(o)})]),key:"0"}:void 0]),1032,["event"])):(u(),w("div",bs,[x(r,{description:c(T)("not_found"),size:"huge",click:()=>c(s)(e.id)},null,8,["description","click"]),x(jt,null,{default:$(()=>[W(l.$slots,"reply",{event:c(o)})]),_:3})]))}}}),Ft=M({__name:"RelayContent",props:{event:null},setup(e){const t=e,{event:n}=N(t),o=S(()=>n.value.tags.filter(l=>l[0]==="e"&&l[1]&&(l[3]==="reply"||!l[3])).map(l=>l[1])),s=S(()=>Ut(n.value));return(l,a)=>{const r=i1;return u(),w(K,null,[c(o).length>0?(u(),C(r,{key:0,dashed:""})):I("",!0),(u(!0),w(K,null,ne(c(o),i=>(u(),C(xs,{id:i,relays:c(s),disabledReply:""},null,8,["id","relays"]))),256))],64)}}}),ks={key:1},$s={key:2},zs={key:3},Ss={key:4},Es=M({__name:"Papaw",props:{event:null,deleteEvent:null,withPapawOptionsButtons:{type:Boolean,default:!0},disabledReply:{type:Boolean}},setup(e){const t=e,{event:n,deleteEvent:o}=N(t);function s(i){var p;(p=o==null?void 0:o.value)==null||p.call(o,i)}const l=R(),a=S(()=>n.value.kind),r=S(()=>n.value.content);return(i,p)=>(u(),C(gs,Se({contentRef:l.value,onHandelDeleteEvent:s},i.$props,{withPapawOptionsButtons:e.withPapawOptionsButtons&&(c(a)===1||c(a)===42)}),{default:$(()=>[c(a)===1||c(a)===42?(u(),C(Al,{key:0,event:c(n),disabledReply:e.disabledReply},null,8,["event","disabledReply"])):c(a)===3?(u(),w("span",ks,A(c(T)("the_user_has_followed_you")),1)):c(a)===7?(u(),w("span",$s,[x(ge,{events:[],size:20,reaction:c(r),active:!0},null,8,["reaction"]),e.disabledReply?I("",!0):(u(),C(Ft,{key:0,event:c(n)},null,8,["event"]))])):c(a)===30023?(u(),w("span",zs,[x(p1,{event:c(n)},null,8,["event"])])):(u(),w("span",Ss,A(c(n).content),1))]),reply:$(()=>[W(i.$slots,"reply",{},void 0,!0)]),_:3},16,["contentRef","withPapawOptionsButtons"]))}});const Wt=L(Es,[["__scopeId","data-v-4e4b6d44"]]),Cs=M({__name:"ContentReplyItem",props:{value:null,tag:null,event:null},setup(e){const t=e,{value:n,tag:o,event:s}=N(t),l=S(()=>{const d=new Set;if(o!=null&&o.value){const h=o.value[2];h&&d.add(h)}const m=se(s.value.id);return Re(d,m),d}),a=S(()=>{var d;return o!=null&&o.value?(d=o.value[3])!=null?d:"reply":"mention"}),r=S(()=>Rt(n.value)),i=S(()=>{if(!!r.value&&!(a.value!=="reply"&&a.value!=="mention"))return Ae(r.value.id,{urls:l.value})}),p=S(()=>{var d;return(d=i.value)==null?void 0:d.feat.useEvent()});return(d,m)=>{const h=zt("router-link");return c(p)?(u(),C(Wt,{key:0,class:"w-full",disabledReply:"",event:c(p),deleteEvent:()=>{}},null,8,["event","deleteEvent"])):c(a)==="mention"||c(a)==="reply"?(u(),C(h,{key:1,to:{name:"short-text-note",params:{value:c(n)}}},{default:$(()=>[G(" &"+A(c(n)),1)]),_:1},8,["to"])):I("",!0)}}}),Ps={},Rs={t:"1626764977164",viewBox:"0 0 2240 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4404","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"140",height:"64",class:"mini-header__logo"},Os=z("path",{d:"M2079.810048 913.566175c-10.01309 0-18.554608 0.799768-26.936172-0.159954-16.987063-1.951433-33.974126-1.567544-50.99318-2.079395-10.972811-0.287916-10.652904-0.287916-11.580634-10.90883-2.71921-32.406582-5.694345-64.781173-8.605499-97.155764-2.527266-28.439735-4.926568-56.91146-7.70976-85.319204-2.527266-26.040432-5.566382-52.016883-8.317583-78.025324-2.623238-24.440897-5.054531-48.913784-7.77374-73.322691a12681.114551 12681.114551 0 0 0-10.684895-92.133223c-3.295042-27.128116-6.558094-54.320213-10.205034-81.416339a20559.272961 20559.272961 0 0 0-17.530905-125.979387c-6.398141-44.723002-14.075909-89.22207-22.105576-133.657156-1.439582-7.965685-1.247637-8.253601 6.36615-9.533229 31.670796-5.406429 63.501545-10.01309 95.716183-9.309295 3.486987 0.095972 7.005964 0.159954 10.460959 0.607823 5.662354 0.703795 8.605499 3.454996 8.925406 10.045081 1.119675 22.969325 2.71921 45.938649 4.414717 68.875983 2.71921 37.589076 5.662354 75.178151 8.477537 112.735236 1.791479 24.184971 3.327033 48.305961 5.150503 72.426951 2.911154 38.772732 5.982261 77.513473 8.925406 116.286205 1.791479 23.705111 3.359024 47.474203 5.182494 71.179313 2.783191 34.805885 5.822308 69.579778 8.637489 104.353672 1.791479 22.137566 3.391014 44.307123 5.278466 66.44469 2.783191 32.79047 5.790317 65.580941 8.63749 98.371411 2.143377 25.592562 4.09481 51.249106 6.270178 77.673426zM853.670395 114.918282c4.638652 0 11.644616-0.511851 18.554607 0.127963 8.797443 0.799768 10.49295 3.071107 11.036793 11.900541 2.527266 40.372267 4.894578 80.776524 7.581796 121.180782 2.943145 43.571337 6.174206 87.078693 9.405267 130.586048 2.975135 39.956388 5.950271 79.912775 9.149341 119.869163 3.486987 43.891244 7.357862 87.718507 10.876839 131.609751 2.655228 33.622229 4.926568 67.244457 7.677768 100.898677 2.623238 31.222926 5.694345 62.38187 8.509527 93.572805 2.399303 26.8402 4.830596 53.71239 7.165918 80.58458 0.735786 8.509527 0.127963 9.053369-9.053369 8.829434-24.025018-0.575833-47.922073-3.391014-71.947091-2.71921-5.502401 0.159954-7.101936-2.367312-8.029666-7.581796-1.983424-11.356699-1.663517-22.905343-2.879163-34.390006-3.295042-30.359177-5.182494-60.846317-7.965685-91.269474-2.495275-27.639967-5.502401-55.215953-8.349574-82.82393-2.527266-25.240664-5.02254-50.481329-7.709759-75.753984-2.687219-24.792795-5.534392-49.61758-8.349573-74.442365-2.591247-22.841362-5.118512-45.682723-7.869713-68.524085-4.062819-33.462275-8.093648-66.92455-12.508365-100.322844-4.062819-30.647093-8.66948-61.198214-12.988225-91.813317-5.886289-41.587914-12.508365-83.079855-19.834236-124.411842a1393.96288 1393.96288 0 0 0-5.310457-28.023856c-0.959721-4.702633-0.095972-7.421843 5.278466-8.157629 14.139891-1.887451 28.24779-4.830596 42.451663-6.206196 14.203872-1.311619 28.407744-3.966847 45.106891-2.71921z m1006.075609 403.33878c27.064134 0 27.703949 0.191944 32.054684 24.536869 5.342447 30.03927 9.08536 60.334465 12.636328 90.62966 3.742912 32.278619 7.517815 64.557238 10.972811 96.867848 2.783191 26.008441 5.118512 52.080864 7.74175 78.089305 2.7512 27.256079 5.662354 54.416185 8.509527 81.640274 1.567544 15.387528 3.039117 30.775056 4.798605 46.130593 0.511851 4.446708-0.831758 6.81402-5.214485 7.325871-9.245313 1.055693-18.426645 2.27134-27.639967 3.263052-16.891091 1.82347-33.814173 3.614949-50.737254 5.182493-8.733462 0.799768-9.309294 0.319907-10.940821-8.125638-14.843686-76.617733-29.719363-153.171485-44.435086-229.821208-9.789155-50.961189-19.322384-101.95437-28.919595-152.915559a805.525894 805.525894 0 0 1-3.582959-21.081873c-0.639814-4.030829 0.44787-6.622075 5.022541-7.70976 30.48714-7.133927 61.294186-12.636328 89.733921-14.011927z m-1137.077537 0c28.951586 0 28.823623 0.095972 33.302322 26.360339 6.909992 40.660183 11.804569 81.544301 16.187295 122.556382 4.286754 39.796434 8.957397 79.560878 13.148179 119.357311 2.847173 27.224088 5.086522 54.512157 7.74175 81.704255 1.887451 19.354375 4.126801 38.644769 6.174206 57.967153 0.255926 2.367312 0.383888 4.734624 0.543842 7.133927 0.415879 9.469248 0 10.237025-9.117351 11.164755-18.074747 1.887451-36.181485 3.454996-54.256232 5.246476-6.558094 0.639814-13.084197 1.599535-19.57831 2.239349-8.63749 0.799768-8.925406 0.767777-10.620913-7.965685-6.078234-30.679084-11.964523-61.422149-17.914793-92.101233-14.267853-73.898523-28.69566-147.733065-42.867542-221.631589-5.662354-29.559409-10.524941-59.246781-16.091323-88.838181-1.023702-5.406429-0.255926-7.933694 5.342447-9.245313 30.199223-7.037955 60.590391-12.540355 88.006423-13.947946z m382.128944 309.861946v124.027954c0 1.183656-0.127963 2.399303 0.03199 3.582959 0.607823 6.014252-1.599535 8.66948-7.805731 8.413555-8.157629-0.351898-16.251277-0.127963-24.408906 0.063981-17.019054 0.319907-34.070098-0.351898-51.057162 1.599535-9.405267 1.087684-9.213322 0.511851-10.141052-9.405266-2.783191-31.222926-5.822308-62.413861-8.669481-93.636787-2.623238-28.823623-4.99055-57.711228-7.677768-86.534851-2.71921-29.655381-5.758326-59.214791-8.509527-88.838181-1.887451-19.770254-3.550968-39.508518-5.214485-59.278772-2.175368-25.720525-4.190782-51.409059-6.462122-77.129585-0.959721-10.844848-0.159954-12.380402 10.588923-13.500076a531.877423 531.877423 0 0 1 83.527724-2.591247c6.941982 0.383888 13.851974 1.727498 20.570022 3.359024 8.477536 2.015414 9.405267 3.263052 9.853137 12.124476 0.92773 17.850812 1.855461 35.701624 2.335321 53.584427 0.543842 19.866226 0.095972 39.764443 0.831758 59.63067 1.855461 54.800074 1.567544 109.664129 2.207359 164.528184z m1134.806197 5.630364v117.437869c0 1.983424-0.063981 3.966847 0.03199 5.982262 0.415879 5.150503-1.983424 6.973973-6.878001 6.941982-12.028504-0.095972-24.025018 0-36.021531 0.159954-13.564058 0.127963-27.096125 0.063981-40.628192 1.535553-8.925406 1.023702-8.989387 0.351898-9.789155-8.509527-3.678931-40.660183-7.549806-81.320366-11.260728-122.04453-3.391014-37.525094-6.526103-75.082179-9.981099-112.639265-3.550968-38.740741-7.421843-77.38551-10.90883-116.09426-1.727498-19.386366-3.16708-38.772732-4.606661-58.159097-0.575833-8.445546 0.351898-9.949109 9.885127-10.716886 16.571184-1.311619 33.078387-3.550968 49.777534-3.263051 16.635165 0.319907 33.302322-0.607823 49.841515 2.559256 14.011928 2.687219 14.715723 3.486987 15.547481 18.458635 2.399303 44.051198 1.663517 88.230358 3.231061 132.281556 1.599535 46.89837 0.479861 93.79674 1.759489 146.069549zM1831.498213 305.135c9.789155 0.575833 17.498914 0.095972 25.176683 1.791479 4.894578 1.119675 7.357862 3.327033 7.837723 8.573509 2.303331 25.240664 4.798605 50.51332 7.32587 75.785975 2.015414 20.50604 4.158791 41.012081 6.238188 61.518121l0.191944 1.183656c1.663517 12.924244 1.279628 13.276142-11.292718 13.979937-11.196746 0.607823-22.361501 1.599535-33.558247 2.27134-7.357862 0.44787-9.693183 1.695507-10.90883-9.021378-4.190782-37.813011-9.053369-75.530049-13.692021-113.311069a1185.0316 1185.0316 0 0 0-4.286754-31.798759c-0.92773-5.982261 1.407591-9.277304 7.005964-9.757164 7.357862-0.671805 14.715723-0.863749 19.962198-1.215647z m-1133.398606 0.159954c7.549806 0.415879 15.323547-0.159954 22.937334 1.599535 4.350736 0.991712 6.558094 2.815182 6.973973 7.773741 0.92773 11.83656 2.7512 23.641129 3.870875 35.477689 3.550968 36.309448 6.909992 72.650886 10.237025 108.992324 0.703795 7.901704 0.543842 8.061657-6.84601 8.605499-13.116188 0.959721-26.264367 1.919442-39.412546 2.463284-7.645778 0.351898-8.605499-0.575833-9.56522-8.381564-3.327033-26.744227-6.462122-53.520446-9.661192-80.296664-2.591247-22.073585-4.766615-44.14717-7.901704-66.156773-0.863749-6.078234 1.119675-7.74175 5.982262-8.733462 7.709759-1.567544 15.451509-1.055693 23.385203-1.343609z m399.147998 100.002936c0 23.001315 0.063981 45.97064-0.031991 69.003946 0 10.332997-0.127963 10.396978-10.396978 10.269016a324.289753 324.289753 0 0 1-36.981252-1.919443c-7.933694-0.991712-8.093648-0.735786-8.317583-9.149341-0.799768-28.119828-1.631526-56.239655-2.207359-84.359483-0.415879-19.034468-0.639814-38.004955-1.791479-57.039422-0.607823-9.821146-0.063981-9.917118 9.373276-10.045081 13.915956-0.159954 27.799921 0.479861 41.619904 2.591247 8.317583 1.279628 8.701471 1.279628 8.733462 10.49295 0.063981 23.385204 0.063981 46.770407 0.063981 70.187602h-0.063981z m1135.38203 0.607824c0 23.033306 0.063981 46.034621-0.031991 69.035936 0 9.661192-0.159954 9.725174-9.853137 9.661192a505.32514 505.32514 0 0 1-38.132917-1.791479c-6.302168-0.479861-8.157629-3.135089-7.74175-8.861425 0.063981-0.799768 0-1.599535 0-2.399302-0.959721-44.403095-1.919442-88.7742-2.815182-133.177296-0.031991-2.367312-0.159954-4.734624-0.063982-7.133926 0.127963-8.957397 0.159954-9.181332 9.149341-9.117351 12.380402 0.063981 24.664832 0.703795 37.013243 1.919442 15.067621 1.503563 12.412393 3.359024 12.476375 15.259566 0.063981 22.169557 0.031991 44.403095 0 66.604643z m-1565.593 54.000306c0.287916 12.636328 0.287916 12.604337-11.804569 15.547481-8.221611 2.015414-16.443221 4.222773-24.728813 6.046243-7.069945 1.599535-8.317583 0.703795-9.53323-6.238187-8.445546-47.090314-16.8591-94.212619-25.240664-141.334924-1.695507-9.757164-1.247637-10.364988 8.349573-12.060495 11.804569-2.079396 23.577148-4.126801 35.381717-5.950271 7.517815-1.183656 8.477536-0.767777 9.9811 7.517815 2.975135 16.731138 5.790317 33.526256 7.997675 50.385357 3.423005 26.680246 6.238187 53.456464 9.309295 80.168701 0.255926 1.951433 0.191944 3.966847 0.287916 5.91828z m1064.138735-136.696273c15.451509-2.527266 31.030982-5.086522 46.610454-7.549806 5.598373-0.863749 7.29388 2.655228 8.029666 7.645778 2.655228 18.426645 5.982261 36.725327 8.157629 55.183962 3.19907 26.744227 7.581797 53.360492 8.413555 80.328655 0.063981 2.7512 0.031991 5.566382 0.095972 8.317583 0.159954 4.286754-1.983424 6.494113-5.950271 7.421843-10.556932 2.367312-21.113864 4.734624-31.638805 7.261889-5.054531 1.215647-6.750038-0.92773-7.581796-5.854298-3.16708-18.746552-6.81402-37.397131-10.045081-56.079702-5.47041-30.775056-10.780867-61.582103-16.091323-92.38915-0.127963-1.119675 0-2.303331 0-4.286754z m-710.64147 108.032603c-0.44787 16.37924 0.543842 30.647093-1.695507 44.914947-0.671805 4.510689-1.983424 7.421843-6.846011 7.837722-10.428969 0.863749-20.825947 1.695507-31.190935 2.7512-5.02254 0.543842-6.430131-1.631526-7.261889-6.558094-2.335321-14.55577-1.919442-29.303484-3.327033-43.923234-2.655228-27.607976-3.774903-55.407897-5.566383-83.111846-0.44787-6.750038-1.119675-13.436095-1.663516-20.186134-0.287916-3.774903 1.215647-5.886289 5.246475-6.046242 13.500077-0.543842 26.936172-3.007126 40.50023-2.527266 7.933694 0.287916 8.605499 0.799768 9.181331 8.797443 0.351898 5.534392 0.255926 11.132765 0.383889 16.699147l2.239349 81.352357z m1134.902169-15.867388c0 19.066459 0.223935 38.132918-0.031991 57.199376-0.159954 9.917118-1.279628 10.780867-10.652904 11.644616-9.277304 0.863749-18.490626 1.567544-27.735939 2.559256-5.214485 0.543842-7.645778-0.991712-7.965685-6.973973-1.34361-25.336637-3.16708-50.673273-4.926568-75.977919-1.3756-20.985901-2.943145-41.939811-4.414717-62.893722-0.159954-2.399303-0.031991-4.798605-0.191944-7.165917-0.223935-4.190782 1.055693-6.654066 5.758326-6.81402 13.116188-0.44787 26.136404-2.975135 39.348564-2.495274 8.061657 0.287916 8.18962 0.415879 8.797444 8.797443 1.951433 27.32006 2.143377 54.704102 2.015414 82.120134zM628.295894 756.171918c16.571184 18.234701 17.402942 39.828425 11.932532 62.413861-5.502401 22.585436-18.042756 41.204025-33.23834 57.903171-25.49659 27.895893-56.303637 48.497905-89.062116 65.99682-56.399609 30.135242-116.190232 50.161422-178.572103 61.997982-44.882956 8.477536-90.053828 15.00364-135.704561 17.498914-13.915956 0.767777-27.799921 1.407591-41.715876 1.311619-10.077071 0-20.186133 0.287916-30.231214-0.063981-8.541518-0.319907-9.789155-1.791479-10.49295-10.716886-2.591247-32.022693-4.798605-64.077378-7.645778-96.100071-3.327033-37.109215-7.229899-74.18644-10.812858-111.295654-2.623238-26.8402-4.894578-53.744381-7.773741-80.520599-3.327033-31.542833-7.069945-63.021684-10.716885-94.564517-3.327033-29.111539-6.526103-58.28706-10.045081-87.430591-3.934856-32.278619-7.997676-64.493257-12.31642-96.707894a8228.968456 8228.968456 0 0 0-13.212161-92.996973 5984.500754 5984.500754 0 0 0-24.312934-152.627642 3243.825263 3243.825263 0 0 0-23.67312-123.740038c-1.151665-5.502401 0.511851-7.709759 5.342448-9.725174C52.335283 47.609843 98.465876 28.063524 144.724432 8.77313c8.605499-3.582959 17.434933-6.590085 26.584274-8.285592 6.334159-1.183656 7.965685 0.127963 7.773741 6.494113-0.479861 16.283268 0.191944 32.630517-1.407591 48.849803a161.393095 161.393095 0 0 0-0.639814 13.084197c-0.735786 58.383032-1.439582 116.798056 0.095972 175.213079 1.34361 51.185124 4.030829 102.338258 7.005964 153.491392 2.335321 40.372267 5.694345 80.744534 9.149341 121.052819 3.391014 39.508518 7.517815 78.953054 11.38869 118.461572 0.735786 7.517815 1.407591 8.221611 9.949108 7.069945a381.329176 381.329176 0 0 1 50.833227-4.190782c52.880632-0.127963 104.897514 7.133927 156.338564 19.322384 45.010919 10.684895 88.806191 24.920757 130.777993 44.818975 20.793957 9.853136 40.692174 21.241827 58.830902 35.701624 6.174206 4.862587 11.676606 10.46096 16.891091 16.315259z m1126.840512-9.597211c20.47405 17.946784 27.927883 39.924397 22.105576 67.116494-4.830596 22.425483-15.771416 41.268006-30.359177 58.127107-23.417194 27.096125-51.856929 47.698138-82.631985 64.909136-60.334465 33.782182-124.603787 55.727804-192.168151 68.396122a1151.089465 1151.089465 0 0 1-111.455609 15.547481c-21.177845 1.82347-42.451662 4.09481-66.220754 2.623238h-27.76793c-5.406429 0-8.477536-1.695507-8.925406-8.125638-2.047405-28.087837-4.414717-56.143683-6.941983-84.19953-2.687219-29.623391-5.662354-59.246781-8.477536-88.870172-2.559256-27.224088-4.926568-54.512157-7.709759-81.736245-2.559256-25.656544-5.502401-51.249106-8.285592-76.873659-2.591247-24.057008-5.086522-48.114017-7.933695-72.139035-3.423005-29.111539-7.037955-58.223079-10.652904-87.334618-3.391014-27.160107-6.750038-54.288222-10.364987-81.416338a6133.577429 6133.577429 0 0 0-12.156467-87.142675c-5.694345-37.653057-11.804569-75.178151-17.818822-112.767227a3259.14881 3259.14881 0 0 0-29.111539-158.993792c-0.44787-2.335321-0.671805-4.734624-1.3756-7.005964-1.663517-5.118512-0.063981-7.837722 4.958559-9.821146C1191.012355 47.641834 1238.61452 24.448575 1288.2321 6.149893c6.494113-2.431293 13.052207-5.150503 20.058171-5.854299 6.302168-0.639814 7.901704 0.383888 7.29388 7.101936-3.327033 36.43741-1.407591 73.066765-3.135089 109.536166-1.407591 29.751354-1.247637 59.598679 0.255926 89.382023 0.351898 7.549806 0.639814 15.131602 0.575832 22.649418-0.383888 35.765606 1.503563 71.499221 3.327033 107.200845 2.335321 47.186286 5.758326 94.276601 9.245313 141.398906 2.527266 34.006117 5.822308 67.948253 9.021379 101.922379 1.695507 18.586598 3.518977 37.141206 5.822308 55.631832 1.247637 10.205034 1.759489 10.301006 11.772578 8.957396 17.658868-2.399303 35.349726-4.350736 53.200539-4.09481 62.637796 0.799768 124.027954 10.684895 184.266447 27.863902 40.788146 11.580634 80.488608 26.040432 117.981712 46.290547a253.55831 253.55831 0 0 1 47.218277 32.438573zM308.676783 922.811488c23.161269-11.068783 135.608589-98.947243 144.533995-113.279078-54.576139-23.513166-109.344222-45.362816-168.239105-63.24562l23.70511 176.524698z m1277.196815-107.520752c2.879163-3.103098 2.559256-5.502401-1.343609-7.229899-7.773741-3.550968-15.4835-7.325871-23.353213-10.556932-42.003793-17.179007-84.19953-33.814173-127.482951-47.37823-3.774903-1.151665-7.645778-3.774903-12.476374-1.535554l23.321222 173.45359c3.454996 0.767777 4.798605-0.831758 6.33416-1.919442 39.316574-28.855614 78.889073-57.35933 116.638102-88.390312 6.36615-5.182494 12.668318-10.396978 18.362663-16.443221z",fill:"var(--brand_blue)","p-id":"4405"},null,-1),Bs=[Os];function Ms(e,t){return u(),w("svg",Rs,Bs)}const Ts=L(Ps,[["render",Ms]]),Ve=e=>($n("data-v-e484e7f0"),e=e(),zn(),e),As=Ve(()=>z("div",null,[z("div",{class:"diamond"})],-1)),Ds=Ve(()=>z("div",null,[z("div",{class:"diamond"})],-1)),Is=Ve(()=>z("div",null,[z("div",{class:"diamond"})],-1)),Ls=[As,Ds,Is],Hs=M({__name:"PlayButton",props:{value:{type:Boolean,default:!0}},emits:["update:value"],setup(e,{emit:t}){const n=e,o=R(n.value);return $t(()=>{o.value=n.value}),D(o,()=>{t("update:value",o.value)}),(s,l)=>(u(),w("div",{class:Oe(["play",{pause:!o.value}]),onClick:l[0]||(l[0]=()=>o.value=!o.value)},Ls,2))}});const Vs=L(Hs,[["__scopeId","data-v-e484e7f0"]]),Ns={class:"flex flex-shrink-0 w-40 h-40"},Us=["src"],js=M({__name:"ContentBilibiliWebsite",props:{bv:null},setup(e){const t=e,{bv:n}=N(t),o=S(()=>`//player.bilibili.com/player.html?bvid=${n.value}&&page=1&as_wide=1&high_quality=1&danmaku=0`),[s]=Pt(),l=R(!1),{duration:a,transitionActive:r,safeActive:i,show:p,hidden:d}=St();let m=null;return p(),D(l,()=>{clearTimeout(m),m=setTimeout(()=>{l.value?d():p()},3e3)}),(h,f)=>{const v=Ts,y=X,k=Be;return u(),w("div",{ref_key:"bilibili_player_ref",ref:s,class:"w-full rounded-xl overflow-hidden relative"},[x(k,{class:"h-full w-full"},{default:$(()=>[c(i)?(u(),w("div",{key:0,class:"w-full h-full flex flex-col justify-center items-center absolute left-0 right-0 top-0 bottom-0",style:ee({opacity:c(r)?1:0,transition:`opacity ${c(a)}ms ease `})},[x(y,{class:"absolute top-[25%]",style:ee({transform:"translate(0,-50%)"}),size:"15em",color:"rgb(0, 174, 236)"},{default:$(()=>[x(v,{class:"h-40 w-40"})]),_:1},8,["style"]),z("div",Ns,[x(Vs,{value:l.value,"onUpdate:value":f[0]||(f[0]=b=>l.value=b)},null,8,["value"])])],4)):I("",!0),l.value?(u(),w("iframe",{key:1,class:"w-full h-full",src:c(o),allowfullscreen:"",height:"0",width:"100%",scrolling:"no",frameborder:"0",sandbox:"allow-top-navigation allow-same-origin allow-forms allow-scripts"},`\r
        <span\r
          data-mce-type="bookmark"\r
          style="\r
            display: inline-block;\r
            width: 0px;\r
            overflow: hidden;\r
            line-height: 0;\r
          "\r
          class="mce_SELRES_start"\r
        ></span>\r
      `,8,Us)):I("",!0)]),_:1})],512)}}}),Fs=""+new URL("7z.f9012bb4.png",import.meta.url).href,Ws=["src"],qs=M({__name:"Icon7z",setup(e){return(t,n)=>(u(),w("img",{class:"h-full w-auto",src:c(Fs),alt:""},null,8,Ws))}}),Ks={},Ys={version:"1.1",xmlns:"http://www.w3.org/2000/svg","fill-rule":"evenodd","clip-rule":"evenodd",height:"1024",width:"1024",viewBox:"0 0 1024 1024"},Gs=z("path",{d:"M766.1 57.2c-0.8-0.8-1.6-1.4-2.4-2.2l-50-50c-2.8-2.8-8.2-5-12.1-5H286c-58.1 0-105.4 47.2-105.4 105.1v465.5h82.5V105.1c0-12.4 10.5-22.9 22.9-22.9h364.4v152c0 58 47.3 105.1 105.4 105.1h152.4v579.5c0 12.4-10.5 22.9-22.9 22.9H286c-12.4 0-22.9-10.5-22.9-22.9v-57.9h-82.5v57.9c0 58 47.3 105.1 105.4 105.1h599.2c58.1 0 105.4-47.2 105.4-105.1V288.4c0-3.9-2.2-9.3-5-12l-50.2-50c-0.8-0.8-1.5-1.6-2.3-2.4l-167-166.8z m-33.2 177V129.1c0-3.9 2.2-4.8 5-2.1l125.3 125c2.8 2.8 1.8 5-2.1 5H755.8c-12.4 0.1-22.9-10.4-22.9-22.8z",fill:"#04a7f5"},null,-1),Zs=z("path",{d:"M679.7 598.5H68c-15.1 0-27.5 12.3-27.5 27.4v180.6c0 15.1 12.4 27.4 27.5 27.4h611.7c15.1 0 27.5-12.3 27.5-27.4V626c0-15.1-12.4-27.5-27.5-27.5z m-345.1 59.3l-77.3 107.4h77.2v26.4H213.6v-18l78.7-106.9h-72.9v-26.4h115.1v17.5z m67.6 7.6h-13v101.1h13v25.1h-58v-25.1H357V665.4h-12.8v-25.1h58v25.1z m113.4 60c-11.4 9.3-25.6 13.8-42.6 13.4h-16.6v52.7h-32.2V640.3h52.1c37.6 0 56.4 16 56.4 47.9 0 15.5-5.7 27.9-17.1 37.2z",fill:"#034767"},null,-1),Xs=z("path",{d:"M470.7 665.3h-14.3v48.8h14c18.9 0 28.4-8.2 28.4-24.7 0-16.1-9.4-24.1-28.1-24.1z",fill:"#034767"},null,-1),Js=z("path",{d:"M468.4 81.5h71v47.4h-71zM397.4 128.9h71v47.3h-71zM468.4 176.2h71v47.3h-71zM397.4 223.5h71v47.3h-71zM468.4 270.8h71v47.3h-71zM397.4 318.1h71v47.3h-71zM468.4 365.4h71v47.3h-71zM397.4 412.7h142V460h-142zM397.4 460h15.1v47.3h-15.1zM523.7 460h15.7v47.3h-15.7zM539.4 543.1c0 13.1-11 11.5-24.5 11.5H422c-13.6 0-24.5 1.7-24.5-11.3V531v-23.6h141.9v35.7z",fill:"#034767"},null,-1),Qs=[Gs,Zs,Xs,Js];function el(e,t){return u(),w("svg",Ys,Qs)}const tl=L(Ks,[["render",el]]),nl=""+new URL("xlsx.fcdf8604.png",import.meta.url).href,ol=["src"],sl=M({__name:"xlsx",setup(e){return(t,n)=>(u(),w("img",{class:"h-full w-auto",src:c(nl),alt:""},null,8,ol))}}),ll={},al={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},rl=z("path",{d:"M270.1 741.7c0 23.4 19.1 42.5 42.6 42.5h48.7v120.4c0 30.5 24.5 55.4 54.6 55.4c30.2 0 54.6-24.8 54.6-55.4V784.1h85v120.4c0 30.5 24.5 55.4 54.6 55.4c30.2 0 54.6-24.8 54.6-55.4V784.1h48.7c23.5 0 42.6-19.1 42.6-42.5V346.4h-486v395.3zm357.1-600.1l44.9-65c2.6-3.8 2-8.9-1.5-11.4c-3.5-2.4-8.5-1.2-11.1 2.6l-46.6 67.6c-30.7-12.1-64.9-18.8-100.8-18.8c-35.9 0-70.1 6.7-100.8 18.8l-46.6-67.5c-2.6-3.8-7.6-5.1-11.1-2.6c-3.5 2.4-4.1 7.4-1.5 11.4l44.9 65c-71.4 33.2-121.4 96.1-127.8 169.6h486c-6.6-73.6-56.7-136.5-128-169.7zM409.5 244.1a26.9 26.9 0 1 1 26.9-26.9a26.97 26.97 0 0 1-26.9 26.9zm208.4 0a26.9 26.9 0 1 1 26.9-26.9a26.97 26.97 0 0 1-26.9 26.9zm223.4 100.7c-30.2 0-54.6 24.8-54.6 55.4v216.4c0 30.5 24.5 55.4 54.6 55.4c30.2 0 54.6-24.8 54.6-55.4V400.1c.1-30.6-24.3-55.3-54.6-55.3zm-658.6 0c-30.2 0-54.6 24.8-54.6 55.4v216.4c0 30.5 24.5 55.4 54.6 55.4c30.2 0 54.6-24.8 54.6-55.4V400.1c0-30.6-24.5-55.3-54.6-55.3z",fill:"currentColor"},null,-1),il=[rl];function cl(e,t){return u(),w("svg",al,il)}const ul=L(ll,[["render",cl]]),dl={},fl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},pl=z("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7l7-7z",fill:"currentColor"},null,-1),vl=[pl];function _l(e,t){return u(),w("svg",fl,vl)}const hl=L(dl,[["render",_l]]),ml={class:"flex h-20"},yl={class:"flex-1 flex-shrink flex items-center"},wl=M({__name:"ContentDownloadBlock",props:{url:null},setup(e){const t=e,{url:n}=N(t),o=S(()=>{var r;const l=n.value.lastIndexOf("/"),a=(r=n.value.slice(l+1))!=null?r:n.value;return decodeURI(a)}),s=()=>{window.open(n.value)};return(l,a)=>{const r=Sn,i=ul,p=X,d=sl,m=tl,h=qs,f=Be;return u(),C(f,{class:"mt-2"},{default:$(()=>[z("div",ml,[z("div",yl,[x(r,{trigger:"hover"},{trigger:$(()=>[G(A(c(o)),1)]),default:$(()=>[G(" "+A(c(n)),1)]),_:1})]),z("div",{class:"flex-shrink h-20 w-20 flex justify-center items-center",onClick:s},[c(n).endsWith(".apk")?(u(),C(p,{key:0,size:"3em"},{default:$(()=>[x(i)]),_:1})):c(n).endsWith(".xlsx")?(u(),C(p,{key:1,size:"3em"},{default:$(()=>[x(d)]),_:1})):c(n).endsWith(".zip")?(u(),C(p,{key:2,size:"3em"},{default:$(()=>[x(m)]),_:1})):c(n).endsWith(".7z")?(u(),C(p,{key:3,size:"3em"},{default:$(()=>[x(h)]),_:1})):(u(),C(p,{key:4,size:"3em"},{default:$(()=>[x(hl)]),_:1}))])])]),_:1})}}}),gl=["src"],bl=M({__name:"ContentYouTubeWebsite",props:{v:null},setup(e){const t=e,{v:n}=N(t),o=S(()=>`https://www.youtube.com/embed/${n.value}?controls=0`),[s]=Pt();return(l,a)=>{const r=Be;return u(),w("div",{ref_key:"target",ref:s,class:"w-full rounded-xl overflow-hidden relative"},[x(r,{class:"h-full w-full"},{default:$(()=>[z("iframe",{class:"w-full h-full",src:c(o),title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,gl)]),_:1})],512)}}}),xl={class:"w-full"},kl=["href"],$l=M({__name:"ContentWebsite",props:{src:null},setup(e){const t=e,{src:n}=N(t),o=S(()=>{const a=/bilibili.com.*(BV[A-Za-z0-9]{5,20})\//[Symbol.match](n.value);if(!a)return;const r=a[1];if(!!r)return r}),s=S(()=>{const a=/youtube.com\/.*v=([a-zA-Z0-9]+)/[Symbol.match](n.value);if(!a)return;const r=a[1];if(!!r)return r}),l=`apk,pdf,zip,excel,xlsx,7z,exe,docx,doc,docx,zip,rar,apk,ipa,txt,exe,7z,e,z,ct,ke,cetrainer,db,tar,pdf,w3x
epub,mobi,azw,azw3,osk,osz,xpa,cpk,lua,jar,dmg,ppt,pptx,xls,xlsx,mp3
ipa,iso,img,gho,ttf,ttc,txf,dwg,bat,imazingapp,dll,crx,xapk,conf
deb,rp,rpm,rplib,mobileconfig,appimage,lolgezi,flac
cad,hwt,accdb,ce,xmind,enc,bds,bdi,ssf,it
pkg,cfg`.split(",").map(a=>`.${a}`);return(a,r)=>(u(),w("div",xl,[c(o)?(u(),C(js,{key:0,bv:c(o)},null,8,["bv"])):c(s)?(u(),C(bl,{key:1,v:c(s)},null,8,["v"])):c(l).some(i=>c(n).endsWith(i))?(u(),C(wl,{key:2,url:c(n)},null,8,["url"])):(u(),w("a",{key:3,class:"break-words",href:c(n),target:"_blank"},A(c(n)),9,kl))]))}}),zl=["onClick"],Sl={key:0},El={key:1,class:"p-0 m-0 w-full h-auto"},Cl={controls:"",class:"overflow-hidden rounded-2xl w-full m-0 p-0 h-auto"},Pl=["src"],Rl=["href"],Ol=["href"],Bl={key:9,class:"break-words block"},Ml=["textContent"],Tl=M({__name:"Content",props:{event:null,contenteditable:{type:Boolean},disabledReply:{type:Boolean}},setup(e){const t=e,{event:n,contenteditable:o}=N(t);function s(f,v,y,k){let b=0;const g=v[Symbol.matchAll](f);for(const E of g){let _=E.index,P=E[0];!je(_)||(_-b>0&&y(f.slice(b,_)),k(P,_,E),b=_+P.length)}f.length-b>0&&y(f.slice(b))}const l=[(f,v,y,k)=>{s(v,Cn(),b=>{f(b)},(b,g,E)=>{let _=E[1];!b||!_||y.push(r(b,_,k.tags))})},(f,v,y,k)=>{s(v,/(nostr:|&|@)((naddr)[a-zA-Z0-9]+)/g,b=>{f(b)},(b,g,E)=>{const _=E[2];!_||y.push(["naddr",_])})},(f,v,y,k)=>{s(v,/(nostr:|&|@)((nevent|note)[a-zA-Z0-9]+)/g,b=>{f(b)},(b,g,E)=>{const _=E[2];!_||y.push(["e",_])})},(f,v,y,k)=>{s(v,/(nostr:|@)((nprofile|npub)[a-zA-Z0-9]+)/g,b=>{f(b)},(b,g,E)=>{const _=E[2];!_||y.push(["p",`@${_}`,_])})},(f,v,y,k)=>{s(v,Pn(),b=>{f(b)},(b,g,E)=>{const _=E[1];!_||y.push(["t",`#${_}`,_])})},(f,v,y)=>{y.push(["text",v])}];function a(f,v,y){const k=g=>{const E=l[g];return E?_=>{!_||E(k(g+1),_,v,y)}:()=>{}};k(0)(f)}function r(f,v,y){const k=parseInt(v);if(!je(k))return["text",f];const b=y[k];if(!b)return["text",f];const g=b[1];if(!g)return["text",f];switch(b[0]){case"p":const E=g,_=fe.kind0.get(E),P=ue.nprofileEncode({pubkey:g});return _?["p",`@${Yt(_).name}`,P]:["p",`@${P}`,P];case"e":return["e",ue.neventEncode({id:g})];case"t":return["t",`#${g}`,g];default:return["text",f]}}function i(f,v){f.split(`
`).forEach(y=>{const k=[];s(y,En(),b=>{a(b,k,n.value)},(b,g,E)=>{let _=b;[".jpg",".jpeg",".png",".gif",".bmp"].some(P=>_.endsWith(P))?k.push(["img",_,_]):[".mov",".mp4",".av1"].some(P=>_.endsWith(P))?k.push(["video",_,_]):y===_?k.push(["website",_,_]):k.push(["url",_,_])}),k.push(["enter",""]),v.push(k)})}const p=S(()=>{const f=[];return i(n.value.content,f),f}),[d,m]=Me();function h(f,v){["e","p","url","website","img","video","t"].some(y=>f[0]===y)&&v.stopPropagation()}return(f,v)=>{const y=mt,k=zt("RouterLink");return u(),w("div",{class:"w-full",ref_key:"target",ref:d},[z("div",null,[(u(!0),w(K,null,ne(c(p),b=>(u(),w("div",{key:b,class:"w-full flex flex-wrap justify-start items-start"},[(u(!0),w(K,null,ne(b,g=>(u(),w("span",{key:g[1],class:Oe(["flex justify-start items-start",{"w-full":["e","website","img","video"].some(E=>g[0]===E)}]),onClick:E=>h(g,E)},[g[0]==="img"?(u(),w("div",Sl,[x(y,{class:"img w-full",src:g[1]},null,8,["src"])])):g[0]==="video"?(u(),w("div",El,[z("video",Cl,[z("source",{src:g[1]},null,8,Pl)])])):g[0]==="website"?(u(),C($l,{key:g[1],src:g[1]},null,8,["src"])):g[0]==="url"?(u(),w("a",{key:3,class:"break-words",href:g[2]},A(g[1]),9,Rl)):g[0]==="t"?(u(),C(k,{key:4,to:{name:"tag",params:{value:g[2]}}},{default:$(()=>[G(A(g[1]),1)]),_:2},1032,["to"])):g[0]==="naddr"?(u(),C(t1,{key:5,addr:g[1]},null,8,["addr"])):g[0]==="p"?(u(),C(n1,{key:6,value:g[2]},null,8,["value"])):g[0]==="e"?(u(),C(Cs,{key:7,event:c(n),value:g[1],tag:g[2]},null,8,["event","value","tag"])):g[0]==="url"?(u(),w("a",{key:8,class:"break-words block",style:{"word-break":"break-all","text-overflow":"ellipsis","word-wrap":"break-word"},href:g[2]},A(g[1]),9,Ol)):g[0]==="enter"?(u(),w("br",Bl)):(u(),w("span",{key:10,class:"flex",style:{"table-layout":"fixed","word-break":"break-all","word-wrap":"break-word"},textContent:A(g[1].replace(" ","\xA0"))},null,8,Ml))],10,zl))),128))]))),128))]),!e.disabledReply&&c(m)?(u(),C(Ft,{key:0,event:c(n)},null,8,["event"])):I("",!0)],512)}}});const Al=L(Tl,[["__scopeId","data-v-00c108fc"]]);export{Al as C,Wt as P,i1 as _,l1 as a,ua as b,ca as c,Ft as d,Ht as e,So as f,zo as g,fa as h,as as i,rs as j,cs as k,hs as l,da as m,pa as n,jt as o,ds as p,xs as q,c1 as u};
